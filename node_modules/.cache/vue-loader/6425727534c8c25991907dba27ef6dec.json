{"remainingRequest":"D:\\jingsai\\rcms_src\\rcms-pc-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\jingsai\\rcms_src\\rcms-pc-web\\src\\views\\miniUser\\recyclingVerify-page\\VerifyDetail.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"D:\\jingsai\\rcms_src\\rcms-pc-web\\src\\views\\miniUser\\recyclingVerify-page\\VerifyDetail.vue","mtime":1568022031992},{"path":"D:\\jingsai\\rcms_src\\rcms-pc-web\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"D:\\jingsai\\rcms_src\\rcms-pc-web\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\jingsai\\rcms_src\\rcms-pc-web\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\jingsai\\rcms_src\\rcms-pc-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\jingsai\\rcms_src\\rcms-pc-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n.color {\r\n  color: #f07625;\r\n}\r\n",{"version":3,"sources":["VerifyDetail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuQA;AACA;AACA","file":"VerifyDetail.vue","sourceRoot":"src/views/miniUser/recyclingVerify-page","sourcesContent":["<!-- 引入组件库 -->\r\n <script src=\"//unpkg.com/iview@1.0.1/dist/iview.min.js\"></script>\r\n<template>\r\n  <div>\r\n    <br />\r\n    <Row>\r\n      <i-col span=\"30\">\r\n        <Card shadow>\r\n          <span slot=\"title\">\r\n            <Icon type=\"ios-contact\" size=\"25\"/>&nbsp;回收人员信息\r\n            <span style=\"float:right;width:100px;position:absolute;top: 10px;right: 10px;\">\r\n              <i-button type=\"primary\" @click=\"back\">返回</i-button>\r\n            </span>\r\n          </span>\r\n          <!-- <Form ref=\"verifyDetail\" :label-width=\"70\" >\r\n            <FormItem label=\"姓名\" >\r\n              <p> {{verifyDetail.name}}</p>\r\n            </FormItem>\r\n          </Form> -->\r\n          <p style=\"font-size:17px;font-weight:normal\"><Icon type=\"md-man\" size=\"25\" />&nbsp;姓&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;名：{{verifyDetail.name}}</p>\r\n          <br />\r\n          <p style=\"font-size:17px;font-weight:normal\"><Icon type=\"ios-book\" size=\"25\"/>&nbsp;身份证号：{{verifyDetail.idCard}}</p>\r\n          <br />\r\n          <p style=\"font-size:17px;font-weight:normal\" ><Icon type=\"ios-call\" size=\"25\"/>&nbsp;手机号码：{{verifyDetail.phone}}</p>\r\n          <br />\r\n          <p style=\"font-size:17px;font-weight:normal\"><Icon type=\"ios-home\" size=\"25\"/>&nbsp;地&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;址：{{verifyDetail.address}}</p>\r\n          <br />\r\n          <p style=\"font-size:17px;font-weight:normal\"><Icon type=\"md-time\" size=\"25\"/>&nbsp;申请时间：{{verifyDetail.createTime}}</p>\r\n          <br />\r\n          <!-- <p>更新时间:{{verifyDetail.updateTime}}</p>\r\n          <br />-->\r\n          <p style=\"font-size:17px;font-weight:normal\"><Icon type=\"md-contacts\" size=\"25\"/>&nbsp;人员类型：{{type}}</p>\r\n          <br />\r\n          <p v-bind:hidden=\"verifyDetail.memo==null\" style=\"font-size:17px;font-weight:normal\"><Icon type=\"md-close\" size=\"25\"/>&nbsp;审核未通过原因:{{verifyDetail.memo}}</p>\r\n          <br v-bind:hidden=\"verifyDetail.memo==null\" />\r\n          <P style=\"font-size:17px;font-weight:normal\"><Icon type=\"md-paper\" size=\"25\"/>&nbsp;身份证正反面照片</P>\r\n          <Poptip trigger=\"hover\" title=\"提示\" content=\"点击可查看大图\">\r\n            <img\r\n              :src=\"verifyDetail.positiveImgUrl\"\r\n              width=\"100px\"\r\n              height=\"100px\"\r\n              @click=\"watchBigImg(verifyDetail.positiveImgUrl)\"\r\n            />\r\n          </Poptip>\r\n          <Poptip trigger=\"hover\" title=\"提示\" content=\"点击可查看大图\">\r\n            <img\r\n              :src=\"verifyDetail.reverseImgUrl\"\r\n              width=\"100px\"\r\n              height=\"100px\"\r\n              @click=\"watchBigImg(verifyDetail.reverseImgUrl)\"\r\n            />\r\n          </Poptip>\r\n          <br />\r\n          <p>\r\n            <Steps :current=\"whichStatus\">\r\n              <Step title=\"待审核\" content=\"正在等待管理员审核\"></Step>\r\n              <Step title=\"审核通过\" content=\"审核通过\" v-if=\"isPassOrWait\"></Step>\r\n              <Step status=\"error\" title=\"审核未通过\" content=\"审核未通过\" v-if=\"isFaild\"></Step>\r\n              <!-- <Step status=\"error\" title=\"拒绝接单\" content=\"回收人员拒绝接单\" v-if=\"isRefuse\"></Step>\r\n              <Step title=\"待支付\" content=\"等待用户支付\" v-if=\"isPay\"></Step>\r\n              <Step status=\"error\" title=\"已取消\" content=\"订单已取消\" v-if=\"isCancel\"></Step>\r\n              <Step title=\"已完成\" content=\"订单已完成\" v-if=\"isFinish\"></Step>-->\r\n            </Steps>\r\n          </p>\r\n          <br />\r\n          <p>\r\n            <i-button type=\"error\" v-if=\"isFaild\" @click=\"back\">该用户审核未通过</i-button>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n            <i-button type=\"success\" @click=\"verifyPass\" v-if=\"isNoPass\">审核通过</i-button>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n            <i-button type=\"error\" @click=\"verifyFaild\" v-if=\"isNoPass\">审核不通过</i-button>\r\n            <i-button type=\"success\" v-if=\"isPass\" @click=\"go\">该用户已经通过审核，请移步管理页面进行管理</i-button>\r\n          </p>\r\n        </Card>\r\n      </i-col>\r\n    </Row>\r\n    <br />\r\n    <!-- 查看大图 -->\r\n    <Modal v-model=\"imgModal\" :width=\"600\" :styles=\"{top: '30px'}\">\r\n      <div width=\"100%\">\r\n        <img :src=\"bigImgUrl\" @click=\"watchBigImg(null)\" width=\"100%\" height=\"100%\" />\r\n      </div>\r\n    </Modal>\r\n    <Modal :loading=\"true\" ref=\"verify\" @on-ok=\"submit\" v-model=\"verifyModal\" title=\"原因\">\r\n      <Input v-model=\"memo\" :autofocus=\"true\" placeholder=\"请输入审核不通过的原因\"  />\r\n    </Modal>\r\n  </div>\r\n</template>\r\n<script>\r\nimport {\r\n  getVerifyPersonById,\r\n  changeStatusToPass,\r\n  changeStatusToFaild\r\n} from \"@/api/miniUser\";\r\nexport default {\r\n  //入口\r\n  created() {\r\n    var data = this.$route.query.verifyData;\r\n    if (data != null && data != undefined && data.id != undefined) {\r\n      this.verifyDetail = data;\r\n      this.setStore(\"id\", data.id);\r\n    } else {\r\n      this.verifyDetail.id = this.getStore(\"id\");\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      verifyModal: false,\r\n      memo: \"\",\r\n      imgModal: false, //查看大图\r\n      bigImgUrl: null, //大图链接\r\n      isBigImg: false,\r\n      isVerify: null,\r\n      operationLoading: false,\r\n      // isRefuse: null,\r\n      // isCancel: null,\r\n      // isFinish: null,\r\n      // isPay: null,\r\n      color: \"color\",\r\n      //前一个页面传来的数据\r\n      verifyDetail: {\r\n        id: \"\", //主键\r\n        openId:\"\",//用户唯一标识\r\n        idCard: \"\",\r\n        phone: \"\", //回收人员手机号码-\r\n        type: -1, //回收人员类型 --- 后台通过判断值是否小于0决定是否进行条件查询，小于0则查询所有type-\r\n        positiveImgUrl: \"\", //身份证正面照片\r\n        reverseImgUrl: \"\", //身份证反面照片\r\n        address: \"\", //回收人员地址\r\n        longitude: \"\", //回收人员的经度\r\n        latitude: \"\", //回收人员纬度\r\n        name: \"\", //回收人员姓名-\r\n        status: -1 //回收人员状态 -后台通过判断值是否小于0决定是否进行条件查询，小于0则查询所有type\r\n      }\r\n    };\r\n  },\r\n  computed: {\r\n    type: function() {\r\n      if (this.verifyDetail.type == 0) {\r\n        return \"社会回收人员\";\r\n      } else if (this.verifyDetail.type == 1) {\r\n        return \"公司员工\";\r\n      }\r\n    },\r\n    whichStatus: function() {\r\n      if (this.verifyDetail.status == 0) {\r\n        return 0;\r\n      } else if (this.verifyDetail.status == 1) {\r\n        return 1;\r\n      } else if (this.verifyDetail.status == 2) {\r\n        return 2;\r\n      }\r\n    },\r\n    isNoPass: function() {\r\n      if (this.verifyDetail.status == 0) {\r\n        return true;\r\n      } else return false;\r\n    },\r\n    isPassOrWait: function() {\r\n      if (this.verifyDetail.status == 0 || this.verifyDetail.status == 1) {\r\n        return true;\r\n      } else return false;\r\n    },\r\n    isPass: function() {\r\n      if (this.verifyDetail.status == 1) {\r\n        return true;\r\n      } else return false;\r\n    },\r\n    isFaild: function() {\r\n      if (this.verifyDetail.status == 2) {\r\n        return true;\r\n      } else return false;\r\n    }\r\n  },\r\n  methods: {\r\n    go() {\r\n      this.$router.push({ path: \"recyclingPersonnelManage\" });\r\n    },\r\n    back() {\r\n      this.$router.go(-1);\r\n    },\r\n    watchBigImg(v) {\r\n      this.imgModal = !this.imgModal;\r\n      this.bigImgUrl = v;\r\n    },\r\n    //发起请求根据ID获取回收人员信息\r\n    getVerifyMethod() {\r\n      getVerifyPersonById(this.verifyDetail.id).then(res => {\r\n        if (res.success === true) {\r\n          this.verifyDetail = res.result; // 数据渲染\r\n        }\r\n      });\r\n    },\r\n    //审核通过,改变用户的状态\r\n    verifyPass() {\r\n      this.$Modal.confirm({\r\n        title: \"审核\",\r\n        content: \"您确定该用户通过审核吗\",\r\n        onOk: () => {\r\n          this.operationLoading = true;\r\n          changeStatusToPass(this.verifyDetail.id,this.verifyDetail.name,this.verifyDetail.openId).then(res => {\r\n            this.operationLoading = false;\r\n            if (res.success === true) {\r\n              this.$Message.success(\"该用户通过审核\");\r\n              this.getVerifyMethod();\r\n            }\r\n          });\r\n        }\r\n      });\r\n    },\r\n    verifyFaild() {\r\n      this.verifyModal = true;\r\n    },\r\n    submit() {\r\n      this.operationLoading = true;\r\n      if (this.memo == null || this.memo == \"\") {\r\n        this.$Message.error(\"请输入不通过原因\");\r\n        this.$refs[\"verify\"].buttonLoading = false;\r\n        this.$nextTick(() => {\r\n          this.$refs[\"verify\"].loading = true;\r\n        });\r\n      } else {\r\n        changeStatusToFaild(this.verifyDetail.id,this.memo,this.verifyDetail.name,this.verifyDetail.openId).then(res => {\r\n          this.operationLoading = false;\r\n          if (res.success === true) {\r\n            this.$Message.error(\"审核不通过\");\r\n            this.getVerifyMethod();\r\n            this.verifyModal = false;\r\n          }\r\n        });\r\n      }\r\n    }\r\n    //审核不通过\r\n    // verifyFaild(){\r\n    //   this.$Modal.confirm({\r\n    //     title:\"审核\",\r\n    //     content:\"确定该用户审核不通过吗？\",\r\n    //     onOk: ()=>{\r\n    //       this.operationLoading = true;\r\n    //       changeStatusToFaild(this.verifyDetail.id).then(res =>{\r\n    //         this.operationLoading = false;\r\n    //         if(res.success === true){\r\n    //           this.$Message.error(\"审核不通过\")\r\n    //           this.getVerifyMethod();\r\n    //         }\r\n    //       });\r\n    //     }\r\n    //   });\r\n    // },\r\n  },\r\n  //渲染完毕\r\n  mounted() {\r\n    this.getVerifyMethod(); //重新获取回收人员信息\r\n  },\r\n  watch: {\r\n    verifyModal(newVal) {\r\n      if (!newVal) {\r\n        this.memo = \"\";\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\n.color {\r\n  color: #f07625;\r\n}\r\n</style>"]}]}