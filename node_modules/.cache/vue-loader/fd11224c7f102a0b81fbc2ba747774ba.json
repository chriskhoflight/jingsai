{"remainingRequest":"F:\\gitProject\\rcms_src\\rcms-pc-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\gitProject\\rcms_src\\rcms-pc-web\\src\\views\\Main.vue?vue&type=style&index=0&lang=less&","dependencies":[{"path":"F:\\gitProject\\rcms_src\\rcms-pc-web\\src\\views\\Main.vue","mtime":1564969187158},{"path":"F:\\gitProject\\rcms_src\\rcms-pc-web\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"F:\\gitProject\\rcms_src\\rcms-pc-web\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"F:\\gitProject\\rcms_src\\rcms-pc-web\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"F:\\gitProject\\rcms_src\\rcms-pc-web\\node_modules\\less-loader\\dist\\cjs.js","mtime":1564973047851},{"path":"F:\\gitProject\\rcms_src\\rcms-pc-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\gitProject\\rcms_src\\rcms-pc-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\r\n@import \"./main.less\";\r\n",{"version":3,"sources":["Main.vue"],"names":[],"mappings":";AACA","file":"Main.vue","sourceRoot":"src/views","sourcesContent":["<style lang=\"less\">\r\n@import \"./main.less\";\r\n</style>\r\n\r\n<template>\r\n<div class=\"layout\">\r\n  <Layout class=\"main\">\r\n    <Header :style=\"{ position: 'fixed', width: '100%'}\" class=\"main-header\"> \r\n      <app-header ></app-header>\r\n    </Header>\r\n    <Content :style=\"{margin: '80px 0 0 0'}\">\r\n      <div class=\"main\" :class=\"{'main-hide-text': shrink}\">\r\n        <div class=\"sidebar-menu-con menu-bar\" :style=\"{width: shrink?'60px':'220px', overflow: shrink ? 'visible' : 'auto'}\">\r\n          <shrinkable-menu :shrink=\"shrink\" @on-change=\"handleSubmenuChange\" :theme=\"menuTheme\" :before-push=\"beforePush\" :open-names=\"openedSubmenuArr\" :menu-list=\"menuList\">\r\n          </shrinkable-menu>\r\n        </div>\r\n        <div class=\"single-page-con\" :style=\"{left: shrink?'60px':'220px'}\">\r\n          <div class=\"single-page\">\r\n            <keep-alive :include=\"cachePage\">\r\n              <router-view></router-view>\r\n            </keep-alive>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </Content>\r\n  </Layout>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport appHeader from '@/views/components/header/app-header'\r\nimport shrinkableMenu from \"@/views/components/shrinkable-menu/shrinkable-menu.vue\";\r\nimport tagsPageOpened from \"@/views/components/tags-page-opened.vue\";\r\nimport breadcrumbNav from \"@/views/components/breadcrumb-nav.vue\";\r\n\r\nimport Cookies from \"js-cookie\";\r\nimport util from \"@/libs/util.js\";\r\n\r\nexport default {\r\n  components: {\r\n    appHeader,\r\n    shrinkableMenu,\r\n    tagsPageOpened,\r\n    breadcrumbNav\r\n  },\r\n  data() {\r\n    return {\r\n      shrink: false,\r\n      openedSubmenuArr: this.$store.state.app.openedSubmenuArr\r\n    };\r\n  },\r\n  computed: {\r\n    menuList() {\r\n      //根据路由当前路径计算顶级路径,加载整个路由信息\r\n      var path = this.$route.path;\r\n      var menuList = this.$store.state.app.menuList;\r\n      return util.getMenusByPath(menuList,path);\r\n    },\r\n    pageTagsList() {\r\n      return this.$store.state.app.pageOpenedList; // 打开的页面的页面对象\r\n    },\r\n    currentPath() {\r\n      return this.$store.state.app.currentPath; // 当前面包屑数组\r\n    },\r\n    menuTheme() {\r\n      return this.$store.state.app.menuTheme;\r\n    },\r\n    cachePage() {\r\n      return this.$store.state.app.cachePage;\r\n    },\r\n  },\r\n  stompClient: {\r\n    monitorIntervalTime: 100,\r\n    stompReconnect: true,\r\n    timeout(orgCmd) {}\r\n  },\r\n  methods: {\r\n    init() {\r\n      // let pathArr = util.setCurrentPath(this, this.$route.name);\r\n      // // this.$store.commit(\"updateMenulist\");\r\n      // if (pathArr.length >= 2) {\r\n      //   this.$store.commit(\"addOpenSubmenu\", pathArr[1].name);\r\n      // }\r\n      // let userInfo = JSON.parse(Cookies.get(\"userInfo\"));\r\n      // this.username = userInfo.username;\r\n      // this.userId = userInfo.id;\r\n      //this.checkTag(this.$route.name);\r\n    },\r\n    toggleClick() {\r\n      this.shrink = !this.shrink;\r\n    },\r\n    \r\n    checkTag(name) {\r\n      let openpageHasTag = this.pageTagsList.some(item => {\r\n        if (item.name === name) {\r\n          return true;\r\n        }\r\n      });\r\n      if (!openpageHasTag) {\r\n        //  解决关闭当前标签后再点击回退按钮会退到当前页时没有标签的问题\r\n        util.openNewPage(\r\n          this,\r\n          name,\r\n          this.$route.params || {},\r\n          this.$route.query || {}\r\n        );\r\n      }\r\n    },\r\n    handleSubmenuChange(val) {\r\n      // console.log(val)\r\n    },\r\n    beforePush(name) {\r\n      // console.log(name)\r\n      return true;\r\n    },\r\n    \r\n  },\r\n  watch: {\r\n    $route(to) {\r\n      this.$store.commit(\"setCurrentPageName\", to.name);\r\n      let pathArr = util.setCurrentPath(this, to.name);\r\n      if (pathArr.length > 2) {\r\n        this.$store.commit(\"addOpenSubmenu\", pathArr[1].name);\r\n      }\r\n      //this.checkTag(to.name);\r\n      localStorage.currentPageName = to.name;\r\n    },\r\n  },\r\n  mounted() {\r\n    this.init();\r\n  },\r\n  created() {\r\n    // 显示打开的页面的列表\r\n    this.$store.commit(\"setOpenedList\");\r\n  }\r\n};\r\n</script>\r\n"]}]}