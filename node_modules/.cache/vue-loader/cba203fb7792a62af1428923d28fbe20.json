{"remainingRequest":"D:\\jingsai\\rcms_src\\rcms-pc-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\jingsai\\rcms_src\\rcms-pc-web\\src\\views\\miniUser\\recyclingVerify-page\\VerifyDetail.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\jingsai\\rcms_src\\rcms-pc-web\\src\\views\\miniUser\\recyclingVerify-page\\VerifyDetail.vue","mtime":1568022031992},{"path":"D:\\jingsai\\rcms_src\\rcms-pc-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\jingsai\\rcms_src\\rcms-pc-web\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\jingsai\\rcms_src\\rcms-pc-web\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\jingsai\\rcms_src\\rcms-pc-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\jingsai\\rcms_src\\rcms-pc-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport {\r\n  getVerifyPersonById,\r\n  changeStatusToPass,\r\n  changeStatusToFaild\r\n} from \"@/api/miniUser\";\r\nexport default {\r\n  //入口\r\n  created() {\r\n    var data = this.$route.query.verifyData;\r\n    if (data != null && data != undefined && data.id != undefined) {\r\n      this.verifyDetail = data;\r\n      this.setStore(\"id\", data.id);\r\n    } else {\r\n      this.verifyDetail.id = this.getStore(\"id\");\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      verifyModal: false,\r\n      memo: \"\",\r\n      imgModal: false, //查看大图\r\n      bigImgUrl: null, //大图链接\r\n      isBigImg: false,\r\n      isVerify: null,\r\n      operationLoading: false,\r\n      // isRefuse: null,\r\n      // isCancel: null,\r\n      // isFinish: null,\r\n      // isPay: null,\r\n      color: \"color\",\r\n      //前一个页面传来的数据\r\n      verifyDetail: {\r\n        id: \"\", //主键\r\n        openId:\"\",//用户唯一标识\r\n        idCard: \"\",\r\n        phone: \"\", //回收人员手机号码-\r\n        type: -1, //回收人员类型 --- 后台通过判断值是否小于0决定是否进行条件查询，小于0则查询所有type-\r\n        positiveImgUrl: \"\", //身份证正面照片\r\n        reverseImgUrl: \"\", //身份证反面照片\r\n        address: \"\", //回收人员地址\r\n        longitude: \"\", //回收人员的经度\r\n        latitude: \"\", //回收人员纬度\r\n        name: \"\", //回收人员姓名-\r\n        status: -1 //回收人员状态 -后台通过判断值是否小于0决定是否进行条件查询，小于0则查询所有type\r\n      }\r\n    };\r\n  },\r\n  computed: {\r\n    type: function() {\r\n      if (this.verifyDetail.type == 0) {\r\n        return \"社会回收人员\";\r\n      } else if (this.verifyDetail.type == 1) {\r\n        return \"公司员工\";\r\n      }\r\n    },\r\n    whichStatus: function() {\r\n      if (this.verifyDetail.status == 0) {\r\n        return 0;\r\n      } else if (this.verifyDetail.status == 1) {\r\n        return 1;\r\n      } else if (this.verifyDetail.status == 2) {\r\n        return 2;\r\n      }\r\n    },\r\n    isNoPass: function() {\r\n      if (this.verifyDetail.status == 0) {\r\n        return true;\r\n      } else return false;\r\n    },\r\n    isPassOrWait: function() {\r\n      if (this.verifyDetail.status == 0 || this.verifyDetail.status == 1) {\r\n        return true;\r\n      } else return false;\r\n    },\r\n    isPass: function() {\r\n      if (this.verifyDetail.status == 1) {\r\n        return true;\r\n      } else return false;\r\n    },\r\n    isFaild: function() {\r\n      if (this.verifyDetail.status == 2) {\r\n        return true;\r\n      } else return false;\r\n    }\r\n  },\r\n  methods: {\r\n    go() {\r\n      this.$router.push({ path: \"recyclingPersonnelManage\" });\r\n    },\r\n    back() {\r\n      this.$router.go(-1);\r\n    },\r\n    watchBigImg(v) {\r\n      this.imgModal = !this.imgModal;\r\n      this.bigImgUrl = v;\r\n    },\r\n    //发起请求根据ID获取回收人员信息\r\n    getVerifyMethod() {\r\n      getVerifyPersonById(this.verifyDetail.id).then(res => {\r\n        if (res.success === true) {\r\n          this.verifyDetail = res.result; // 数据渲染\r\n        }\r\n      });\r\n    },\r\n    //审核通过,改变用户的状态\r\n    verifyPass() {\r\n      this.$Modal.confirm({\r\n        title: \"审核\",\r\n        content: \"您确定该用户通过审核吗\",\r\n        onOk: () => {\r\n          this.operationLoading = true;\r\n          changeStatusToPass(this.verifyDetail.id,this.verifyDetail.name,this.verifyDetail.openId).then(res => {\r\n            this.operationLoading = false;\r\n            if (res.success === true) {\r\n              this.$Message.success(\"该用户通过审核\");\r\n              this.getVerifyMethod();\r\n            }\r\n          });\r\n        }\r\n      });\r\n    },\r\n    verifyFaild() {\r\n      this.verifyModal = true;\r\n    },\r\n    submit() {\r\n      this.operationLoading = true;\r\n      if (this.memo == null || this.memo == \"\") {\r\n        this.$Message.error(\"请输入不通过原因\");\r\n        this.$refs[\"verify\"].buttonLoading = false;\r\n        this.$nextTick(() => {\r\n          this.$refs[\"verify\"].loading = true;\r\n        });\r\n      } else {\r\n        changeStatusToFaild(this.verifyDetail.id,this.memo,this.verifyDetail.name,this.verifyDetail.openId).then(res => {\r\n          this.operationLoading = false;\r\n          if (res.success === true) {\r\n            this.$Message.error(\"审核不通过\");\r\n            this.getVerifyMethod();\r\n            this.verifyModal = false;\r\n          }\r\n        });\r\n      }\r\n    }\r\n    //审核不通过\r\n    // verifyFaild(){\r\n    //   this.$Modal.confirm({\r\n    //     title:\"审核\",\r\n    //     content:\"确定该用户审核不通过吗？\",\r\n    //     onOk: ()=>{\r\n    //       this.operationLoading = true;\r\n    //       changeStatusToFaild(this.verifyDetail.id).then(res =>{\r\n    //         this.operationLoading = false;\r\n    //         if(res.success === true){\r\n    //           this.$Message.error(\"审核不通过\")\r\n    //           this.getVerifyMethod();\r\n    //         }\r\n    //       });\r\n    //     }\r\n    //   });\r\n    // },\r\n  },\r\n  //渲染完毕\r\n  mounted() {\r\n    this.getVerifyMethod(); //重新获取回收人员信息\r\n  },\r\n  watch: {\r\n    verifyModal(newVal) {\r\n      if (!newVal) {\r\n        this.memo = \"\";\r\n      }\r\n    }\r\n  }\r\n};\r\n",null]}