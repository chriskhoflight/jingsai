{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-2d0c91b7\"],{5875:function(t,e,o){\"use strict\";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o(\"Row\",[o(\"Col\",[o(\"Card\",[o(\"Row\",[o(\"Col\",[o(\"Button\",{attrs:{type:\"primary\",shape:\"circle\",icon:\"ios-arrow-back\"},on:{click:t.back}},[t._v(\"返回\")])],1)],1),o(\"br\"),o(\"Row\",[o(\"Form\",{ref:\"contentForm\",attrs:{\"label-width\":70,model:t.contentForm,rules:t.ruleValidate}},[o(\"Row\",[o(\"Col\",[o(\"Form-item\",{attrs:{label:\"标题\",prop:\"title\"}},[o(\"Input\",{staticStyle:{width:\"200px\"},attrs:{type:\"text\",clearable:\"\",placeholder:\"请输入文章标题\"},model:{value:t.contentForm.title,callback:function(e){t.$set(t.contentForm,\"title\",e)},expression:\"contentForm.title\"}})],1)],1)],1),o(\"Row\",[o(\"Col\",[o(\"Form-item\",{attrs:{label:\"作者\",prop:\"author\"}},[o(\"Input\",{staticStyle:{width:\"200px\"},attrs:{type:\"text\",clearable:\"\",placeholder:\"请输入作者\"},model:{value:t.contentForm.author,callback:function(e){t.$set(t.contentForm,\"author\",e)},expression:\"contentForm.author\"}})],1)],1)],1),o(\"Row\",[o(\"Col\",[o(\"Form-item\",{attrs:{label:\"内容类别\",prop:\"contentType\"}},[o(\"Select\",{staticStyle:{width:\"200px\"},attrs:{placeholder:\"请选择\",clearable:\"\"},model:{value:t.contentForm.contentType,callback:function(e){t.$set(t.contentForm,\"contentType\",e)},expression:\"contentForm.contentType\"}},t._l(t.dictContentType,function(e,n){return o(\"Option\",{key:n,attrs:{value:e.value}},[t._v(t._s(e.title))])}),1)],1)],1)],1),o(\"Row\",[o(\"Col\",[o(\"Form-item\",[o(\"Checkbox\",{model:{value:t.contentForm.isPublication,callback:function(e){t.$set(t.contentForm,\"isPublication\",t._n(e))},expression:\"contentForm.isPublication\"}},[t._v(\"立即发布\")]),o(\"Checkbox\",{attrs:{prop:\"isTop\"},model:{value:t.contentForm.isTop,callback:function(e){t.$set(t.contentForm,\"isTop\",t._n(e))},expression:\"contentForm.isTop\"}},[t._v(\"置顶内容\")])],1)],1)],1),o(\"Row\",[o(\"Col\",[o(\"Form-item\",{attrs:{label:\"封面图\",prop:\"introductionImg\"}},[o(\"upload-pic-input\",{ref:\"upload\",attrs:{width:\"285px\"},on:{\"on-change\":t.handleUpload}})],1)],1)],1),o(\"Row\",[o(\"Col\",[o(\"Form-item\",{attrs:{label:\"摘要\",prop:\"seoDescription\"}},[o(\"Input\",{attrs:{type:\"textarea\",rows:4,placeholder:\"请输入文章摘要\"},model:{value:t.contentForm.seoDescription,callback:function(e){t.$set(t.contentForm,\"seoDescription\",e)},expression:\"contentForm.seoDescription\"}})],1)],1)],1),o(\"Row\",[o(\"Col\",[o(\"Form-item\",{attrs:{label:\"正文\",prop:\"content\"}},[o(\"vue-ueditor-wrap\",{staticStyle:{\"z-index\":\"0\"},attrs:{config:t.myConfig},model:{value:t.contentForm.content,callback:function(e){t.$set(t.contentForm,\"content\",e)},expression:\"contentForm.content\"}})],1)],1)],1)],1)],1),o(\"Row\",{attrs:{type:\"flex\",justify:\"center\"}},[o(\"Col\",[o(\"Button\",{attrs:{type:\"primary\",loading:t.submitLoading},on:{click:t.submitContent}},[t._v(\"发布\")])],1),o(\"Col\",{attrs:{offset:\"1\"}},[o(\"Button\",{attrs:{type:\"primary\"},on:{click:t.handleReset}},[t._v(\"重置\")])],1)],1),o(\"Modal\",{attrs:{width:\"80%\"},model:{value:t.validModal,callback:function(e){t.validModal=e},expression:\"validModal\"}},[o(\"h2\",[t._v(\"不能为空白：“标题”、“作者”、“内容类别”、“摘要”、“内容”\")])])],1)],1)],1)},i=[],r=o(\"89a9\"),c=o(\"365c\"),a=o(\"dffa\"),l=o(\"6625\"),s=o.n(l),u=\"/rcms-prod-api\",m=\"/rcms-pc-web/\",p={name:\"publishContent\",components:{VueUeditorWrap:s.a,uploadPicInput:a[\"default\"]},data:function(){return{validModal:!1,ruleValidate:{title:[{required:!0,message:\"标题不能为空\",trigger:\"blur\"}],author:[{required:!0,message:\"作者不能为空\",trigger:\"blur\"}],contentType:[{required:!0,message:\"内容类别不能为空\",trigger:\"blur\"}],seoDescription:[{required:!0,message:\"摘要不能为空\",trigger:\"blur\"}],content:[{required:!0,message:\"正文不能为空\",trigger:\"blur\"}]},contentForm:{title:\"\",author:\"\",isPublication:0,isTop:0,seoDescription:\"\",seoKeywords:\"\",seoTitle:\"\",content:\"\",url:\"\",contentType:\"\",introductionImg:\"\"},dictContentType:[],submitLoading:!1,myConfig:{serverUrl:u+\"/content/uploadToQiniu\",UEDITOR_HOME_URL:m+\"ueditor/\",autoHeightEnabled:!1,autoFloatEnabled:!1,initialFrameHeight:450,initialFrameWidth:\"100%\",enableAutoSave:!0}}},methods:{handleUpload:function(t){this.contentForm.introductionImg=t},init:function(){this.getDictContenTypeData()},handleReset:function(){this.$refs.contentForm.resetFields(),this.$Message.success(\"内容已重置\")},getDictContenTypeData:function(){var t=this;Object(c[\"S\"])(\"contentType\").then(function(e){!0===e.success&&(t.dictContentType=e.result)})},back:function(){window.history.back()},submitContent:function(){var t=this;this.$refs.contentForm.validate(function(e){if(e){if(\"\"==t.contentForm.title||void 0==t.contentForm.title)return;if(\"\"==t.contentForm.author||void 0==t.contentForm.author)return;if(\"\"==t.contentForm.contentType||void 0==t.contentForm.contentType)return;if(\"\"==t.contentForm.content||void 0==t.contentForm.content)return;t.submitLoading=!0,t.contentForm.isPublication=Number(t.contentForm.isPublication),t.contentForm.isTop=Number(t.contentForm.isTop),Object(r[\"f\"])(t.contentForm).then(function(e){t.submitLoading=!1,!0===e.success&&(t.$Message.success(\"操作成功\"),t.$refs.contentForm.resetFields(),t.$router.push({name:\"contentManage\"}))})}else t.validModal=!0})}},watch:{\"$route.name\":function(t,e){\"contentManage\"===e&&\"publishContent\"===t&&this.init()}},mounted:function(){this.init()}},d=p,b=o(\"2877\"),F=Object(b[\"a\"])(d,n,i,!1,null,\"059d496c\",null);e[\"default\"]=F.exports}}]);","extractedComments":[]}