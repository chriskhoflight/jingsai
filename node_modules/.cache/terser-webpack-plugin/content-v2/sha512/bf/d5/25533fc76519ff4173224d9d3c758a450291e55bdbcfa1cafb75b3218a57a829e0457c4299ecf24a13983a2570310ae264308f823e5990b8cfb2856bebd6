{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-0b8a6f7f\",\"chunk-54450d9a\",\"chunk-2ec6664f\",\"chunk-6a35c6f6\",\"chunk-7218a9fa\",\"chunk-2d0c9b38\",\"chunk-2d0a45cb\"],{\"05b2\":function(e,t,a){\"use strict\";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"Form\",{ref:\"formDynamic\",attrs:{model:e.formDynamic,\"label-width\":70}},[e._l(e.formDynamic.items,function(t,r){return t.status?a(\"FormItem\",{key:r,attrs:{label:\"时间段 \"+t.index,prop:\"items.\"+r+\".value\",rules:{required:!0,message:\"Item \"+t.index+\" can not be empty\",trigger:\"blur\"}}},[a(\"Row\",[a(\"Col\",{attrs:{span:\"9\"}},[a(\"Select\",{model:{value:t.value,callback:function(a){e.$set(t,\"value\",a)},expression:\"item.value\"}},e._l(e.selectOptions,function(e){return a(\"Option\",{key:e.value,attrs:{value:e.code,label:e.name}})}),1)],1),a(\"Col\",{attrs:{span:\"9\",offset:\"1\"}},[a(\"Time-picker\",{attrs:{format:\"HH:mm\",type:\"timerange\",placement:\"bottom-end\",placeholder:\"选择时间\"},model:{value:t.time,callback:function(a){e.$set(t,\"time\",a)},expression:\"item.time\"}})],1),a(\"Col\",{attrs:{span:\"4\",offset:\"1\"}},[a(\"Button\",{on:{click:function(t){return e.handleRemove(r)}}},[e._v(\"删 除\")])],1)],1)],1):e._e()}),a(\"FormItem\",[a(\"Row\",[a(\"Col\",{attrs:{span:\"12\"}},[a(\"Button\",{attrs:{type:\"dashed\",long:\"\",icon:\"md-add\"},on:{click:e.handleAdd}},[e._v(\"添  加\")])],1)],1)],1)],2)},s=[],n={data:function(){return{index:1,formDynamic:{items:[{value:\"\",index:1,status:1,time:\"\"}]}}},methods:{handleSubmit:function(e){var t=this;this.$refs[e].validate(function(e){e?t.$Message.success(\"Success!\"):t.$Message.error(\"Fail!\")})},handleReset:function(e){this.formDynamic.items=[{value:\"\",index:1,status:1,time:\"\"}]},handleAdd:function(){this.index++,this.formDynamic.items.push({value:\"\",index:this.index,status:1,time:\"\"})},handleRemove:function(e){this.formDynamic.items[e].status=0}},props:[\"selectOptions\",\"data\"],watch:{data:{handler:function(e){this.formDynamic.items=e}}}},i=n,o=a(\"2877\"),l=Object(o[\"a\"])(i,r,s,!1,null,null,null);t[\"default\"]=l.exports},1909:function(e,t,a){},\"1b13\":function(e,t,a){},\"1dbc\":function(e,t,a){\"use strict\";var r=a(\"ab57\"),s=a.n(r);s.a},2232:function(e,t,a){\"use strict\";var r=a(\"9d93\"),s=a.n(r);s.a},\"33f4\":function(e,t,a){\"use strict\";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{staticStyle:{display:\"inline-block\"}},[a(\"Icon\",{staticClass:\"spin-icon-load\",attrs:{type:\"ios-loading\",size:\"18\",color:\"#2d8cf0\"}})],1)},s=[],n={name:\"circleLoading\"},i=n,o=(a(\"2232\"),a(\"2877\")),l=Object(o[\"a\"])(i,r,s,!1,null,null,null);t[\"default\"]=l.exports},\"56c6\":function(e,t,a){\"use strict\";var r=a(\"95d1\"),s=a.n(r);s.a},\"59ec\":function(e,t,a){\"use strict\";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",[a(\"Cascader\",{style:{width:e.width},attrs:{data:e.department,\"load-data\":e.loadData,\"change-on-select\":\"\",filterable:\"\",clearable:\"\",placeholder:\"请选择或输入搜索部门\"},on:{\"on-change\":e.handleChangeDep},model:{value:e.selectDep,callback:function(t){e.selectDep=t},expression:\"selectDep\"}})],1)},s=[],n=a(\"365c\"),i={name:\"departmentChoose\",props:{width:{type:String,default:\"200px\"}},data:function(){return{selectDep:[],department:[]}},methods:{initDepartmentData:function(){var e=this;Object(n[\"gb\"])().then(function(t){!0===t.success&&(t.result.forEach(function(e){e.isParent?(e.value=e.id,e.label=e.title,e.loading=!1,e.children=[]):(e.value=e.id,e.label=e.title),-1===e.status&&(e.label=\"[已禁用] \"+e.label,e.disabled=!0)}),e.department=t.result)})},loadData:function(e,t){e.loading=!0,Object(n[\"hb\"])(e.value).then(function(a){e.loading=!1,!0===a.success&&(a.result.forEach(function(e){e.isParent?(e.value=e.id,e.label=e.title,e.loading=!1,e.children=[]):(e.value=e.id,e.label=e.title),-1===e.status&&(e.label=\"[已禁用] \"+e.label,e.disabled=!0)}),e.children=a.result,t())})},handleChangeDep:function(e,t){var a=\"\";e&&e.length>0&&(a=e[e.length-1]),this.$emit(\"on-select\",a)},clearSelect:function(){this.selectDep=[]}},created:function(){this.initDepartmentData()}},o=i,l=a(\"2877\"),c=Object(l[\"a\"])(o,r,s,!1,null,null,null);t[\"default\"]=c.exports},\"5a07\":function(e,t,a){\"use strict\";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{staticClass:\"search\"},[a(\"Row\",[a(\"Col\",[a(\"Card\",[a(\"Row\",[a(\"Form\",{ref:\"searchForm\",staticClass:\"search-form\",attrs:{model:e.searchForm,inline:\"\",\"label-width\":70}},[a(\"Form-item\",{attrs:{label:\"星期\",prop:\"week\"}},[a(\"Select\",{staticStyle:{width:\"200px\"},attrs:{placeholder:\"请选择\",clearable:\"\"},model:{value:e.searchForm.week,callback:function(t){e.$set(e.searchForm,\"week\",t)},expression:\"searchForm.week\"}},[a(\"Option\",{attrs:{value:\"星期一\"}},[e._v(\"星期一\")]),a(\"Option\",{attrs:{value:\"星期二\"}},[e._v(\"星期二\")]),a(\"Option\",{attrs:{value:\"星期三\"}},[e._v(\"星期三\")]),a(\"Option\",{attrs:{value:\"星期四\"}},[e._v(\"星期四\")]),a(\"Option\",{attrs:{value:\"星期五\"}},[e._v(\"星期五\")]),a(\"Option\",{attrs:{value:\"星期六\"}},[e._v(\"星期六\")]),a(\"Option\",{attrs:{value:\"星期日\"}},[e._v(\"星期日\")])],1)],1),e.drop?a(\"span\",[a(\"Form-item\",{attrs:{label:\"回收物品描述\",prop:\"recoveryDesc\"}},[a(\"Input\",{staticStyle:{width:\"200px\"},attrs:{type:\"text\",clearable:\"\",placeholder:\"请输入回收物品描述\"},model:{value:e.searchForm.recoveryDesc,callback:function(t){e.$set(e.searchForm,\"recoveryDesc\",t)},expression:\"searchForm.recoveryDesc\"}})],1),a(\"Form-item\",{attrs:{label:\"小区编码\"}},[a(\"Select\",{staticStyle:{width:\"200px\"},attrs:{placeholder:\"请选择小区\",clearable:\"\"},model:{value:e.searchForm.estateCodes,callback:function(t){e.$set(e.searchForm,\"estateCodes\",t)},expression:\"searchForm.estateCodes\"}},e._l(e.estateCodeAndName,function(e){return a(\"Option\",{key:e.value,attrs:{value:e.code,label:e.code+e.name}})}),1)],1),a(\"Form-item\",{attrs:{label:\"状态\",prop:\"status\"}},[a(\"Select\",{staticStyle:{width:\"200px\"},attrs:{placeholder:\"请选择\",clearable:\"\"},model:{value:e.searchForm.status,callback:function(t){e.$set(e.searchForm,\"status\",t)},expression:\"searchForm.status\"}},[a(\"Option\",{attrs:{value:\"0\"}},[e._v(\"正常启用\")]),a(\"Option\",{attrs:{value:\"-1\"}},[e._v(\"禁用\")])],1)],1),a(\"Form-item\",{attrs:{label:\"创建时间\"}},[a(\"DatePicker\",{staticStyle:{width:\"200px\"},attrs:{type:\"daterange\",format:\"yyyy-MM-dd\",clearable:\"\",placeholder:\"选择起始时间\"},on:{\"on-change\":e.selectDateRange},model:{value:e.selectDate,callback:function(t){e.selectDate=t},expression:\"selectDate\"}})],1)],1):e._e(),a(\"Form-item\",{staticClass:\"br\",staticStyle:{\"margin-left\":\"-35px\"}},[a(\"Button\",{attrs:{type:\"primary\",icon:\"ios-search\"},on:{click:e.handleSearch}},[e._v(\"搜索\")]),a(\"Button\",{on:{click:e.handleReset}},[e._v(\"重置\")]),a(\"a\",{staticClass:\"drop-down\",on:{click:e.dropDown}},[e._v(\"\\n                \"+e._s(e.dropDownContent)+\"\\n                \"),a(\"Icon\",{attrs:{type:e.dropDownIcon}})],1)],1)],1)],1),a(\"Row\",{staticClass:\"operation\"},[a(\"Button\",{attrs:{type:\"primary\",icon:\"md-add\"},on:{click:e.add}},[e._v(\"添加排班信息\")]),a(\"Button\",{attrs:{icon:\"md-trash\"},on:{click:e.delAll}},[e._v(\"批量删除\")]),e.operationLoading?a(\"circleLoading\"):e._e()],1),a(\"Row\",[a(\"Alert\",{attrs:{\"show-icon\":\"\"}},[e._v(\"\\n            已选择\\n            \"),a(\"span\",{staticClass:\"select-count\"},[e._v(e._s(e.selectCount))]),e._v(\" 项\\n            \"),a(\"a\",{staticClass:\"select-clear\",on:{click:e.clearSelectAll}},[e._v(\"清空\")])])],1),a(\"Row\",[a(\"Table\",{ref:\"table\",attrs:{loading:e.loading,border:\"\",columns:e.columns,data:e.data,sortable:\"custom\"},on:{\"on-sort-change\":e.changeSort,\"on-selection-change\":e.showSelect}}),a(\"Table\",{ref:\"exportTable\",staticStyle:{display:\"none\"},attrs:{columns:e.exportColumns,data:e.exportData}})],1),a(\"Row\",{staticClass:\"page\",attrs:{type:\"flex\",justify:\"end\"}},[a(\"Page\",{attrs:{current:e.searchForm.pageNumber,total:e.total,\"page-size\":e.searchForm.pageSize,\"page-size-opts\":[10,20,50],size:\"small\",\"show-total\":\"\",\"show-elevator\":\"\",\"show-sizer\":\"\"},on:{\"on-change\":e.changePage,\"on-page-size-change\":e.changePageSize}})],1)],1)],1)],1),a(\"Modal\",{attrs:{title:e.modalTitle,\"mask-closable\":!1,width:500,styles:{top:\"30px\"}},model:{value:e.userModalVisible,callback:function(t){e.userModalVisible=t},expression:\"userModalVisible\"}},[a(\"Form\",{ref:\"userForm\",attrs:{model:e.userForm,\"label-width\":70,rules:e.userFormValidate}},[a(\"FormItem\",{attrs:{label:\"星期\",prop:\"weekNum\"}},[a(\"Select\",{attrs:{placeholder:\"请选择\",\"label-in-value\":!0},on:{\"on-change\":e.addWeek},model:{value:e.userForm.weekNum,callback:function(t){e.$set(e.userForm,\"weekNum\",t)},expression:\"userForm.weekNum\"}},[a(\"Option\",{attrs:{value:\"1\"}},[e._v(\"星期一\")]),a(\"Option\",{attrs:{value:\"2\"}},[e._v(\"星期二\")]),a(\"Option\",{attrs:{value:\"3\"}},[e._v(\"星期三\")]),a(\"Option\",{attrs:{value:\"4\"}},[e._v(\"星期四\")]),a(\"Option\",{attrs:{value:\"5\"}},[e._v(\"星期五\")]),a(\"Option\",{attrs:{value:\"6\"}},[e._v(\"星期六\")]),a(\"Option\",{attrs:{value:\"7\"}},[e._v(\"星期日\")])],1)],1),a(\"FormItem\",{attrs:{label:\"回收车辆\",prop:\"recoveryCar\"}},[a(\"Input\",{model:{value:e.userForm.recoveryCar,callback:function(t){e.$set(e.userForm,\"recoveryCar\",t)},expression:\"userForm.recoveryCar\"}})],1),a(\"FormItem\",{attrs:{label:\"回收物品描述\",prop:\"recoveryDesc\"}},[a(\"Input\",{model:{value:e.userForm.recoveryDesc,callback:function(t){e.$set(e.userForm,\"recoveryDesc\",t)},expression:\"userForm.recoveryDesc\"}})],1),a(\"FormItem\",{attrs:{label:\"状态\",prop:\"status\"}},[a(\"Select\",{attrs:{placeholder:\"请选择\"},model:{value:e.userForm.status,callback:function(t){e.$set(e.userForm,\"status\",t)},expression:\"userForm.status\"}},[a(\"Option\",{attrs:{value:\"0\"}},[e._v(\"正常启用\")]),a(\"Option\",{attrs:{value:\"-1\"}},[e._v(\"禁用\")])],1)],1),a(\"FormItem\",{attrs:{label:\"上门收运时间\",prop:\"recoveryTime\"}},[a(\"i-col\",{attrs:{span:\"12\"}},[a(\"Time-picker\",{staticStyle:{width:\"168px\"},attrs:{format:\"HH:mm\",type:\"timerange\",placement:\"bottom-end\",placeholder:\"选择时间\"},model:{value:e.userForm.recoveryTime,callback:function(t){e.$set(e.userForm,\"recoveryTime\",t)},expression:\"userForm.recoveryTime\"}})],1)],1),a(\"dynamic-form\",{ref:\"dynamicForm\",attrs:{selectOptions:e.estateCodeAndName,data:e.initData}})],1),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"},[a(\"Button\",{attrs:{type:\"text\"},on:{click:e.cancelUser}},[e._v(\"取消\")]),a(\"Button\",{attrs:{type:\"primary\",loading:e.submitLoading},on:{click:e.submitUser}},[e._v(\"提交\")])],1)],1),a(\"Modal\",{attrs:{title:\"确认导出\",loading:e.loadingExport},on:{\"on-ok\":e.exportAll},model:{value:e.modalExportAll,callback:function(t){e.modalExportAll=t},expression:\"modalExportAll\"}},[a(\"p\",[e._v(\"您确认要导出全部 \"+e._s(e.total)+\" 条数据？\")])]),a(\"Modal\",{attrs:{title:\"途经小区\",width:\"400\",\"footer-hide\":\"\"},model:{value:e.timeLine,callback:function(t){e.timeLine=t},expression:\"timeLine\"}},[a(\"Timeline\",e._l(e.estateInfo,function(t){return a(\"TimelineItem\",{key:t.value,attrs:{value:t.code,label:t.name}},[a(\"p\",{staticClass:\"time\"},[e._v(\"时间: \"+e._s(t.time))]),a(\"p\",{staticClass:\"content\"},[e._v(\"小区名称: \"+e._s(t.name))]),a(\"p\",{staticClass:\"content\"},[e._v(\"地址: \"+e._s(t.address))])])}),1)],1)],1)},s=[],n=a(\"7998\"),i=a(\"365c\"),o=a(\"6d71\"),l=a(\"59ec\"),c=a(\"dd85\"),u=a(\"dffa\"),d=a(\"33f4\"),m=a(\"05b2\"),h={name:\"user-manage\",components:{circleLoading:d[\"default\"],expandRow:o[\"default\"],departmentChoose:l[\"default\"],departmentTreeChoose:c[\"default\"],uploadPicInput:u[\"default\"],dynamicForm:m[\"default\"]},data:function(){var e=this,t=function(t,a,r){0===e.modalType||1===e.modalType&&e.oldPhone!=e.userForm.phone?selectByPhone({phone:e.userForm.phone}).then(function(e){!0===e.success?r(new Error(\"该号码已被注册\")):!1===e.success?r():r(new Error(\"手机号不能为空\"))}):r()},a=function(e,t,a){null==t||void 0==t||\"\"===t?a(new Error(\"必填项不能为空\")):a()},r=function(e,t,a){var r=/^(\\-|\\+)?(((\\d|[1-9]\\d|1[0-7]\\d|0{1,3})\\.\\d{0,6})|(\\d|[1-9]\\d|1[0-7]\\d|0{1,3})|180\\.0{0,6}|180)$/;r.test(t)?a():a(new Error(\"经度整数部分为0-180,小数部分为0到6位!\"))},s=function(e,t,a){var r=/^(\\-|\\+)?([0-8]?\\d{1}\\.\\d{0,6}|90\\.0{0,6}|[0-8]?\\d{1}|90)$/;r.test(t)?a():a(new Error(\"纬度整数部分为0-90,小数部分为0到6位!\"))},n=function(e,t,a){t&&(!/\\d{17}[\\d|x]|\\d{15}/.test(t)||15!==t.length&&18!==t.length)?a(new Error(\"身份证号码不符合规范\")):a()},i=function(e,t,a){var r=/^[1][3,4,5,7,8][0-9]{9}$/;r.test(t)?a():a(new Error(\"手机号格式错误\"))},l=function(e,t,a){Number(t)&&t%1===0?a():a(new Error(\"请输入整数金额\"))};return{estateInfo:\"\",showEstate:[],timeLine:!1,loading:!0,operationLoading:!1,loadingExport:!0,modalExportAll:!1,drop:!1,oldPhone:\"\",dropDownContent:\"展开\",dropDownIcon:\"ios-arrow-down\",selectCount:0,estateCodeAndName:[],selectList:[],dataDep:[],searchKey:\"\",searchForm:{estateCodes:\"\",week:\"\",recoveryDesc:\"\",recoveryTime:\"\",status:\"\",pageNumber:1,pageSize:10,sort:\"weekNum\",order:\"desc\",startDate:\"\",endDate:\"\"},selectDate:null,modalType:0,userModalVisible:!1,modalTitle:\"\",userForm:{week:\"\",recoveryCar:\"\",recoveryDesc:\"\",recoveryTime:\"\",estateCodes:\"\",weekNum:\"\",status:\"\",arriveTimesSlot:\"\"},initData:[],userRoles:[],roleList:[],errorPass:\"\",userFormValidate:{recoveryCar:[{required:!0,message:\"回收车辆不能为空\",trigger:\"blur\"}],recoveryDesc:[{required:!0,message:\"回收物品描述不能为空\",trigger:\"blur\"}],name:[{required:!0,message:\"姓名不能为空\",trigger:\"blur\"}],weekNum:[{required:!0,message:\"星期不能为空\",trigger:\"blur\"},{validator:a,trigger:\"blur\"}],recoveryTime:[{validator:a,trigger:\"blur\"}],phone:[{required:!0,message:\"手机号不能为空\",trigger:\"blur\"},{validator:i,trigger:\"blur\"},{validator:t,trigger:\"blur\"}],idCard:[{required:!0,message:\"身份证号码不能为空\",trigger:\"blur\"},{validator:n,trigger:\"blur\"}],deposit:[{required:!1},{validator:l}],status:[{required:!0,message:\"状态不能为空\"},{validator:a,trigger:\"change\"}],estateCodes:[{validator:a,trigger:\"blur\"}],address:[{required:!0,message:\"地址不能为空\",trigger:\"blur\"}],longitude:[{required:!0,message:\"经度不能为空\",trigger:\"blur\"},{validator:r,trigger:\"blur\"}],latitude:[{required:!0,message:\"纬度不能为空\",trigger:\"blur\"},{validator:s,trigger:\"blur\"}]},submitLoading:!1,columns:[{type:\"selection\",width:60,align:\"center\",fixed:\"left\"},{type:\"expand\",width:50,fixed:\"left\",render:function(e,t){return e(o[\"default\"],{props:{row:t.row}})}},{type:\"index\",width:80,align:\"center\",fixed:\"left\",title:\"序号\"},{title:\"星期\",key:\"week\",minWidth:145,fixed:\"left\"},{title:\"回收物品描述\",key:\"recoveryDesc\",minWidth:115},{title:\"上门收运时间\",key:\"recoveryTime\",minWidth:180,sortable:!0},{title:\"小区编码\",key:\"estateCodes\",minWidth:150},{title:\"创建时间\",key:\"createTime\",sortable:!0,sortType:\"desc\",minWidth:150},{title:\"状态\",key:\"status\",align:\"center\",minWidth:140,render:function(e,t){return 0===t.row.status?e(\"div\",[e(\"Tag\",{props:{type:\"dot\",color:\"success\"}},\"正常启用\")]):-1===t.row.status?e(\"div\",[e(\"Tag\",{props:{type:\"dot\",color:\"error\"}},\"禁用\")]):void 0},filters:[{label:\"正常启用\",value:0},{label:\"禁用\",value:-1}],filterMultiple:!1,filterMethod:function(e,t){return 0===e?0===t.status:-1===e?-1===t.status:void 0}},{title:\"回收车辆\",key:\"recoveryCar\",minWidth:115},{title:\"星期数值\",key:\"weekNum\",minWidth:120,fixed:\"left\",sortable:!0},{title:\"操作\",key:\"action\",minWidth:300,align:\"center\",fixed:\"right\",render:function(t,a){var r=\"\";return r=0==a.row.status?t(\"Button\",{props:{size:\"small\"},style:{marginRight:\"5px\"},on:{click:function(){e.disable(a.row)}}},\"禁用\"):t(\"Button\",{props:{type:\"success\",size:\"small\"},style:{marginRight:\"5px\"},on:{click:function(){e.enable(a.row)}}},\"启用\"),t(\"div\",[t(\"Button\",{props:{type:\"primary\",size:\"small\"},style:{marginRight:\"5px\"},on:{click:function(){e.edit(a.row)}}},\"编辑\"),r,t(\"Button\",{props:{type:\"error\",size:\"small\"},style:{marginRight:\"5px\"},on:{click:function(){e.remove(a.row)}}},\"删除\"),t(\"Button\",{props:{type:\"info\",size:\"small\"},on:{click:function(){e.show(a.row)}}},\"途经小区\")])}}],exportColumns:[{title:\"用户名\",key:\"username\"},{title:\"头像\",key:\"avatar\"},{title:\"所属部门ID\",key:\"departmentId\"},{title:\"所属部门\",key:\"departmentTitle\"},{title:\"手机\",key:\"mobile\"},{title:\"邮箱\",key:\"email\"},{title:\"性别\",key:\"sex\"},{title:\"用户类型\",key:\"type\"},{title:\"状态\",key:\"status\"},{title:\"删除标志\",key:\"delFlag\"},{title:\"创建时间\",key:\"createTime\"},{title:\"更新时间\",key:\"updateTime\"}],data:[],exportData:[],total:0,dictSex:[]}},methods:{init:function(){this.getUserList(),this.getDictSexData(),this.getEstate()},getEstate:function(){var e=this;Object(n[\"l\"])().then(function(t){e.estateCodeAndName=t.result})},getDictSexData:function(){var e=this;Object(i[\"S\"])(\"sex\").then(function(t){t.success&&(e.dictSex=t.result)})},time:function(e){this.userForm.recoveryTime=e[0]+\"-\"+e[1]},handleSelectDepTree:function(e){this.userForm.departmentId=e[0]},handleSelectDep:function(e){this.searchForm.departmentId=e},changePage:function(e){this.searchForm.pageNumber=e,this.getUserList(),this.clearSelectAll()},changePageSize:function(e){this.searchForm.pageSize=e,this.getUserList()},selectDateRange:function(e){e&&(this.searchForm.startDate=e[0],this.searchForm.endDate=e[1])},getUserList:function(){var e=this;this.loading=!0,Object(n[\"n\"])(this.searchForm).then(function(t){e.loading=!1,!0===t.success&&(e.data=t.result.content,e.total=t.result.totalElements)})},handleSearch:function(){this.searchForm.pageNumber=1,this.searchForm.pageSize=10,this.getUserList()},handleReset:function(){this.$refs.searchForm.resetFields(),this.searchForm.pageNumber=1,this.searchForm.pageSize=10,this.selectDate=null,this.searchForm.startDate=\"\",this.searchForm.endDate=\"\",this.selectDep=[],this.searchForm.departmentId=\"\",this.getUserList()},changeSort:function(e){this.searchForm.sort=e.key,this.searchForm.order=e.order,\"normal\"===e.order&&(this.searchForm.order=\"\"),this.getUserList()},getRoleList:function(){var e=this;Object(i[\"P\"])().then(function(t){!0===t.success&&(e.roleList=t.result)})},handleDropdown:function(e){var t=this;if(\"refresh\"===e)this.getUserList();else if(\"exportData\"===e){if(this.selectCount<=0)return void this.$Message.warning(\"您还未选择要导出的数据\");this.$Modal.confirm({title:\"确认导出\",content:\"您确认要导出所选 \"+this.selectCount+\" 条数据?\",onOk:function(){t.$refs.exportTable.exportCsv({filename:\"用户数据\"})}})}else\"exportAll\"===e?this.modalExportAll=!0:\"importData\"===e&&this.$Modal.info({title:\"暂未开发\",content:\"请期待\"})},exportAll:function(){var e=this;Object(i[\"Q\"])().then(function(t){e.modalExportAll=!1,t.success&&(e.exportData=t.result,setTimeout(function(){e.$refs.exportTable.exportCsv({filename:\"用户全部数据\"})},1e3))})},cancelUser:function(){this.userModalVisible=!1},submitUser:function(){var e=this;this.$refs.userForm.validate(function(t){if(t){var a=JSON.stringify(e.userForm),r=JSON.parse(a);r.recoveryTime=e.userForm.recoveryTime.join(\"-\");var s=\"\",i=\"\",o=!1;if(e.$refs.dynamicForm.formDynamic.items.forEach(function(e,t,a){if(0!==e.status)if(\"\"!==e.value&&\"\"!==e.time[0]&&\"\"!==e.time[1]){var r=t===a.length-1?\"\":\",\";s+=e.value+r,i+=e.time.join(\"-\")+r}else o=!0}),o)return void e.$Message.error(\"时间段输入错误,请重新输入\");var l=s.lastIndexOf(\",\");l===s.length-1&&(s=s.substring(0,l),i=i.substring(0,i.lastIndexOf(\",\"))),r.estateCodes=s,r.arriveTimesSlot=i,0===e.modalType?(delete e.userForm.id,Object(n[\"b\"])(r).then(function(t){e.submitLoading=!1,!0===t.success&&(e.$Message.success(\"操作成功\"),e.getUserList(),e.userModalVisible=!1)})):(e.submitLoading=!0,Object(n[\"g\"])(r).then(function(t){e.submitLoading=!1,!0===t.success&&(e.$Message.success(\"操作成功\"),e.getUserList(),e.userModalVisible=!1)}))}})},handleUpload:function(e){this.userForm.positiveImgUrl=e,this.userForm.reverseImgUrl=e},add:function(){this.modalType=0,this.modalTitle=\"添加排班信息\",this.$refs.userForm.resetFields(),this.$refs.dynamicForm.handleReset(\"formDynamic\"),this.userModalVisible=!0},edit:function(e){for(var t in this.modalType=1,this.modalTitle=\"编辑排班信息\",this.$refs.userForm.resetFields(),e)null===e[t]&&(e[t]=\"\");var a=JSON.stringify(e),r=JSON.parse(a);r.estateCodes=r.estateCodes.split(\",\");var s=[],n=r.arriveTimesSlot.split(\",\");r.estateCodes.forEach(function(e,t,a){var r=n[t].split(\"-\");s.push({index:t,status:1,value:e,time:r})}),this.initData=s,r.status=String(r.status),r.recoveryTime=r.recoveryTime.split(\"-\"),r.weekNum=String(r.weekNum),this.userForm=r,this.userModalVisible=!0},enable:function(e){var t=this;this.$Modal.confirm({title:\"确认启用\",content:\"您确认该排班信息吗\",onOk:function(){t.operationLoading=!0,Object(n[\"h\"])(e.id).then(function(e){t.operationLoading=!1,!0===e.success&&(t.$Message.success(\"操作成功\"),t.getUserList())})}})},disable:function(e){var t=this;this.$Modal.confirm({title:\"确认禁用\",content:\"您确认要禁用该排班信息吗\",onOk:function(){t.operationLoading=!0,Object(n[\"e\"])(e.id).then(function(e){t.operationLoading=!1,!0===e.success&&(t.$Message.success(\"操作成功\"),t.getUserList())})}})},remove:function(e){var t=this;this.$Modal.confirm({title:\"确认删除\",content:\"您确认要删除该排班信息吗？\",onOk:function(){t.operationLoading=!0,Object(n[\"d\"])(e.id).then(function(e){t.operationLoading=!1,!0===e.success&&(t.$Message.success(\"删除成功\"),t.getUserList())})}})},show:function(e){var t=this;this.timeLine=!0,this.showEstate=e.estateCodes.toString(),Object(n[\"j\"])({code:this.showEstate}).then(function(a){t.loading=!1,!0===a.success&&(a.result.forEach(function(t,a){t.time=e.arriveTimesSlot.split(\",\")[a]}),t.estateInfo=a.result)})},dropDown:function(){this.drop?(this.dropDownContent=\"展开\",this.dropDownIcon=\"ios-arrow-down\"):(this.dropDownContent=\"收起\",this.dropDownIcon=\"ios-arrow-up\"),this.drop=!this.drop},showSelect:function(e){this.exportData=e,this.selectList=e,this.selectCount=e.length},clearSelectAll:function(){this.$refs.table.selectAll(!1)},delAll:function(){var e=this;this.selectCount<=0?this.$Message.warning(\"您还未选择要删除的数据\"):this.$Modal.confirm({title:\"确认删除\",content:\"您确认要删除所选的 \"+this.selectCount+\" 条数据?\",onOk:function(){var t=\"\";e.selectList.forEach(function(e){t+=e.id+\",\"}),t=t.substring(0,t.length-1),e.operationLoading=!0,Object(n[\"d\"])(t).then(function(t){e.operationLoading=!1,!0===t.success&&(e.$Message.success(\"删除成功\"),e.clearSelectAll(),e.getUserList())})}})},addWeek:function(e){void 0!==e&&(this.userForm.week=e.label,this.userForm.weekNum=e.value)}},mounted:function(){this.init(),this.getRoleList()}},p=h,f=(a(\"a150\"),a(\"56c6\"),a(\"2877\")),g=Object(f[\"a\"])(p,r,s,!1,null,\"53f66dff\",null);t[\"default\"]=g.exports},\"6d71\":function(e,t,a){\"use strict\";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",[a(\"Row\",{staticClass:\"expand-row\"},[a(\"Col\",{attrs:{span:\"5\"}},[a(\"span\",[e._v(\"更新者: \")]),a(\"span\",[e._v(e._s(e.row.updateBy))])]),a(\"Col\",{attrs:{span:\"6\"}},[a(\"span\",[e._v(\"创建者: \")]),a(\"span\",[e._v(e._s(e.row.createBy))])]),a(\"Col\",{attrs:{span:\"6\"}},[a(\"span\",[e._v(\"编号: \")]),a(\"span\",[e._v(e._s(e.row.id))])])],1)],1)},s=[],n={name:\"expandRow\",props:{row:Object}},i=n,o=(a(\"f1fa\"),a(\"2877\")),l=Object(o[\"a\"])(i,r,s,!1,null,\"7a491eb7\",null);t[\"default\"]=l.exports},7998:function(e,t,a){\"use strict\";a.d(t,\"n\",function(){return s}),a.d(t,\"l\",function(){return n}),a.d(t,\"b\",function(){return i}),a.d(t,\"h\",function(){return o}),a.d(t,\"e\",function(){return l}),a.d(t,\"g\",function(){return c}),a.d(t,\"d\",function(){return u}),a.d(t,\"m\",function(){return d}),a.d(t,\"o\",function(){return m}),a.d(t,\"c\",function(){return h}),a.d(t,\"f\",function(){return p}),a.d(t,\"a\",function(){return f}),a.d(t,\"k\",function(){return g}),a.d(t,\"j\",function(){return v}),a.d(t,\"i\",function(){return b});var r=a(\"7f80\"),s=function(e){return Object(r[\"b\"])(\"/estateSchedule/findScheduleList\",e)},n=function(e){return Object(r[\"b\"])(\"/estateInfo/getAllCodesAndName\",e)},i=function(e){return Object(r[\"c\"])(\"/estateSchedule/save\",e)},o=function(e,t){return Object(r[\"c\"])(\"/estateSchedule/enableSchedule/\".concat(e),t)},l=function(e,t){return Object(r[\"c\"])(\"/estateSchedule/disableSchedule/\".concat(e),t)},c=function(e){return Object(r[\"d\"])(\"/estateSchedule/update\",e)},u=function(e,t){return Object(r[\"a\"])(\"/estateSchedule/removeByIds/\".concat(e),t)},d=function(e){return Object(r[\"b\"])(\"/estateInfo/getByCondition\",e)},m=function(e){return Object(r[\"b\"])(\"/estateInfo/getByCode\",e)},h=function(e,t){return Object(r[\"a\"])(\"/estateInfo/removeByIds/\".concat(e),t)},p=function(e){return Object(r[\"d\"])(\"/estateInfo/update\",e)},f=function(e){return Object(r[\"c\"])(\"/estateInfo/save\",e)},g=function(e){return Object(r[\"b\"])(\"/estateSchedule/findByCodeTwo\",e)},v=function(e){return Object(r[\"b\"])(\"/estateInfo/selectByCodes\",e)},b=function(e){return Object(r[\"b\"])(\"/estateSchedule/findByCodes/\".concat(e))}},\"923e\":function(e,t,a){},\"95d1\":function(e,t,a){},\"9d93\":function(e,t,a){},a150:function(e,t,a){\"use strict\";var r=a(\"923e\"),s=a.n(r);s.a},ab57:function(e,t,a){},dd85:function(e,t,a){\"use strict\";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",[a(\"Poptip\",{attrs:{trigger:\"click\",placement:\"right\",title:\"选择部门\",width:\"250\"}},[a(\"div\",{staticStyle:{display:\"flex\"}},[a(\"Input\",{staticStyle:{\"margin-right\":\"10px\"},style:{width:e.width},attrs:{readonly:\"\",placeholder:e.placeholder},model:{value:e.departmentTitle,callback:function(t){e.departmentTitle=t},expression:\"departmentTitle\"}}),a(\"Button\",{attrs:{icon:\"md-trash\"},on:{click:e.clearSelect}},[e._v(\"清空已选\")])],1),a(\"div\",{staticClass:\"tree-bar\",attrs:{slot:\"content\"},slot:\"content\"},[a(\"Input\",{attrs:{suffix:\"ios-search\",placeholder:\"输入部门名搜索\",clearable:\"\"},on:{\"on-change\":e.searchDep},model:{value:e.searchKey,callback:function(t){e.searchKey=t},expression:\"searchKey\"}}),a(\"Tree\",{attrs:{data:e.dataDep,\"load-data\":e.loadData,multiple:e.multiple},on:{\"on-select-change\":e.selectTree}}),e.depLoading?a(\"Spin\",{attrs:{size:\"large\",fix:\"\"}}):e._e()],1)])],1)},s=[],n=a(\"365c\"),i={name:\"departmentTreeChoose\",props:{multiple:{type:Boolean,default:!1},width:{type:String,default:\"200px\"},placeholder:{type:String,default:\"点击选择部门\"}},data:function(){return{depLoading:!1,departmentTitle:\"\",searchKey:\"\",dataDep:[],selectDep:[],department:[]}},methods:{initDepartmentData:function(){var e=this;Object(n[\"gb\"])().then(function(t){!0===t.success&&(t.result.forEach(function(e){e.isParent&&(e.loading=!1,e.children=[]),-1===e.status&&(e.title=\"[已禁用] \"+e.title,e.disabled=!0)}),e.dataDep=t.result)})},loadData:function(e,t){Object(n[\"hb\"])(e.id).then(function(e){!0===e.success&&(e.result.forEach(function(e){e.isParent&&(e.loading=!1,e.children=[]),-1===e.status&&(e.title=\"[已禁用] \"+e.title,e.disabled=!0)}),t(e.result))})},searchDep:function(){var e=this;this.searchKey?(this.depLoading=!0,Object(n[\"ob\"])({title:this.searchKey}).then(function(t){e.depLoading=!1,t.success&&(t.result.forEach(function(e){-1===e.status&&(e.title=\"[已禁用] \"+e.title,e.disabled=!0)}),e.dataDep=t.result)})):this.initDepartmentData()},selectTree:function(e){var t=[],a=\"\";e.forEach(function(e){t.push(e.id),a=\"\"==a?e.title:a+\"、\"+e.title}),this.departmentId=t,this.departmentTitle=a,this.$emit(\"on-change\",this.departmentId)},clearSelect:function(){this.departmentId=[],this.departmentTitle=\"\",this.initDepartmentData(),this.$emit(\"on-change\",this.departmentId)},setSelectDep:function(e,t){this.departmentId=e,this.departmentTitle=t,this.$emit(\"on-change\",this.departmentId)}},created:function(){this.initDepartmentData()}},o=i,l=(a(\"1dbc\"),a(\"2877\")),c=Object(l[\"a\"])(o,r,s,!1,null,null,null);t[\"default\"]=c.exports},dffa:function(e,t,a){\"use strict\";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",[a(\"Poptip\",{attrs:{trigger:\"hover\",title:\"图片预览\",placement:\"right\",width:\"350\"}},[a(\"Input\",{style:{width:e.width},attrs:{placeholder:\"可直接填入网络图片链接\",clearable:\"\"},on:{\"on-change\":e.handleChange},model:{value:e.picUrl,callback:function(t){e.picUrl=t},expression:\"picUrl\"}}),a(\"div\",{attrs:{slot:\"content\"},slot:\"content\"},[a(\"img\",{staticStyle:{width:\"100%\",margin:\"0 auto\",display:\"block\"},attrs:{src:e.picUrl,alt:\"暂无图片链接\"}}),a(\"a\",{staticStyle:{\"margin-top\":\"5px\",\"text-align\":\"right\",display:\"block\"},on:{click:function(t){e.viewImage=!0}}},[e._v(\"查看大图\")])])],1),a(\"Upload\",{ref:\"up\",staticClass:\"upload\",attrs:{action:e.uploadFileUrl,headers:e.accessToken,\"on-success\":e.handleSuccess,\"on-error\":e.handleError,format:[\"jpg\",\"jpeg\",\"png\",\"gif\",\"bmp\"],accept:\".jpg, .jpeg, .png, .gif, .bmp\",\"max-size\":5120,\"on-format-error\":e.handleFormatError,\"on-exceeded-size\":e.handleMaxSize,\"before-upload\":e.beforeUpload,\"show-upload-list\":!1}},[a(\"Button\",{attrs:{loading:e.loading,icon:\"ios-cloud-upload-outline\"}},[e._v(\"上传图片\")])],1),a(\"Modal\",{attrs:{title:\"图片预览\",styles:{top:\"30px\"},draggable:\"\"},model:{value:e.viewImage,callback:function(t){e.viewImage=t},expression:\"viewImage\"}},[a(\"img\",{staticStyle:{width:\"100%\",margin:\"0 auto\",display:\"block\"},attrs:{src:e.picUrl,alt:\"暂无图片链接\"}}),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"},[a(\"Button\",{on:{click:function(t){e.viewImage=!1}}},[e._v(\"关闭\")])],1)])],1)},s=[],n=a(\"365c\"),i={name:\"uploadPicInput\",props:{width:{type:String,default:\"200px\"}},data:function(){return{accessToken:{},picUrl:\"\",loading:!1,viewImage:!1,uploadFileUrl:n[\"tb\"]}},methods:{init:function(){this.accessToken={accessToken:this.getStore(\"accessToken\")}},handleFormatError:function(e){this.loading=!1,this.$Notice.warning({title:\"不支持的文件格式\",desc:\"所选文件‘ \"+e.name+\" ’格式不正确, 请选择 .jpg .jpeg .png .gif .bmp格式文件\"})},handleMaxSize:function(e){this.loading=!1,this.$Notice.warning({title:\"文件大小过大\",desc:\"所选文件‘ \"+e.name+\" ’大小过大, 不得超过 5M.\"})},beforeUpload:function(){return this.loading=!0,!0},handleSuccess:function(e,t){this.loading=!1,!0===e.success?(t.url=e.result,this.picUrl=e.result,this.$emit(\"on-change\",this.picUrl)):this.$Message.error(e.message)},handleError:function(e,t,a){this.loading=!1,this.$Message.error(t.message)},handleChange:function(e){this.$emit(\"on-change\",this.picUrl)},setPicUrl:function(e){this.picUrl=e,this.$emit(\"on-change\",this.picUrl)}},created:function(){this.init()}},o=i,l=(a(\"f57e\"),a(\"2877\")),c=Object(l[\"a\"])(o,r,s,!1,null,null,null);t[\"default\"]=c.exports},f1fa:function(e,t,a){\"use strict\";var r=a(\"1909\"),s=a.n(r);s.a},f57e:function(e,t,a){\"use strict\";var r=a(\"1b13\"),s=a.n(r);s.a}}]);","extractedComments":[]}