{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-2d0bfed8\"],{4039:function(t,o,n){\"use strict\";n.r(o);var e=function(){var t=this,o=t.$createElement,n=t._self._c||o;return n(\"Row\",[n(\"Card\",[n(\"Col\",[n(\"Row\",[n(\"Col\",[n(\"Button\",{staticStyle:{\"margin-bottom\":\"30px\"},attrs:{type:\"primary\",icon:\"ios-arrow-back\"},on:{click:t.back}},[t._v(\"返回\")])],1)],1),n(\"Row\",[n(\"Form\",{staticClass:\"search-form\",attrs:{\"label-width\":70},model:{value:t.contentForm,callback:function(o){t.contentForm=o},expression:\"contentForm\"}},[n(\"Row\",[n(\"Col\",[n(\"Form-item\",{attrs:{label:\"标题\"}},[n(\"Input\",{staticStyle:{width:\"200px\"},attrs:{type:\"text\",clearable:\"\",placeholder:\"请输入文章标题\"},model:{value:t.contentForm.title,callback:function(o){t.$set(t.contentForm,\"title\",o)},expression:\"contentForm.title\"}})],1)],1)],1),n(\"Row\",[n(\"Col\",[n(\"Form-item\",{attrs:{label:\"作者\"}},[n(\"Input\",{staticStyle:{width:\"200px\"},attrs:{type:\"text\",clearable:\"\",placeholder:\"请输入作者\"},model:{value:t.contentForm.author,callback:function(o){t.$set(t.contentForm,\"author\",o)},expression:\"contentForm.author\"}})],1)],1)],1),n(\"Row\",[n(\"Col\",[n(\"Form-item\",{attrs:{label:\"内容类别\"}},[n(\"Select\",{staticStyle:{width:\"200px\"},attrs:{placeholder:\"请选择\",clearable:\"\"},model:{value:t.contentForm.contentType,callback:function(o){t.$set(t.contentForm,\"contentType\",o)},expression:\"contentForm.contentType\"}},t._l(t.dictContentType,function(o,e){return n(\"Option\",{key:e,attrs:{value:Number(o.value)}},[t._v(t._s(o.title))])}),1)],1)],1)],1),n(\"Row\",[n(\"Col\",[n(\"Form-item\",[n(\"Checkbox\",{model:{value:t.contentForm.isPublication,callback:function(o){t.$set(t.contentForm,\"isPublication\",o)},expression:\"contentForm.isPublication\"}},[t._v(\"立即发布\")])],1),n(\"Form-item\",{attrs:{prop:\"isTop\"}},[n(\"Checkbox\",{model:{value:t.contentForm.isTop,callback:function(o){t.$set(t.contentForm,\"isTop\",o)},expression:\"contentForm.isTop\"}},[t._v(\"置顶内容\")])],1)],1)],1),n(\"Row\",[n(\"Col\",[n(\"Form-item\",{attrs:{label:\"封面图\",prop:\"introductionImg\"}},[n(\"upload-pic-input\",{ref:\"upload\",attrs:{width:\"285px\"},on:{\"on-change\":t.handleUpload}})],1)],1)],1),n(\"Row\",[n(\"Col\",[n(\"Form-item\",{attrs:{label:\"摘要\"}},[n(\"Input\",{attrs:{type:\"textarea\",rows:4,placeholder:\"请输入文章摘要\"},model:{value:t.contentForm.seoDescription,callback:function(o){t.$set(t.contentForm,\"seoDescription\",o)},expression:\"contentForm.seoDescription\"}})],1)],1)],1),n(\"Row\",[n(\"Col\",[n(\"Form-item\",{attrs:{label:\"正文\"}},[n(\"vue-ueditor-wrap\",{staticStyle:{\"z-index\":\"0\"},attrs:{config:t.myConfig},model:{value:t.contentForm.content,callback:function(o){t.$set(t.contentForm,\"content\",o)},expression:\"contentForm.content\"}})],1)],1)],1)],1)],1),n(\"Row\",{attrs:{type:\"flex\",justify:\"center\"}},[n(\"Col\",[n(\"Button\",{attrs:{type:\"primary\",loading:t.submitLoading},on:{click:t.updateContentInfo}},[t._v(\"更新\")])],1)],1)],1)],1)],1)},i=[],c=n(\"89a9\"),a=n(\"365c\"),r=n(\"6625\"),s=n.n(r),l=n(\"dffa\"),u=\"/rcms-prod-api\",m=\"/rcms-pc-web/\",p={name:\"editContent\",components:{VueUeditorWrap:s.a,uploadPicInput:l[\"default\"]},data:function(){return{submitLoading:!1,contentForm:{title:\"\",author:\"\",isPublication:\"\",isTop:\"\",seoDescription:\"\",content:\"\",contentType:\"\",introductionImg:\"\"},newContentForm:{title:\"\",author:\"\",isPublication:\"\",isTop:\"\",seoDescription:\"\",content:\"\",contentType:\"\"},dictContentType:[],myConfig:{serverUrl:u+\"/content/uploadToQiniu\",UEDITOR_HOME_URL:m+\"ueditor/\",autoHeightEnabled:!1,autoFloatEnabled:!1,initialFrameHeight:450,initialFrameWidth:\"100%\",enableAutoSave:!0}}},methods:{handleUpload:function(t){this.contentForm.introductionImg=t},init:function(){this.fetchData(),this.getDictContenTypeData()},fetchData:function(){var t=this;Object(c[\"d\"])(this.$route.params.id).then(function(o){o.success&&(t.contentForm=o.result,1==t.contentForm.isPublication?t.contentForm.isPublication=!0:t.contentForm.isPublication=!1,1==t.contentForm.isTop?t.contentForm.isTop=!0:t.contentForm.isTop=!1,t.$refs.upload.setPicUrl(t.contentForm.introductionImg))})},getDictContenTypeData:function(){var t=this;Object(a[\"S\"])(\"contentType\").then(function(o){o.success&&(t.dictContentType=o.result)})},back:function(){window.history.back()},updateContentInfo:function(){var t=this,o=JSON.stringify(this.contentForm),n=JSON.parse(o);this.contentForm.isPublication?n.isPublication=1:n.isPublication=0,this.contentForm.isTop?n.isTop=1:n.isTop=0,Object(c[\"b\"])(n).then(function(o){t.submitLoading=!1,o.success&&(t.$Message.success(\"修改成功\"),t.$router.push({name:\"contentManage\"}))})}},watch:{\"$route.name\":function(t,o){\"contentManage\"===o&&\"editContent\"===t&&(this.init(),console.log(\"wat\"))}},mounted:function(){this.init(),console.log(\"mou\")}},d=p,b=n(\"2877\"),F=Object(b[\"a\"])(d,e,i,!1,null,\"4127bc0b\",null);o[\"default\"]=F.exports}}]);","extractedComments":[]}