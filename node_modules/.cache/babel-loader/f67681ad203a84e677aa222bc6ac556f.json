{"remainingRequest":"F:\\gitProject\\rcms_src\\rcms-pc-web\\node_modules\\babel-loader\\lib\\index.js!F:\\gitProject\\rcms_src\\rcms-pc-web\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!F:\\gitProject\\rcms_src\\rcms-pc-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\gitProject\\rcms_src\\rcms-pc-web\\src\\views\\login\\login.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\gitProject\\rcms_src\\rcms-pc-web\\src\\views\\login\\login.vue","mtime":1564969187221},{"path":"F:\\gitProject\\rcms_src\\rcms-pc-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\gitProject\\rcms_src\\rcms-pc-web\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"F:\\gitProject\\rcms_src\\rcms-pc-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\gitProject\\rcms_src\\rcms-pc-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _jsCookie = _interopRequireDefault(require(\"js-cookie\"));\n\nvar _index = require(\"@/api/index\");\n\nvar _util = _interopRequireDefault(require(\"@/libs/util.js\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nvar _default = {\n  data: function data() {\n    return {\n      error: false,\n      errorMsg: \"\",\n      tabName: \"username\",\n      saveLogin: true,\n      loading: false,\n      sending: false,\n      sended: false,\n      count: 60,\n      countButton: \"60 s\",\n      maxLength: 6,\n      errorCode: \"\",\n      form: {\n        username: \"user\",\n        password: \"123456\"\n      },\n      rules: {\n        username: [{\n          required: true,\n          message: \"账号不能为空\",\n          trigger: \"blur\"\n        }],\n        password: [{\n          required: true,\n          message: \"密码不能为空\",\n          trigger: \"blur\"\n        }]\n      }\n    };\n  },\n  methods: {\n    showErrorMsg: function showErrorMsg(msg) {\n      this.error = true;\n      this.errorMsg = msg;\n    },\n    countDown: function countDown() {\n      var that = this;\n\n      if (this.count === 0) {\n        this.sended = false;\n        this.count = 60;\n        return;\n      } else {\n        this.countButton = this.count + \" s\";\n        this.count--;\n      }\n\n      setTimeout(function () {\n        that.countDown();\n      }, 1000);\n    },\n    submitLogin: function submitLogin() {\n      var _this = this;\n\n      if (this.tabName === \"username\") {\n        this.$refs.usernameLoginForm.validate(function (valid) {\n          if (valid) {\n            _this.loading = true;\n            (0, _index.login)({\n              username: _this.form.username,\n              password: _this.form.password,\n              saveLogin: _this.saveLogin\n            }).then(function (res) {\n              if (res.success === true) {\n                _this.setStore(\"accessToken\", res.result); // 获取用户信息\n\n\n                (0, _index.userInfo)().then(function (res) {\n                  if (res.success === true) {\n                    // 避免超过大小限制\n                    delete res.result.permissions;\n                    var roles = [];\n                    res.result.roles.forEach(function (e) {\n                      roles.push(e.name);\n                    });\n\n                    _this.setStore(\"roles\", roles);\n\n                    if (_this.saveLogin) {\n                      // 保存7天\n                      _jsCookie.default.set(\"userInfo\", JSON.stringify(res.result), {\n                        expires: 7\n                      });\n                    } else {\n                      _jsCookie.default.set(\"userInfo\", JSON.stringify(res.result));\n                    }\n\n                    _this.setStore(\"userInfo\", res.result);\n\n                    _this.$store.commit(\"setAvatarPath\", res.result.avatar); // 加载菜单\n\n\n                    _util.default.initRouter(_this);\n\n                    _this.$router.push({\n                      name: \"home_index\"\n                    });\n                  } else {\n                    _this.loading = false;\n                  }\n                });\n              } else {\n                _this.loading = false;\n              }\n            });\n          }\n        });\n      }\n    },\n    relatedLogin: function relatedLogin() {},\n    handleDropDown: function handleDropDown(v) {}\n  },\n  mounted: function mounted() {}\n};\nexports.default = _default;",{"version":3,"sources":["login.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <Row type=\"flex\" justify=\"center\" align=\"middle\" class=\"login\" @keydown.enter.native=\"submitLogin\">\r\n   <div class=\"login-con\">\r\n    <Card icon=\"log-in\" title=\"欢迎登录\" :bordered=\"false\">\r\n      <Alert type=\"error\" show-icon v-if=\"error\">{{errorMsg}}</Alert>\r\n      <Row class=\"login-form\">\r\n          <Form ref=\"usernameLoginForm\" :model=\"form\" :rules=\"rules\" class=\"form\">\r\n            <FormItem prop=\"username\">\r\n              <Input v-model=\"form.username\" prefix=\"ios-contact\" size=\"large\" clearable placeholder=\"请输入用户名\" autocomplete=\"off\" />\r\n            </FormItem>\r\n            <FormItem prop=\"password\">\r\n              <Input type=\"password\" v-model=\"form.password\" prefix=\"ios-lock\" size=\"large\" clearable placeholder=\"请输入密码\" autocomplete=\"off\" />\r\n            </FormItem>\r\n          </Form>\r\n          <Row type=\"flex\" justify=\"space-between\" class=\"code-row-bg\">\r\n            <Checkbox v-model=\"saveLogin\" size=\"large\">自动登录</Checkbox>\r\n             <!-- <router-link to=\"/regist\"><a class=\"forget-pass\">注册账户</a></router-link> \r\n            <Dropdown trigger=\"click\" @on-click=\"handleDropDown\">\r\n              <a class=\"forget-pass\">\r\n                忘记密码\r\n              </a>\r\n            </Dropdown>\r\n            -->\r\n          </Row>\r\n          <Row>\r\n            <Button class=\"login-btn\" type=\"primary\" size=\"large\" :loading=\"loading\" @click=\"submitLogin\" long>\r\n                <span v-if=\"!loading\">登录</span>\r\n                <span v-else>登录中...</span>\r\n            </Button>\r\n          </Row>\r\n      </Row>\r\n    </Card>\r\n    </div>\r\n  </Row>\r\n</template>\r\n\r\n<script>\r\nimport Cookies from \"js-cookie\";\r\nimport {\r\n  login,\r\n  userInfo,\r\n  githubLogin,\r\n  qqLogin,\r\n  weiboLogin,\r\n  getJWT,\r\n  sendSms,\r\n  smsLogin\r\n} from \"@/api/index\";\r\nimport util from \"@/libs/util.js\";\r\nexport default {\r\n  data() {\r\n     \r\n    return {\r\n      error: false,\r\n      errorMsg: \"\",\r\n      tabName: \"username\",\r\n      saveLogin: true,\r\n      loading: false,\r\n      sending: false,\r\n      sended: false,\r\n      count: 60,\r\n      countButton: \"60 s\",\r\n      maxLength: 6,\r\n      errorCode: \"\",\r\n      form: {\r\n        username: \"user\",\r\n        password: \"123456\",\r\n      },\r\n      rules: {\r\n        username: [\r\n          {\r\n            required: true,\r\n            message: \"账号不能为空\",\r\n            trigger: \"blur\"\r\n          }\r\n        ],\r\n        password: [\r\n          {\r\n            required: true,\r\n            message: \"密码不能为空\",\r\n            trigger: \"blur\"\r\n          }\r\n        ],\r\n      }\r\n    };\r\n  },\r\n  methods: {\r\n    showErrorMsg(msg) {\r\n      this.error = true;\r\n      this.errorMsg = msg;\r\n    },\r\n \r\n    countDown() {\r\n      let that = this;\r\n      if (this.count === 0) {\r\n        this.sended = false;\r\n        this.count = 60;\r\n        return;\r\n      } else {\r\n        this.countButton = this.count + \" s\";\r\n        this.count--;\r\n      }\r\n      setTimeout(function() {\r\n        that.countDown();\r\n      }, 1000);\r\n    },\r\n    submitLogin() {\r\n      if (this.tabName === \"username\") {\r\n        this.$refs.usernameLoginForm.validate(valid => {\r\n          if (valid) {\r\n            this.loading = true;\r\n            login({\r\n              username: this.form.username,\r\n              password: this.form.password,\r\n              saveLogin: this.saveLogin\r\n            }).then(res => {\r\n              if (res.success === true) {\r\n                this.setStore(\"accessToken\", res.result);\r\n                // 获取用户信息\r\n                userInfo().then(res => {\r\n                  if (res.success === true) {\r\n                    // 避免超过大小限制\r\n                    delete res.result.permissions;\r\n                    let roles = [];\r\n                    res.result.roles.forEach(e => {\r\n                      roles.push(e.name);\r\n                    });\r\n                    this.setStore(\"roles\", roles);\r\n                    if (this.saveLogin) {\r\n                      // 保存7天\r\n                      Cookies.set(\"userInfo\", JSON.stringify(res.result), {\r\n                        expires: 7\r\n                      });\r\n                    } else {\r\n                      Cookies.set(\"userInfo\", JSON.stringify(res.result));\r\n                    }\r\n                    this.setStore(\"userInfo\", res.result);\r\n                    this.$store.commit(\"setAvatarPath\", res.result.avatar);\r\n                    // 加载菜单\r\n                    util.initRouter(this);\r\n                    this.$router.push({\r\n                      name: \"home_index\"\r\n                    });\r\n                  } else {\r\n                    this.loading = false;\r\n                  }\r\n                });\r\n              } else {\r\n                this.loading = false;\r\n              }\r\n            });\r\n          }\r\n        });\r\n      } \r\n    },\r\n    relatedLogin() {\r\n      \r\n    },\r\n    handleDropDown(v) {\r\n      \r\n    },\r\n  },\r\n  mounted() {\r\n   \r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\">\r\n@import \"./login.less\";\r\n</style>\r\n"],"sourceRoot":"src/views/login"}]}