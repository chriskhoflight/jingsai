{"remainingRequest":"D:\\jingsai\\rcms_src\\rcms-pc-web\\node_modules\\thread-loader\\dist\\cjs.js!D:\\jingsai\\rcms_src\\rcms-pc-web\\node_modules\\babel-loader\\lib\\index.js!D:\\jingsai\\rcms_src\\rcms-pc-web\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\jingsai\\rcms_src\\rcms-pc-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\jingsai\\rcms_src\\rcms-pc-web\\src\\views\\lsbusiness\\publish\\editContent.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\jingsai\\rcms_src\\rcms-pc-web\\src\\views\\lsbusiness\\publish\\editContent.vue","mtime":1582290534196},{"path":"D:\\jingsai\\rcms_src\\rcms-pc-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\jingsai\\rcms_src\\rcms-pc-web\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\jingsai\\rcms_src\\rcms-pc-web\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\jingsai\\rcms_src\\rcms-pc-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\jingsai\\rcms_src\\rcms-pc-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { getContentTypeListData, editContent, getWechatContent } from \"@/api/publishContent\";\nimport { getDictDataByType } from \"@/api/index\";\nimport VueUeditorWrap from \"vue-ueditor-wrap\";\nimport uploadPicInput from \"@/views/components/custom/upload-pic-input\";\nvar base = process.env.VUE_APP_BASE_API;\nvar URL = process.env.NODE_ENV === \"production\" ? \"/rcms-pc-web/\" : \"/\";\nexport default {\n  name: \"editContent\",\n  components: {\n    VueUeditorWrap: VueUeditorWrap,\n    uploadPicInput: uploadPicInput\n  },\n  data: function data() {\n    return {\n      submitLoading: false,\n      // 内容表单\n      contentForm: {\n        title: \"\",\n        author: \"\",\n        isPublication: \"\",\n        isTop: \"\",\n        seoDescription: \"\",\n        content: \"\",\n        contentType: \"\",\n        introductionImg: \"\"\n      },\n      newContentForm: {\n        title: \"\",\n        author: \"\",\n        isPublication: \"\",\n        isTop: \"\",\n        seoDescription: \"\",\n        content: \"\",\n        contentType: \"\"\n      },\n      // 发布内容类别\n      dictContentType: [],\n      // 以下为编辑器data//////////////\n      myConfig: {\n        //   如果需要上传功能,找后端小伙伴要服务器接口地址\n        serverUrl: base + \"/content/uploadToQiniu\",\n        // UEDITOR_HOME_URL设置加载/ueditor/ueditor.config.js配置文件\n        // UEDITOR_HOME_URL: \"/rcms-pc-web/ueditor/\",//pro\n        // UEDITOR_HOME_URL: \"/ueditor/\", //dev\n        UEDITOR_HOME_URL: URL + \"ueditor/\",\n        // 编辑器不自动被内容撑高\n        autoHeightEnabled: false,\n        // 工具栏是否可以浮动\n        autoFloatEnabled: false,\n        // 初始容器高度\n        initialFrameHeight: 450,\n        // 初始容器宽度\n        initialFrameWidth: \"100%\",\n        // 启动自动保存\n        enableAutoSave: true // 以上为编辑器data/////////\n\n      }\n    };\n  },\n  methods: {\n    handleUpload: function handleUpload(v) {\n      this.contentForm.introductionImg = v;\n    },\n    init: function init() {\n      this.fetchData();\n      this.getDictContenTypeData();\n    },\n    fetchData: function fetchData() {\n      var _this = this;\n\n      getWechatContent(this.$route.params.id).then(function (res) {\n        if (res.success) {\n          _this.contentForm = res.result;\n\n          if (_this.contentForm.isPublication == 1) {\n            _this.contentForm.isPublication = true;\n          } else {\n            _this.contentForm.isPublication = false;\n          }\n\n          if (_this.contentForm.isTop == 1) {\n            _this.contentForm.isTop = true;\n          } else {\n            _this.contentForm.isTop = false;\n          }\n\n          _this.$refs.upload.setPicUrl(_this.contentForm.introductionImg);\n        }\n      });\n    },\n    // 获取发布内容类别字典数据\n    getDictContenTypeData: function getDictContenTypeData() {\n      var _this2 = this;\n\n      getDictDataByType(\"contentType\").then(function (res) {\n        if (res.success) {\n          _this2.dictContentType = res.result;\n        }\n      });\n    },\n    back: function back() {\n      window.history.back();\n    },\n    updateContentInfo: function updateContentInfo() {\n      var _this3 = this;\n\n      // let this.newContentForm.isPublication = Number(this.contentForm.isPublication);\n      var con = JSON.stringify(this.contentForm);\n      var conObj = JSON.parse(con);\n\n      if (this.contentForm.isPublication) {\n        conObj.isPublication = 1;\n      } else {\n        conObj.isPublication = 0;\n      }\n\n      if (this.contentForm.isTop) {\n        conObj.isTop = 1;\n      } else {\n        conObj.isTop = 0;\n      }\n\n      editContent(conObj).then(function (res) {\n        _this3.submitLoading = false;\n\n        if (res.success) {\n          _this3.$Message.success(\"修改成功\");\n\n          _this3.$router.push({\n            name: \"contentManage\"\n          });\n        }\n      });\n    }\n  },\n  watch: {\n    // 如果路由有变化，会再次执行该方法\n    // $route: \"init\"\n    \"$route.name\": function $routeName(toC, fromC) {\n      if (fromC === \"contentManage\" && toC === \"editContent\") {\n        this.init();\n        console.log(\"wat\");\n      }\n    }\n  },\n  mounted: function mounted() {\n    this.init();\n    console.log(\"mou\");\n  }\n};",null]}