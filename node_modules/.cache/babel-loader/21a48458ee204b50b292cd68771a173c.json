{"remainingRequest":"D:\\jingsai\\rcms_src\\rcms-pc-web\\node_modules\\thread-loader\\dist\\cjs.js!D:\\jingsai\\rcms_src\\rcms-pc-web\\node_modules\\babel-loader\\lib\\index.js!D:\\jingsai\\rcms_src\\rcms-pc-web\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\jingsai\\rcms_src\\rcms-pc-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\jingsai\\rcms_src\\rcms-pc-web\\src\\views\\lsbusiness\\publish\\contentManage.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\jingsai\\rcms_src\\rcms-pc-web\\src\\views\\lsbusiness\\publish\\contentManage.vue","mtime":1565936236042},{"path":"D:\\jingsai\\rcms_src\\rcms-pc-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\jingsai\\rcms_src\\rcms-pc-web\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\jingsai\\rcms_src\\rcms-pc-web\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\jingsai\\rcms_src\\rcms-pc-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\jingsai\\rcms_src\\rcms-pc-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { getWechatContentList, // 批量删除\ndeleteContent } from \"@/api/publishContent\";\nimport { getDictDataByType } from \"@/api/index\"; // import expandRow from \"./expand.vue\";\n\nimport \"./see\";\nimport Publish from \"./publish.vue\"; // 动态路由\n\nimport { otherRouter } from \"@/router/router\";\nexport default {\n  name: \"contentManage\",\n  components: {// expandRow,\n  },\n  data: function data() {\n    var _this = this;\n\n    return {\n      // 返回内容列表重载数据\n      // 表格数据加载中\n      loading: true,\n      // 折叠搜索表单\n      drop: false,\n      dropDownContent: \"展开\",\n      dropDownIcon: \"ios-arrow-down\",\n      selectCount: 0,\n      // 保存表格中复选框被选中的记录\n      selectList: [],\n      // 搜索表单\n      searchForm: {\n        //WechatContetn\n        title: \"\",\n        author: \"\",\n        isPublicatin: \"\",\n        isTop: \"\",\n        seoDescription: \"\",\n        seoKeywords: \"\",\n        seoTitle: \"\",\n        introductionImg: \"\",\n        content: \"\",\n        url: \"\",\n        contentType: \"\",\n        // PageVO\n        pageNumber: 1,\n        pageSize: 10,\n        sort: \"createTime\",\n        order: \"desc\",\n        // searchVO=selectDate\n        startDate: \"\",\n        endDate: \"\"\n      },\n      selectDate: null,\n      submitLoading: false,\n      // 内容表格\n      columns: [{\n        type: \"selection\",\n        width: 60,\n        align: \"center\",\n        fixed: \"left\"\n      }, {\n        title: \"序号\",\n        type: \"index\",\n        width: 70,\n        align: \"center\",\n        fixed: \"left\"\n      }, {\n        title: \"标题\",\n        key: \"title\",\n        minWidth: 100,\n        fixed: \"left\",\n        tooltip: true\n      }, {\n        title: \"作者\",\n        key: \"author\",\n        width: 120,\n        tooltip: true\n      }, {\n        title: \"发布时间\",\n        key: \"createTime\",\n        sortable: true,\n        sortType: \"desc\",\n        width: 150\n      }, {\n        title: \"内容类别\",\n        key: \"contentType\",\n        width: 120,\n        render: function render(h, params) {\n          var re = \"\";\n\n          _this.dictContentType.forEach(function (e) {\n            if (e.value == params.row.contentType) {\n              re = e.title;\n            }\n          });\n\n          return h(\"div\", re);\n        }\n      }, {\n        title: \"已发布\",\n        width: 100,\n        align: \"center\",\n        render: function render(h, params) {\n          var re = \"\";\n\n          if (1 == params.row.isPublication) {\n            re = \"是\";\n          }\n\n          if (0 == params.row.isPublication) {\n            re = \"否\";\n          }\n\n          return h(\"div\", re);\n        }\n      }, {\n        title: \"已置顶\",\n        key: \"isTop\",\n        width: 100,\n        align: \"center\",\n        render: function render(h, params) {\n          var re = \"\";\n\n          if (1 == params.row.isTop) {\n            re = \"是\";\n          }\n\n          if (0 == params.row.isTop) {\n            re = \"否\";\n          }\n\n          return h(\"div\", re);\n        }\n      }, {\n        title: \"操作\",\n        key: \"action\",\n        width: 200,\n        align: \"center\",\n        fixed: \"right\",\n        render: function render(h, params) {\n          return h(\"div\", [h(\"Button\", {\n            props: {\n              type: \"primary\",\n              size: \"small\"\n            },\n            style: {\n              marginRight: \"5px\"\n            },\n            on: {\n              click: function click() {\n                _this.edit(params.row);\n              }\n            }\n          }, \"编辑\"), h(\"Button\", {\n            props: {\n              size: \"small\",\n              type: \"info\"\n            },\n            style: {\n              marginRight: \"5px\"\n            },\n            on: {\n              click: function click() {\n                _this.see(params.row);\n              }\n            }\n          }, \"查看\"), h(\"Button\", {\n            props: {\n              size: \"small\",\n              type: \"error\"\n            },\n            style: {\n              marginRight: \"5px\"\n            },\n            on: {\n              click: function click() {\n                _this.deleteOneContent(params.row);\n              }\n            }\n          }, \"删除\")]);\n        }\n      }],\n      // 保存内容表数据\n      data: [],\n      total: 0,\n      // 内容类别\n      dictContentType: []\n    };\n  },\n  methods: {\n    init: function init() {\n      this.getContentList();\n      this.getDictContentTypeData();\n    },\n    getDictContentTypeData: function getDictContentTypeData() {\n      var _this2 = this;\n\n      // 获取性别字典数据\n      getDictDataByType(\"contentType\").then(function (res) {\n        if (res.success) {\n          _this2.dictContentType = res.result;\n        }\n      });\n    },\n    // 展开按钮用户事件\n    dropDown: function dropDown() {\n      if (this.drop) {\n        this.dropDownContent = \"展开\";\n        this.dropDownIcon = \"ios-arrow-down\";\n      } else {\n        this.dropDownContent = \"收起\";\n        this.dropDownIcon = \"ios-arrow-up\";\n      }\n\n      this.drop = !this.drop;\n    },\n    changePage: function changePage(v) {\n      this.searchForm.pageNumber = v;\n      this.getContentList();\n      this.clearSelectAll();\n    },\n    changePageSize: function changePageSize(v) {\n      this.searchForm.pageSize = v;\n      this.getContentList();\n    },\n    // 选择发布起始时间\n    selectDateRange: function selectDateRange(v) {\n      if (v) {\n        this.searchForm.startDate = v[0];\n        this.searchForm.endDate = v[1];\n      }\n    },\n    // 发送http请求，多条件搜索用户列表\n    getContentList: function getContentList() {\n      var _this3 = this;\n\n      this.loading = true;\n      getWechatContentList(this.searchForm).then(function (res) {\n        _this3.loading = false;\n\n        if (res.success) {\n          _this3.data = res.result.content;\n          _this3.total = res.result.totalElements;\n        }\n      });\n    },\n    // 列表搜索\n    handleSearch: function handleSearch() {\n      this.searchForm.pageNumber = 1;\n      this.searchForm.pageSize = 10;\n      this.getContentList();\n    },\n    handleReset: function handleReset() {\n      this.$refs.searchForm.resetFields();\n      this.searchForm.pageNumber = 1;\n      this.searchForm.pageSize = 10;\n      this.selectDate = null;\n      this.searchForm.startDate = \"\";\n      this.searchForm.endDate = \"\"; // 重新加载数据\n\n      this.getContentList();\n    },\n    changeSort: function changeSort(e) {\n      this.searchForm.sort = e.key;\n      this.searchForm.order = e.order;\n\n      if (e.order === \"normal\") {\n        this.searchForm.order = \"\";\n      }\n\n      this.getContentList();\n    },\n    // 复选框点击事件\n    showSelect: function showSelect(e) {\n      this.selectList = e;\n      this.selectCount = e.length;\n    },\n    clearSelectAll: function clearSelectAll() {\n      this.$refs.table.selectAll(false);\n    },\n    // 批量删除\n    delAll: function delAll() {\n      var _this4 = this;\n\n      if (this.selectCount <= 0) {\n        this.$Message.warning(\"您还未选择要删除的数据\");\n        return;\n      }\n\n      this.$Modal.confirm({\n        title: \"确认删除\",\n        content: \"您确认要删除所选的 \" + this.selectCount + \" 条数据?\",\n        onOk: function onOk() {\n          var ids = \"\";\n\n          _this4.selectList.forEach(function (e) {\n            ids += e.id + \",\";\n          });\n\n          ids = ids.substring(0, ids.length - 1);\n          deleteContent(ids).then(function (res) {\n            if (res.success) {\n              _this4.$Message.success(\"删除成功\");\n\n              _this4.clearSelectAll();\n\n              _this4.getContentList();\n            }\n          });\n        }\n      });\n    },\n    deleteOneContent: function deleteOneContent(e) {\n      var _this5 = this;\n\n      this.$Modal.confirm({\n        title: \"确认删除标题是\\\"\" + e.title + \"\\\"的文章？\",\n        onOk: function onOk() {\n          if (_this5.data.length === 1 && _this5.searchForm.pageNumber >= 2) {\n            _this5.searchForm.pageNumber -= 1;\n          }\n\n          var ids = \"\";\n          ids = e.id;\n          deleteContent(ids).then(function (res) {\n            if (res.success) {\n              _this5.$Message.success(\"删除成功\");\n\n              _this5.clearSelectAll();\n\n              _this5.getContentList();\n            }\n          });\n        }\n      });\n    },\n    add: function add() {\n      this.$router.push({\n        name: \"publishContent\"\n      });\n    },\n    // 跳转到编辑页\n    edit: function edit(v) {\n      this.$router.push({\n        name: \"editContent\",\n        params: {\n          id: v.id\n        }\n      });\n    },\n    // 跳转到查看页\n    see: function see(v) {\n      this.$router.push({\n        name: \"seeContent\",\n        params: {\n          id: v.id\n        }\n      });\n    }\n  },\n  // watch: {\n  //   // 如果路由有变化，会再次执行该方法\n  //   '$route.path'(toC,fromC){\n  //       console.log(\"newVal is :\"+toC)\n  //       if(toC=='seeContent' && fromC=='contentManage'){\n  //           this.init();\n  //           console.log(\"执行\")\n  //       }\n  //   }\n  //     },\n  watch: {\n    \"$route.name\": function $routeName(to, from) {\n      if (to === 'contentManage') {\n        this.init();\n      }\n    }\n  },\n  created: function created() {\n    this.init();\n  }\n};",null]}