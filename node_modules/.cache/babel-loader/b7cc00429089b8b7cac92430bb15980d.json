{"remainingRequest":"D:\\jingsai\\rcms_src\\rcms-pc-web\\node_modules\\babel-loader\\lib\\index.js!D:\\jingsai\\rcms_src\\rcms-pc-web\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\jingsai\\rcms_src\\rcms-pc-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\jingsai\\rcms_src\\rcms-pc-web\\src\\views\\orders\\order-detail-manage\\orderDetail.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\jingsai\\rcms_src\\rcms-pc-web\\src\\views\\orders\\order-detail-manage\\orderDetail.vue","mtime":1568024242635},{"path":"D:\\jingsai\\rcms_src\\rcms-pc-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\jingsai\\rcms_src\\rcms-pc-web\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\jingsai\\rcms_src\\rcms-pc-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\jingsai\\rcms_src\\rcms-pc-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _orders = require(\"@/api/orders\");\n\nvar _fs = require(\"fs\");\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar _default = {\n  data: function data() {\n    var _orderDetail;\n\n    return {\n      //图片url list\n      // urlsList: [],\n      imgModal: false,\n      //查看大图\n      bigImgUrl: null,\n      //大图链接\n      isBigImg: false,\n      isRefuse: null,\n      isCancel: null,\n      isFinish: null,\n      isPay: null,\n      isPayed: null,\n      //在线回收人员\n      RecyclingPersonnel: [],\n      color: \"color\",\n      dispatchForm: {\n        RecyclingPersonnelId: \"\",\n        orderId: \"\",\n        RecyclingPersonnelName: \"\"\n      },\n      // confirmDialog: false, //人工派单确定对话框\n      dispatchModalVisible: false,\n      //人工派单对话框是否显示\n      orderDetailForm: {\n        id: \"\",\n        //主键\n        orderId: \"\" //订单号-\n\n      },\n      //前一个页面传来的数据\n      orderDetail: (_orderDetail = {\n        userRemark: \"\",\n        recyclinRemark: \"\",\n        score: null,\n        //用户评分\n        recScore: null,\n        //回收人员评分\n        comment: \"\",\n        //用户评价\n        recComment: \"\",\n        //回收人员评分\n        estimatedPrice: 0.00,\n        paidPrice: 0.00,\n        additionalCosts: 0.00,\n        destContactsAdderss: \"\",\n        destContactsName: \"\",\n        destContactsPhone: \"\"\n      }, _defineProperty(_orderDetail, \"additionalCosts\", 0), _defineProperty(_orderDetail, \"id\", \"\"), _defineProperty(_orderDetail, \"imgUrls\", \"\"), _defineProperty(_orderDetail, \"appointmentDay\", \"\"), _defineProperty(_orderDetail, \"appointmentStartTime\", \"\"), _defineProperty(_orderDetail, \"appointmentEndTime\", \"\"), _defineProperty(_orderDetail, \"phone\", \"\"), _defineProperty(_orderDetail, \"orderId\", \"\"), _defineProperty(_orderDetail, \"type\", -1), _defineProperty(_orderDetail, \"contactsPhone\", \"\"), _defineProperty(_orderDetail, \"contactsName\", \"\"), _defineProperty(_orderDetail, \"isElevatorRoom\", -1), _defineProperty(_orderDetail, \"contactsFloor\", -1), _defineProperty(_orderDetail, \"contactsAdderss\", \"\"), _defineProperty(_orderDetail, \"name\", \"\"), _defineProperty(_orderDetail, \"status\", -1), _orderDetail),\n      //商品的表格\n      columns: [{\n        title: \"商品名称\",\n        key: \"name\"\n      }, {\n        title: \"商品数量\",\n        key: \"goodsNum\"\n      }, {\n        title: \"预估最小价格(单价)\",\n        key: \"minPrice\"\n      }, {\n        title: \"预估最大价格(单价)\",\n        key: \"maxPrice\"\n      }, {\n        title: \"该类商品预估最小价格\",\n        key: \"goodMinTotalPrice\"\n      }, {\n        title: \"该类商品预估最大价格\",\n        key: \"goodMaxTotalPrice\"\n      }],\n      //在线回收人员的表格\n      RecyclingPersonnelColumns: [{\n        title: \"姓名\",\n        key: \"name\"\n      }, {\n        title: \"手机号码\",\n        key: \"phone\"\n      }, {\n        title: \"地址\",\n        key: \"address\"\n      }],\n      //订单商品的明细\n      OrderGoodsList: []\n    };\n  },\n  computed: {\n    //展示评价\n    isRemark: function isRemark() {\n      if ((this.orderDetail.recyclinRemark = null && this.orderDetail.recyclinRemark != \"\") || this.orderDetail.userRemark != null && this.orderDetail.userRemark != \"\") {\n        return true;\n      } else {\n        return false;\n      }\n    },\n    //type=2  ---> 运输服务\n    isTrac: function isTrac() {\n      if (this.orderDetail.type == 2) {\n        return true;\n      } else {\n        return false;\n      }\n    },\n    urlsList: function urlsList() {\n      return this.orderDetail.imgUrls.split(\";\");\n    },\n    isManualFinish: function isManualFinish() {\n      if (this.orderDetail.status != 5 && this.orderDetail.status != 6) {\n        return true;\n      } else {\n        return false;\n      }\n    },\n    CpType: function CpType() {\n      if (this.orderDetail.type === 0) {\n        return \"可再生回收\";\n      } else if (this.orderDetail.type === 1) {\n        return \"付费回收\";\n      } else if (this.orderDetail.type === 2) {\n        return \"运输服务\";\n      }\n    },\n    // isPay: function() {\n    //   if (this.orderDetail.type === 0) {\n    //     //可再生垃圾回收是回收人员支付钱给用户\n    //     return false;\n    //   } else {\n    //     return true;\n    //   }\n    // },\n    isDispactched: function isDispactched() {\n      if (this.orderDetail.status === 0 || this.orderDetail.status === 1 || this.orderDetail.status === 3) {\n        return true;\n      } else return false;\n    },\n    isElevatorRoom: function isElevatorRoom() {\n      if (this.orderDetail.isElevatorRoom == 0) {\n        return \"是\";\n      } else if (this.orderDetail.isElevatorRoom == 1) {\n        return \"否\";\n      }\n    },\n    status: function status() {\n      if (this.orderDetail.status == 0) {\n        return \"待分配\";\n      } else if (this.orderDetail.status == 1) {\n        return \"系统派单中\";\n      } else if (this.orderDetail.status == 2) {\n        return \"已接单\";\n      } else if (this.orderDetail.status == 3) {\n        return \"拒绝接单\";\n      } else if (this.orderDetail.status == 4) {\n        return \"待支付\";\n      } else if (this.orderDetail.status == 5) {\n        return \"已取消\";\n      } else if (this.orderDetail.status == 6) {\n        return \"已完成\";\n      }\n    },\n    type: function type() {\n      if (this.orderDetail.type == 0) {\n        return \"可再生回收\";\n      } else if (this.orderDetail.type == 1) {\n        return \"付费回收\";\n      } else if (this.orderDetail.type == 2) {\n        return \"运输服务\";\n      }\n    },\n    //订单状态\n    //type=0的话用户是不需要支付的，是回收人员支付钱，故待支付为false\n    //状态：0待分配 1系统已派单,待接单 2已接单 3拒绝接单 4等待用户支付（付费回收才有） 5已取消 6已完成'  7已支付\n    whichSatatus: function whichSatatus() {\n      if (this.orderDetail.status == 0 && this.orderDetail.type == 0) {\n        // console.log(this.orderDetail.status);\n        this.isRefuse = false;\n        this.isCancel = false;\n        this.isPay = false;\n        this.isPayed = false;\n        this.isFinish = true;\n        return 0;\n      } else if (this.orderDetail.status == 0 && !this.orderDetail.type == 0) {\n        // console.log(this.orderDetail.status);\n        this.isRefuse = false;\n        this.isCancel = false;\n        this.isPayed = true;\n        this.isPay = true;\n        this.isFinish = true;\n        return 0;\n      } else if (this.orderDetail.status == 1 && this.orderDetail.type == 0) {\n        // console.log(this.orderDetail.status);\n        this.isRefuse = false;\n        this.isCancel = false;\n        this.isPay = false;\n        this.isPayed = true;\n        this.isFinish = true;\n        return 1;\n      } else if (this.orderDetail.status == 1 && !this.orderDetail.type == 0) {\n        this.isRefuse = false;\n        this.isCancel = false;\n        this.isPay = true;\n        this.isPayed = true;\n        this.isFinish = true;\n        return 1;\n      } else if (this.orderDetail.status == 2 && this.orderDetail.type == 0) {\n        // console.log(this.orderDetail.status);\n        this.isRefuse = false;\n        this.isCancel = false;\n        this.isPay = false;\n        this.isPayed = false;\n        this.isFinish = true;\n        return 2;\n      } else if (this.orderDetail.status == 2 && !this.orderDetail.type == 0) {\n        // console.log(this.orderDetail.status);\n        this.isRefuse = false;\n        this.isCancel = false;\n        this.isPay = true;\n        this.isPayed = true;\n        this.isFinish = true;\n        return 2;\n      } else if (this.orderDetail.status == 3 && this.orderDetail.type == 0) {\n        // console.log(this.orderDetail.status);\n        this.isCancel = false;\n        this.isFinish = true;\n        this.isPay = false;\n        this.isPayed = false;\n        this.isRefuse = true;\n        return 3;\n      } else if (this.orderDetail.status == 3 && !this.orderDetail.type == 0) {\n        // console.log(this.orderDetail.status);\n        this.isCancel = false;\n        this.isFinish = true;\n        this.isPay = false;\n        this.isPayed = false;\n        this.isRefuse = true;\n        return 3;\n      } else if (this.orderDetail.status == 4 && this.orderDetail.type == 0) {\n        //本身就是待支付状态\n        // console.log(this.orderDetail.status);\n        this.isCancel = false;\n        this.isFinish = true;\n        this.isPay = true;\n        this.isPayed = true;\n        this.isRefuse = false;\n        return 3; //因为拒绝接单被隐藏了  所以要显示待支付下标要-1\n      } else if (this.orderDetail.status == 4 && !this.orderDetail.type == 0) {\n        //本身就是待支付状态\n        // console.log(this.orderDetail.status);\n        this.isRefuse = false;\n        this.isPay = true;\n        this.isPayed = true;\n        this.isCancel = false;\n        this.isFinish = true;\n        return 3; //因为拒绝接单被隐藏了  所以要显示待支付下标要-1\n      } else if (this.orderDetail.status == 5 && this.orderDetail.type == 0) {\n        // console.log(this.orderDetail.status);\n        this.isCancel = true;\n        this.isFinish = false;\n        this.isPay = false;\n        this.isPayed = false;\n        this.isRefuse = false;\n        return 3;\n      } else if (this.orderDetail.status == 5 && !this.orderDetail.type == 0) {\n        // console.log(this.orderDetail.status);\n        this.isCancel = true;\n        this.isFinish = false;\n        this.isPay = true;\n        this.isPayed = true;\n        this.isRefuse = false;\n        return 5;\n      } else if (this.orderDetail.status == 6 && this.orderDetail.type == 0) {\n        // console.log(this.orderDetail.status);\n        this.isCancel = false;\n        this.isFinish = true;\n        this.isPay = false;\n        this.isPayed = false;\n        this.isRefuse = false;\n        return 3;\n      } else if (this.orderDetail.status == 6 && !this.orderDetail.type == 0) {\n        // console.log(this.orderDetail.status);\n        this.isRefuse = false;\n        this.isPay = true;\n        this.isPayed = false;\n        this.isCancel = false;\n        this.isFinish = true;\n        return 5; //已支付\n      } else if (this.orderDetail.status == 7) {\n        // console.log(this.orderDetail.status);\n        this.isRefuse = false;\n        this.isPay = true;\n        this.isPayed = true;\n        this.isCancel = false;\n        this.isFinish = true;\n        return 4;\n      }\n    }\n  },\n  methods: {\n    back: function back() {\n      this.$router.go(-1);\n    },\n    watchBigImg: function watchBigImg(v) {\n      this.imgModal = !this.imgModal;\n      this.bigImgUrl = v;\n    },\n    cancelDispactch: function cancelDispactch() {\n      this.dispatchModalVisible = false;\n    },\n    manualFinish: function manualFinish() {\n      var _this = this;\n\n      this.$Modal.confirm({\n        title: \"确认完成\",\n        content: \"确认人工完成订单\" + this.orderDetail.orderId + \"吗？\",\n        onOk: function onOk() {\n          (0, _orders.manualFinishOrder)(_this.orderDetail).then(function (res) {\n            if (res.success === true) {\n              _this.$Message.success(\"订单已完成!\");\n\n              location.reload();\n            } else if (res.success === false) {\n              _this.$Message.error(res.message + \"错误代码:\" + res.code);\n            }\n          });\n        }\n      });\n    },\n    //选择了一个回收人员  赋值给请求参数\n    selectRc: function selectRc(currentRow, oldCurrentRow) {\n      this.dispatchForm.orderId = this.orderDetail.orderId;\n      this.dispatchForm.RecyclingPersonnelId = currentRow.id;\n      this.dispatchForm.RecyclingPersonnelName = currentRow.name;\n    },\n    comfirmDispactch: function comfirmDispactch() {\n      var _this2 = this;\n\n      if (this.dispatchForm.RecyclingPersonnelName != \"\" && this.dispatchForm.RecyclingPersonnelName != null) {\n        this.$Modal.confirm({\n          title: \"确认分配\",\n          content: \"您确认要分配订单给\" + this.dispatchForm.RecyclingPersonnelName + \"?\",\n          onOk: function onOk() {\n            (0, _orders.dispatchOrder)(_this2.dispatchForm).then(function (res) {\n              if (res.success === true) {\n                _this2.dispatchModalVisible = false;\n                location.reload();\n              }\n            });\n            _this2.confirmDialog = true;\n          }\n        });\n      } else {\n        this.$Message.error(\"请选择人员\");\n      }\n    },\n    //发起请求通过订单号获取订单商品明细\n    getOrderDetailMethod: function getOrderDetailMethod() {\n      var _this3 = this;\n\n      this.orderDetailForm.id = this.orderDetail.id;\n      this.orderDetailForm.orderId = this.orderDetail.orderId;\n      (0, _orders.getOrderDetail)(this.orderDetailForm).then(function (res) {\n        if (res.success === true) {\n          if (res.result.orderGoodsList != null) {\n            _this3.OrderGoodsList = res.result.orderGoodsList;\n          }\n\n          _this3.orderDetail = res.result; //传数据渲染\n        }\n      });\n    },\n    // 人工派单的逻辑方法\n    dispatchOrderDialog: function dispatchOrderDialog() {\n      var _this4 = this;\n\n      this.dispatchModalVisible = true; //弹出对话框\n      //发送请求获取所有在线的回收人员\n\n      (0, _orders.getOnlineRp)().then(function (res) {\n        if (res.success === true) {\n          _this4.RecyclingPersonnel = res.result;\n        }\n      });\n    }\n  },\n  //渲染完毕\n  mounted: function mounted() {\n    this.getOrderDetailMethod(); //获取订单详情\n  },\n  //组件加载完毕\n  created: function created() {\n    var data = this.$route.query.orderData; // if (data != null && data != undefined && data.orderId != undefined) {\n    //   this.orderDetail = data;\n    //   this.setStore(\"orderDetail\", JSON.stringify(data));\n    // } else {\n    //   this.orderDetail = JSON.parse(this.getStore(\"orderDetail\") || \"{}\");\n    //   console.log(\"缓存取出orderDetail\");\n    // console.log(this.orderDetail);\n    // }\n\n    if (data != null && data != undefined && data.orderId != undefined) {\n      this.orderDetail = data;\n      this.setStore(\"orderId\", data.orderId);\n      this.setStore(\"id\", data.id);\n    } else {\n      this.orderDetail.id = this.getStore(\"id\");\n      this.orderDetail.orderId = this.getStore(\"orderId\");\n    }\n  }\n};\nexports.default = _default;",{"version":3,"sources":["orderDetail.vue"],"names":[],"mappings":"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","sourcesContent":["<!-- 引入组件库 -->\r\n <script src=\"//unpkg.com/iview@1.0.1/dist/iview.min.js\"></script>\r\n<template>\r\n  <div>\r\n    <br />\r\n    <Row>\r\n      <i-col span=\"30\">\r\n        <Card shadow>\r\n          <span slot=\"title\">\r\n            订单信息\r\n            <span style=\"float:right;width:100px;position:absolute;top: 10px;right: 10px;\">\r\n              <i-button type=\"primary\" @click=\"back\">返回</i-button>\r\n            </span>\r\n          </span>\r\n          <p>订单号：{{orderDetail.orderId}}</p>\r\n          <br />\r\n\r\n          <p>预约时间：{{orderDetail.appointmentDay}} {{orderDetail.appointmentStartTime}}～{{orderDetail.appointmentEndTime}}</p>\r\n          <br />\r\n          <p>订单类型：{{CpType}}</p>\r\n          <br />\r\n            <p  style=\"font-size:20px;font-weight:bold\">\r\n            预估价格(元)：<b style=\"font-size:20px;color:#FF7F00;font-weight:bold\">{{orderDetail.estimatedPrice}} </b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;实收价格(元)：<b style=\"font-size:20px;color:#FF7F00;font-weight:bold\">{{orderDetail.paidPrice}} </b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;附加费用(元)：<b style=\"font-size:20px;color:#FF7F00;font-weight:bold\">{{orderDetail.additionalCosts}}</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n\r\n          </p>\r\n          <br />\r\n          \r\n          <p v-if=\"isTrac\">收货人姓名:{{orderDetail.destContactsName}}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;收货人手机号:{{orderDetail.destContactsPhone}}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;收货人地址:{{orderDetail.destContactsAdderss}}</p>\r\n          <br />\r\n          <span>\r\n            <img\r\n              width=\"100px\"\r\n              height=\"100px\"\r\n              v-for=\"item in urlsList\"\r\n              :src=\"item\"\r\n              @click=\"watchBigImg(item)\"\r\n            />\r\n            <br />\r\n          </span>\r\n          <br />\r\n          <p>\r\n            <Steps :current=\"whichSatatus\">\r\n              <Step title=\"待分配\" content=\"正在等待系统分配\"></Step>\r\n              <Step title=\"系统派单中\" content=\"正在等待系统派单\"></Step>\r\n              <Step title=\"已接单\" content=\"订单已被接单，等待回收人员上门\"></Step>\r\n              <Step status=\"error\" title=\"拒绝接单\" content=\"回收人员拒绝接单\" v-if=\"isRefuse\"></Step>\r\n              <Step title=\"待支付\" content=\"等待用户支付\" v-if=\"isPay\"></Step>\r\n              <Step title=\"已支付\" content=\"用户已完成支付\" v-if=\"isPayed\"></Step>\r\n              <Step status=\"error\" title=\"已取消\" content=\"订单已取消\" v-if=\"isCancel\"></Step>\r\n              <Step title=\"已完成\" content=\"订单已完成\" v-if=\"isFinish\"></Step>\r\n            </Steps>\r\n          </p>\r\n           <br v-if=\"isRemark\"/>\r\n                  <p v-if=\"isRemark\"> \r\n            用户评价：{{orderDetail.comment}} &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  评分：<Rate disabled allow-half v-model=\"orderDetail.score\" />\r\n          </p>\r\n          <br v-if=\"isRemark\"/>\r\n          <p v-if=\"isRemark\"> \r\n            回收人员评价： {{orderDetail.recComment}} &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;评分：<Rate disabled allow-half v-model=\"orderDetail.recScore\" />\r\n          </p>\r\n          <br v-if=\"isRemark\"/>\r\n          <br />\r\n                      <i-button type=\"primary\" @click=\"dispatchOrderDialog\" v-if=\"isDispactched\">人工派单</i-button>&nbsp;&nbsp;&nbsp;\r\n            <i-button type=\"success\" @click=\"this.manualFinish\" v-if=\"isManualFinish\">完成订单</i-button>\r\n        \r\n\r\n        </Card>\r\n      </i-col>\r\n    </Row>\r\n    <br />\r\n    <Row>\r\n      <i-col span=\"30\">\r\n        <Card shadow>\r\n          <p slot=\"title\">下单人信息</p>\r\n          <br />\r\n          <p>姓名：{{orderDetail.contactsName}}</p>\r\n          <br />\r\n          <p>手机号码：{{orderDetail.contactsPhone}}</p>\r\n          <br />\r\n          <p>地址：{{orderDetail.contactsAdderss}}</p>\r\n          <br />\r\n          <p>电梯房：{{isElevatorRoom}} &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 楼层：{{orderDetail.contactsFloor}}</p>\r\n          <p></p>\r\n        </Card>\r\n      </i-col>\r\n    </Row>\r\n    <br />\r\n    <Row>\r\n      <i-col span=\"30\">\r\n        <Card shadow>\r\n          <p slot=\"title\">回收人员信息</p>\r\n          <p>名字：{{orderDetail.name}}</p>\r\n          <br />\r\n          <p>手机号码：{{orderDetail.phone}}</p>\r\n        </Card>\r\n      </i-col>\r\n    </Row>\r\n    <br />\r\n    <Row>\r\n      <p>预估商品总价：{{orderDetail.minPrice}} ~{{orderDetail.maxPrice}}&nbsp;(元)</p>\r\n    </Row>\r\n    <!-- 商品信息 -->\r\n    <span>\r\n      <i-table height=\"400\" :columns=\"columns\" :data=\"OrderGoodsList\"></i-table>\r\n    </span>\r\n    <br />\r\n\r\n    <!-- 弹出对话框 -->\r\n    <Modal title=\"人工派单    (仅限公司员工)\" v-model=\"dispatchModalVisible\" :width=\"800\" :styles=\"{top: '30px'}\">\r\n      <!-- 在线回收人员 -->\r\n      <i-table\r\n        highlight-row\r\n        @on-current-change=\"selectRc\"\r\n        height=\"400\"\r\n        :columns=\"RecyclingPersonnelColumns\"\r\n        :data=\"RecyclingPersonnel\"\r\n      ></i-table>\r\n      <div slot=\"footer\">\r\n        <Button type=\"text\" @click=\"cancelDispactch\">取消</Button>\r\n        <Button type=\"primary\" @click=\"comfirmDispactch\">确定分配</Button>\r\n      </div>\r\n    </Modal>\r\n    <!-- 查看大图 -->\r\n    <Modal v-model=\"imgModal\" :width=\"600\" :styles=\"{top: '30px'}\">\r\n      <div width=\"100%\">\r\n        <img :src=\"bigImgUrl\" @click=\"watchBigImg(null)\" width=\"100%\" height=\"100%\" />\r\n      </div>\r\n    </Modal>\r\n  </div>\r\n</template>\r\n<script>\r\nimport {\r\n  getOrderDetail,\r\n  getOnlineRp,\r\n  dispatchOrder,\r\n  manualFinishOrder\r\n} from \"@/api/orders\";\r\nimport { truncate } from \"fs\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      //图片url list\r\n      // urlsList: [],\r\n      imgModal: false, //查看大图\r\n      bigImgUrl: null, //大图链接\r\n\r\n      isBigImg: false,\r\n      isRefuse: null,\r\n      isCancel: null,\r\n      isFinish: null,\r\n      isPay: null,\r\n      isPayed: null,\r\n      //在线回收人员\r\n      RecyclingPersonnel: [],\r\n      color: \"color\",\r\n      dispatchForm: {\r\n        RecyclingPersonnelId: \"\",\r\n        orderId: \"\",\r\n        RecyclingPersonnelName: \"\"\r\n      },\r\n      // confirmDialog: false, //人工派单确定对话框\r\n\r\n      dispatchModalVisible: false, //人工派单对话框是否显示\r\n\r\n      orderDetailForm: {\r\n        id: \"\", //主键\r\n        orderId: \"\" //订单号-\r\n      },\r\n      //前一个页面传来的数据\r\n      orderDetail: {\r\n        userRemark:\"\",\r\n        recyclinRemark: \"\",\r\n        score: null,   //用户评分\r\n        recScore: null,  //回收人员评分\r\n        comment: \"\" , //用户评价\r\n        recComment: \"\",  //回收人员评分\r\n        estimatedPrice:0.00,\r\n        paidPrice:0.00,\r\n        additionalCosts:0.00,\r\n        destContactsAdderss:\"\",\r\n        destContactsName:\"\",\r\n        destContactsPhone:\"\",\r\n        additionalCosts:0,\r\n        id: \"\", //主键\r\n        imgUrls: \"\",\r\n        appointmentDay: \"\",\r\n        appointmentStartTime: \"\",\r\n        appointmentEndTime: \"\",\r\n        phone: \"\", //回收人员手机号码-\r\n        orderId: \"\", //订单号-\r\n        type: -1, //后台通过判断值是否小于0决定是否进行条件查询，小于0则查询所有type-\r\n        contactsPhone: \"\", //联系人手机号-\r\n        contactsName: \"\", //联系人名字 -\r\n        isElevatorRoom: -1, //是否电梯房-\r\n        contactsFloor: -1, //联系人楼层 -\r\n        contactsAdderss: \"\", //联系人地址-\r\n        name: \"\", //回收人员姓名-\r\n        status: -1 //-后台通过判断值是否小于0决定是否进行条件查询，小于0则查询所有type\r\n      },\r\n\r\n      //商品的表格\r\n      columns: [\r\n        {\r\n          title: \"商品名称\",\r\n          key: \"name\"\r\n        },\r\n        {\r\n          title: \"商品数量\",\r\n          key: \"goodsNum\"\r\n        },\r\n        {\r\n          title: \"预估最小价格(单价)\",\r\n          key: \"minPrice\"\r\n        },\r\n        {\r\n          title: \"预估最大价格(单价)\",\r\n          key: \"maxPrice\"\r\n        },\r\n        {\r\n          title: \"该类商品预估最小价格\",\r\n          key: \"goodMinTotalPrice\"\r\n        },\r\n        {\r\n          title: \"该类商品预估最大价格\",\r\n          key: \"goodMaxTotalPrice\"\r\n        }\r\n      ],\r\n\r\n      //在线回收人员的表格\r\n      RecyclingPersonnelColumns: [\r\n        {\r\n          title: \"姓名\",\r\n          key: \"name\"\r\n        },\r\n        {\r\n          title: \"手机号码\",\r\n          key: \"phone\"\r\n        },\r\n        {\r\n          title: \"地址\",\r\n          key: \"address\"\r\n        }\r\n      ],\r\n      //订单商品的明细\r\n      OrderGoodsList: []\r\n    };\r\n  },\r\n  computed: {\r\n    //展示评价\r\n    isRemark: function(){\r\n      if ((this.orderDetail.recyclinRemark=null&&this.orderDetail.recyclinRemark!=\"\")\r\n      ||(this.orderDetail.userRemark!=null&&this.orderDetail.userRemark!=\"\")){\r\n        return true;\r\n      }else {\r\n        return false;\r\n      }\r\n    },\r\n    //type=2  ---> 运输服务\r\n    isTrac: function(){\r\n      if(this.orderDetail.type==2){\r\n        return true;\r\n      }else{\r\n        return false;\r\n      }\r\n    },\r\n    urlsList: function() {\r\n      return this.orderDetail.imgUrls.split(\";\");\r\n    },\r\n    isManualFinish: function() {\r\n      if (this.orderDetail.status != 5 && this.orderDetail.status != 6) {\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    },\r\n    CpType: function() {\r\n      if (this.orderDetail.type === 0) {\r\n        return \"可再生回收\";\r\n      } else if (this.orderDetail.type === 1) {\r\n        return \"付费回收\";\r\n      } else if (this.orderDetail.type === 2) {\r\n        return \"运输服务\";\r\n      }\r\n    },\r\n    // isPay: function() {\r\n    //   if (this.orderDetail.type === 0) {\r\n    //     //可再生垃圾回收是回收人员支付钱给用户\r\n    //     return false;\r\n    //   } else {\r\n    //     return true;\r\n    //   }\r\n    // },\r\n    isDispactched: function() {\r\n      if (\r\n        this.orderDetail.status === 0 ||\r\n        this.orderDetail.status === 1 ||\r\n        this.orderDetail.status === 3\r\n      ) {\r\n        return true;\r\n      } else return false;\r\n    },\r\n    isElevatorRoom: function() {\r\n      if (this.orderDetail.isElevatorRoom == 0) {\r\n        return \"是\";\r\n      } else if (this.orderDetail.isElevatorRoom == 1) {\r\n        return \"否\";\r\n      }\r\n    },\r\n    status: function() {\r\n      if (this.orderDetail.status == 0) {\r\n        return \"待分配\";\r\n      } else if (this.orderDetail.status == 1) {\r\n        return \"系统派单中\";\r\n      } else if (this.orderDetail.status == 2) {\r\n        return \"已接单\";\r\n      } else if (this.orderDetail.status == 3) {\r\n        return \"拒绝接单\";\r\n      } else if (this.orderDetail.status == 4) {\r\n        return \"待支付\";\r\n      } else if (this.orderDetail.status == 5) {\r\n        return \"已取消\";\r\n      } else if (this.orderDetail.status == 6) {\r\n        return \"已完成\";\r\n      }\r\n    },\r\n    type: function() {\r\n      if (this.orderDetail.type == 0) {\r\n        return \"可再生回收\";\r\n      } else if (this.orderDetail.type == 1) {\r\n        return \"付费回收\";\r\n      } else if (this.orderDetail.type == 2) {\r\n        return \"运输服务\";\r\n      }\r\n    },\r\n\r\n    //订单状态\r\n    //type=0的话用户是不需要支付的，是回收人员支付钱，故待支付为false\r\n    //状态：0待分配 1系统已派单,待接单 2已接单 3拒绝接单 4等待用户支付（付费回收才有） 5已取消 6已完成'  7已支付\r\n    whichSatatus: function() {\r\n      if (this.orderDetail.status == 0 && this.orderDetail.type == 0) {\r\n        // console.log(this.orderDetail.status);\r\n        this.isRefuse = false;\r\n        this.isCancel = false;\r\n        this.isPay = false;\r\n        this.isPayed = false;\r\n        this.isFinish = true;\r\n        return 0;\r\n      } else if (this.orderDetail.status == 0 && !this.orderDetail.type == 0) {\r\n        // console.log(this.orderDetail.status);\r\n        this.isRefuse = false;\r\n        this.isCancel = false;\r\n        this.isPayed = true;\r\n        this.isPay = true;\r\n        this.isFinish = true;\r\n        return 0;\r\n      } else if (this.orderDetail.status == 1 && this.orderDetail.type == 0) {\r\n        // console.log(this.orderDetail.status);\r\n        this.isRefuse = false;\r\n        this.isCancel = false;\r\n        this.isPay = false;\r\n        this.isPayed = true;\r\n        this.isFinish = true;\r\n        return 1;\r\n      } else if (this.orderDetail.status == 1 && !this.orderDetail.type == 0) {\r\n        this.isRefuse = false;\r\n        this.isCancel = false;\r\n        this.isPay = true;\r\n        this.isPayed = true;\r\n        this.isFinish = true;\r\n        return 1;\r\n      } else if (this.orderDetail.status == 2 && this.orderDetail.type == 0) {\r\n        // console.log(this.orderDetail.status);\r\n        this.isRefuse = false;\r\n        this.isCancel = false;\r\n        this.isPay = false;\r\n        this.isPayed = false;\r\n        this.isFinish = true;\r\n        return 2;\r\n      } else if (this.orderDetail.status == 2 && !this.orderDetail.type == 0) {\r\n        // console.log(this.orderDetail.status);\r\n        this.isRefuse = false;\r\n        this.isCancel = false;\r\n        this.isPay = true;\r\n        this.isPayed = true;\r\n        this.isFinish = true;\r\n        return 2;\r\n      } else if (this.orderDetail.status == 3 && this.orderDetail.type == 0) {\r\n        // console.log(this.orderDetail.status);\r\n        this.isCancel = false;\r\n        this.isFinish = true;\r\n        this.isPay = false;\r\n        this.isPayed = false;\r\n        this.isRefuse = true;\r\n        return 3;\r\n      } else if (this.orderDetail.status == 3 && !this.orderDetail.type == 0) {\r\n        // console.log(this.orderDetail.status);\r\n        this.isCancel = false;\r\n        this.isFinish = true;\r\n        this.isPay = false;\r\n        this.isPayed = false;\r\n        this.isRefuse = true;\r\n        return 3;\r\n      } else if (this.orderDetail.status == 4 && this.orderDetail.type == 0) {\r\n        //本身就是待支付状态\r\n        // console.log(this.orderDetail.status);\r\n        this.isCancel = false;\r\n        this.isFinish = true;\r\n        this.isPay = true;\r\n        this.isPayed = true;\r\n        this.isRefuse = false;\r\n        return 3; //因为拒绝接单被隐藏了  所以要显示待支付下标要-1\r\n      } else if (this.orderDetail.status == 4 && !this.orderDetail.type == 0) {\r\n        //本身就是待支付状态\r\n        // console.log(this.orderDetail.status);\r\n        this.isRefuse = false;\r\n        this.isPay = true;\r\n        this.isPayed = true;\r\n        this.isCancel = false;\r\n        this.isFinish = true;\r\n        return 3; //因为拒绝接单被隐藏了  所以要显示待支付下标要-1\r\n      } else if (this.orderDetail.status == 5 && this.orderDetail.type == 0) {\r\n        // console.log(this.orderDetail.status);\r\n        this.isCancel = true;\r\n        this.isFinish = false;\r\n        this.isPay = false;\r\n        this.isPayed = false;\r\n        this.isRefuse = false;\r\n        return 3;\r\n      } else if (this.orderDetail.status == 5 && !this.orderDetail.type == 0) {\r\n        // console.log(this.orderDetail.status);\r\n        this.isCancel = true;\r\n        this.isFinish = false;\r\n        this.isPay = true;\r\n        this.isPayed = true;\r\n        this.isRefuse = false;\r\n        return 5;\r\n      } else if (this.orderDetail.status == 6 && this.orderDetail.type == 0) {\r\n        // console.log(this.orderDetail.status);\r\n        this.isCancel = false;\r\n        this.isFinish = true;\r\n        this.isPay = false;\r\n        this.isPayed = false;\r\n        this.isRefuse = false;\r\n        return 3;\r\n      } else if (this.orderDetail.status == 6 && !this.orderDetail.type == 0) {\r\n        // console.log(this.orderDetail.status);\r\n\r\n        this.isRefuse = false;\r\n        this.isPay = true;\r\n        this.isPayed = false;\r\n        this.isCancel = false;\r\n        this.isFinish = true;\r\n        return 5;//已支付\r\n      } else if (this.orderDetail.status == 7) {\r\n        // console.log(this.orderDetail.status);\r\n        this.isRefuse = false;\r\n        this.isPay = true;\r\n        this.isPayed = true;\r\n        this.isCancel = false;\r\n        this.isFinish = true;\r\n        return 4;\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    back() {\r\n      this.$router.go(-1);\r\n    },\r\n    watchBigImg(v) {\r\n      this.imgModal = !this.imgModal;\r\n      this.bigImgUrl = v;\r\n    },\r\n    cancelDispactch() {\r\n      this.dispatchModalVisible = false;\r\n    },\r\n    manualFinish() {\r\n      this.$Modal.confirm({\r\n        title: \"确认完成\",\r\n        content: \"确认人工完成订单\" + this.orderDetail.orderId + \"吗？\",\r\n        onOk: () => {\r\n          manualFinishOrder(this.orderDetail).then(res => {\r\n            if (res.success === true) {\r\n              this.$Message.success(\"订单已完成!\");\r\n              location.reload();\r\n            } else if (res.success === false) {\r\n              this.$Message.error(res.message + \"错误代码:\" + res.code);\r\n            }\r\n          });\r\n        }\r\n      });\r\n    },\r\n    //选择了一个回收人员  赋值给请求参数\r\n    selectRc(currentRow, oldCurrentRow) {\r\n      this.dispatchForm.orderId = this.orderDetail.orderId;\r\n      this.dispatchForm.RecyclingPersonnelId = currentRow.id;\r\n      this.dispatchForm.RecyclingPersonnelName = currentRow.name;\r\n    },\r\n    comfirmDispactch() {\r\n      if (\r\n        this.dispatchForm.RecyclingPersonnelName != \"\" &&\r\n        this.dispatchForm.RecyclingPersonnelName != null\r\n      ) {\r\n        this.$Modal.confirm({\r\n          title: \"确认分配\",\r\n          content:\r\n            \"您确认要分配订单给\" +\r\n            this.dispatchForm.RecyclingPersonnelName +\r\n            \"?\",\r\n          onOk: () => {\r\n            dispatchOrder(this.dispatchForm).then(res => {\r\n              if (res.success === true) {\r\n                this.dispatchModalVisible = false;\r\n                location.reload();\r\n              }\r\n            });\r\n            this.confirmDialog = true;\r\n          }\r\n        });\r\n      } else {\r\n        this.$Message.error(\"请选择人员\");\r\n      }\r\n    },\r\n\r\n    //发起请求通过订单号获取订单商品明细\r\n    getOrderDetailMethod() {\r\n      this.orderDetailForm.id = this.orderDetail.id;\r\n      this.orderDetailForm.orderId = this.orderDetail.orderId;\r\n      getOrderDetail(this.orderDetailForm).then(res => {\r\n        if (res.success === true) {\r\n          if (res.result.orderGoodsList != null) {\r\n            this.OrderGoodsList = res.result.orderGoodsList;\r\n          }\r\n          this.orderDetail = res.result; //传数据渲染\r\n         \r\n        }\r\n      });\r\n    },\r\n\r\n    // 人工派单的逻辑方法\r\n    dispatchOrderDialog() {\r\n      this.dispatchModalVisible = true; //弹出对话框\r\n\r\n      //发送请求获取所有在线的回收人员\r\n      getOnlineRp().then(res => {\r\n        if (res.success === true) {\r\n          this.RecyclingPersonnel = res.result;\r\n        }\r\n      });\r\n    }\r\n  },\r\n\r\n  //渲染完毕\r\n  mounted() {\r\n    this.getOrderDetailMethod(); //获取订单详情\r\n  },\r\n\r\n  //组件加载完毕\r\n  created() {\r\n    var data = this.$route.query.orderData;\r\n    // if (data != null && data != undefined && data.orderId != undefined) {\r\n    //   this.orderDetail = data;\r\n    //   this.setStore(\"orderDetail\", JSON.stringify(data));\r\n    // } else {\r\n    //   this.orderDetail = JSON.parse(this.getStore(\"orderDetail\") || \"{}\");\r\n    //   console.log(\"缓存取出orderDetail\");\r\n    // console.log(this.orderDetail);\r\n    // }\r\n\r\n    if (data != null && data != undefined && data.orderId != undefined) {\r\n      this.orderDetail = data;\r\n      this.setStore(\"orderId\", data.orderId);\r\n      this.setStore(\"id\", data.id);\r\n    } else {\r\n      this.orderDetail.id = this.getStore(\"id\");\r\n      this.orderDetail.orderId = this.getStore(\"orderId\");\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\n.color {\r\n  color: #f07625;\r\n}\r\n</style>"],"sourceRoot":"src/views/orders/order-detail-manage"}]}