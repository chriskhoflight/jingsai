{"remainingRequest":"D:\\jingsai\\rcms_src\\rcms-pc-web\\node_modules\\babel-loader\\lib\\index.js!D:\\jingsai\\rcms_src\\rcms-pc-web\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\jingsai\\rcms_src\\rcms-pc-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\jingsai\\rcms_src\\rcms-pc-web\\src\\views\\common\\own-space\\own-space.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\jingsai\\rcms_src\\rcms-pc-web\\src\\views\\common\\own-space\\own-space.vue","mtime":1564969187174},{"path":"D:\\jingsai\\rcms_src\\rcms-pc-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\jingsai\\rcms_src\\rcms-pc-web\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\jingsai\\rcms_src\\rcms-pc-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\jingsai\\rcms_src\\rcms-pc-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _index = require(\"@/api/index\");\n\nvar _jsCookie = _interopRequireDefault(require(\"js-cookie\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nvar _default = {\n  name: \"ownspace_index\",\n  data: function data() {\n    var validePhone = function validePhone(rule, value, callback) {\n      var re = /^1[0-9]{10}$/;\n\n      if (!re.test(value)) {\n        callback(new Error(\"请输入正确格式的手机号\"));\n      } else {\n        callback();\n      }\n    };\n\n    return {\n      accessToken: {},\n      uploadFileUrl: _index.uploadFile,\n      userForm: {\n        id: \"\",\n        avatar: \"\",\n        username: \"\",\n        sex: \"\",\n        mobile: \"\",\n        email: \"\",\n        status: \"\",\n        type: \"\",\n        typeTxt: \"\",\n        address: \"\",\n        addressArray: []\n      },\n      mobileEditForm: {\n        mobile: \"\",\n        code: \"\"\n      },\n      emailEditForm: {\n        email: \"\"\n      },\n      defaultList: [{\n        url: \"\"\n      }],\n      uploadList: [],\n      viewImage: false,\n      imgUrl: \"\",\n      codeError: \"\",\n      initPhone: \"\",\n      initEmail: \"\",\n      uid: \"\",\n      // 登录用户的userId\n      saveLoading: false,\n      identifyError: \"\",\n      // 验证码错误\n      savePassLoading: false,\n      oldPassError: \"\",\n      identifyCodeRight: false,\n      // 验证码是否正确\n      hasGetIdentifyCode: false,\n      // 是否点了获取验证码\n      canGetIdentifyCode: false,\n      // 是否可点获取验证码\n      checkIdentifyCodeLoading: false,\n      mobileEditValidate: {\n        mobile: [{\n          required: true,\n          message: \"请输入手机号码\"\n        }, {\n          validator: validePhone\n        }]\n      },\n      emailEditValidate: {\n        email: [{\n          required: true,\n          message: \"请输入邮箱地址\"\n        }, {\n          type: \"email\",\n          message: \"邮箱格式不正确\"\n        }]\n      },\n      editMobileVisible: false,\n      // 显示填写验证码box\n      gettingIdentifyCodeBtnContent: \"获取验证码\",\n      // “获取验证码”按钮的文字\n      editEmailVisible: false,\n      sendVerifyEmailLoading: false,\n      canSendEditEmail: true,\n      github: {\n        related: false,\n        id: \"\",\n        username: \"\"\n      },\n      qq: {\n        related: false,\n        id: \"\",\n        username: \"\"\n      },\n      weibo: {\n        related: false,\n        id: \"\",\n        username: \"\"\n      },\n      jumping: false,\n      dictSex: []\n    };\n  },\n  methods: {\n    init: function init() {\n      this.getDictSexData();\n      this.accessToken = {\n        accessToken: this.getStore(\"accessToken\")\n      };\n      var v = JSON.parse(_jsCookie.default.get(\"userInfo\")); // 转换null为\"\"\n\n      for (var attr in v) {\n        if (v[attr] === null) {\n          v[attr] = \"\";\n        }\n      }\n\n      var str = JSON.stringify(v);\n      var userInfo = JSON.parse(str);\n      userInfo.addressArray = [];\n      this.userForm = userInfo;\n      this.initPhone = userInfo.mobile;\n      this.mobileEditForm.mobile = userInfo.mobile;\n      this.initEmail = userInfo.email;\n      this.emailEditForm.email = userInfo.email;\n      this.defaultList[0].url = userInfo.avatar;\n\n      if (userInfo.address !== null && userInfo.address !== \"\") {\n        this.userForm.address = userInfo.address;\n        this.userForm.addressArray = JSON.parse(userInfo.address);\n      }\n\n      if (this.userForm.type === 0) {\n        this.userForm.typeTxt = \"普通用户\";\n      } else if (this.userForm.type === 1) {\n        this.userForm.typeTxt = \"管理员\";\n      }\n    },\n    getDictSexData: function getDictSexData() {\n      var _this = this;\n\n      // 获取性别字典数据\n      (0, _index.getDictDataByType)(\"sex\").then(function (res) {\n        if (res.success) {\n          _this.dictSex = res.result;\n        }\n      });\n    },\n    handleView: function handleView(imgUrl) {\n      this.imgUrl = imgUrl;\n      this.viewImage = true;\n    },\n    handleRemove: function handleRemove(file) {\n      var fileList = this.$refs.upload.fileList;\n      this.$refs.upload.fileList.splice(fileList.indexOf(file), 1);\n    },\n    handleSuccess: function handleSuccess(res, file) {\n      if (res.success === true) {\n        file.url = res.result;\n        this.userForm.avatar = res.result;\n        this.defaultList[0].url = res.result;\n        this.$refs.upload.fileList.splice(0, 1);\n      } else {\n        this.$Message.error(res.message);\n      }\n    },\n    handleError: function handleError(error, file, fileList) {\n      this.$Message.error(error.toString());\n    },\n    handleFormatError: function handleFormatError(file) {\n      this.$Notice.warning({\n        title: \"不支持的文件格式\",\n        desc: \"所选文件‘ \" + file.name + \" ’格式不正确, 请选择 .jpg .jpeg .png .gif格式文件\"\n      });\n    },\n    handleMaxSize: function handleMaxSize(file) {\n      this.$Notice.warning({\n        title: \"文件大小过大\",\n        desc: \"所选文件‘ \" + file.name + \" ’大小过大, 不得超过 5M.\"\n      });\n    },\n    handleBeforeUpload: function handleBeforeUpload() {\n      var check = this.uploadList.length < 2;\n\n      if (!check) {\n        this.$Notice.warning({\n          title: \"最多只能上传 1 张图片\"\n        });\n      }\n\n      return check;\n    },\n    showChangeMobile: function showChangeMobile() {\n      this.editMobileVisible = true;\n    },\n    showChangeEmail: function showChangeEmail() {\n      this.editEmailVisible = true;\n    },\n    getIdentifyCode: function getIdentifyCode() {\n      var _this2 = this;\n\n      this.hasGetIdentifyCode = true;\n      this.$refs[\"mobileEditForm\"].validate(function (valid) {\n        if (valid) {\n          _this2.canGetIdentifyCode = true;\n          var timeLast = 60;\n          var timer = setInterval(function () {\n            if (timeLast >= 0) {\n              _this2.gettingIdentifyCodeBtnContent = timeLast + \"秒后重试\";\n              timeLast -= 1;\n            } else {\n              clearInterval(timer);\n              _this2.gettingIdentifyCodeBtnContent = \"获取验证码\";\n              _this2.canGetIdentifyCode = false;\n            }\n          }, 1000);\n          _this2.editMobileVisible = true; // you can write ajax request here\n        }\n      });\n    },\n    cancelEditUserInfo: function cancelEditUserInfo() {\n      this.$store.commit(\"removeTag\", \"ownspace_old\");\n      localStorage.pageOpenedList = JSON.stringify(this.$store.state.app.pageOpenedList);\n      var lastPageName = \"\";\n      var length = this.$store.state.app.pageOpenedList.length;\n\n      if (length > 1) {\n        lastPageName = this.$store.state.app.pageOpenedList[length - 1].name;\n      } else {\n        lastPageName = this.$store.state.app.pageOpenedList[0].name;\n      }\n\n      this.$router.push({\n        name: lastPageName\n      });\n    },\n    saveEdit: function saveEdit() {\n      var _this3 = this;\n\n      this.saveLoading = true;\n      var params = this.userForm;\n      delete params.nickName;\n      delete params.description;\n      (0, _index.userInfoEdit)(params).then(function (res) {\n        _this3.saveLoading = false;\n\n        if (res.success === true) {\n          _this3.$Message.success(\"保存成功\"); // 更新用户信息\n\n\n          _jsCookie.default.set(\"userInfo\", _this3.userForm); // 更新头像\n\n\n          _this3.$store.commit(\"setAvatarPath\", _this3.userForm.avatar);\n        }\n      });\n    },\n    changeAddress: function changeAddress() {\n      this.userForm.address = JSON.stringify(this.userForm.addressArray);\n    },\n    cancelInputCodeBox: function cancelInputCodeBox() {\n      this.editMobileVisible = false;\n      this.userForm.mobile = this.initPhone;\n    },\n    cancelEditEmail: function cancelEditEmail() {\n      this.editEmailVisible = false;\n      this.emailEditForm.email = this.initEmail;\n    },\n    submitCode: function submitCode() {\n      var _this4 = this;\n\n      this.checkIdentifyCodeLoading = true;\n      this.$refs[\"mobileEditForm\"].validate(function (valid) {\n        if (valid) {\n          if (_this4.mobileEditForm.code.length === 0) {\n            _this4.codeError = \"请填写短信验证码\";\n            _this4.checkIdentifyCodeLoading = false;\n            return;\n          } else {\n            _this4.$Message.success(\"修改成功\");\n\n            _this4.editMobileVisible = false;\n            _this4.checkIdentifyCodeLoading = false;\n          }\n        }\n      });\n    },\n    hasChangePhone: function hasChangePhone() {\n      var _this5 = this;\n\n      if (this.mobileEditForm.mobile === this.initPhone) {\n        this.canGetIdentifyCode = true;\n      } else {\n        this.$refs[\"mobileEditForm\"].validate(function (valid) {\n          if (valid) {\n            _this5.canGetIdentifyCode = false;\n          } else {\n            _this5.canGetIdentifyCode = true;\n          }\n        });\n      }\n    },\n    hasChangeEmail: function hasChangeEmail() {\n      if (this.emailEditForm.email === this.initEmail) {\n        this.canSendEditEmail = true;\n      } else {\n        this.canSendEditEmail = false;\n      }\n    },\n    sendVerifyEmail: function sendVerifyEmail() {\n      var _this6 = this;\n\n      this.$refs[\"emailEditForm\"].validate(function (valid) {\n        if (valid) {\n          _this6.sendVerifyEmailLoading = true;\n          setTimeout(function () {\n            _this6.sendVerifyEmailLoading = false;\n            _this6.editEmailVisible = false;\n\n            _this6.$Message.success(\"发送验证邮件成功，请注意查收\");\n          }, 1000);\n        }\n      });\n    }\n  },\n  mounted: function mounted() {\n    this.uploadList = this.$refs.upload.fileList;\n    this.init();\n    this.hasChangePhone();\n  }\n};\nexports.default = _default;",{"version":3,"sources":["own-space.vue"],"names":[],"mappings":"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","sourcesContent":["<style lang=\"less\">\r\n@import \"./own-space.less\";\r\n</style>\r\n\r\n<template>\r\n    <div class=\"own-space\">\r\n        <Card>\r\n            <Tabs :animated=\"false\">\r\n                <TabPane label=\"基本信息\" name=\"info\">\r\n                  <Form \r\n                      ref=\"userForm\"\r\n                      :model=\"userForm\" \r\n                      :label-width=\"100\" \r\n                      label-position=\"right\"\r\n                  >\r\n                      <FormItem label=\"用户头像：\">\r\n                          <div class=\"upload-list\" v-for=\"item in uploadList\" :key=\"item.url\">\r\n                            <template v-if=\"item.status === 'finished'\">\r\n                                <img :src=\"item.url\">\r\n                                <div class=\"upload-list-cover\">\r\n                                    <Icon type=\"ios-eye-outline\" @click.native=\"handleView(item.url)\"></Icon>\r\n                                    <Icon type=\"ios-trash-outline\" @click.native=\"handleRemove(item)\"></Icon>\r\n                                </div>\r\n                            </template>\r\n                            <template v-else>\r\n                                <Progress v-if=\"item.showProgress\" :percent=\"item.percentage\" hide-info></Progress>\r\n                            </template>\r\n                          </div>\r\n                          <Upload\r\n                              ref=\"upload\"\r\n                              :show-upload-list=\"false\"\r\n                              :default-file-list=\"defaultList\"\r\n                              :on-success=\"handleSuccess\"\r\n                              :on-error=\"handleError\"\r\n                              :format=\"['jpg','jpeg','png','gif']\"\r\n                              :max-size=\"5120\"\r\n                              :on-format-error=\"handleFormatError\"\r\n                              :on-exceeded-size=\"handleMaxSize\"\r\n                              :before-upload=\"handleBeforeUpload\"\r\n                              type=\"drag\"\r\n                              :action=\"uploadFileUrl\"\r\n                              :headers=\"accessToken\"\r\n                              style=\"display: inline-block;width:58px;\">\r\n                            <div style=\"width: 58px;height:58px;line-height: 58px;\">\r\n                                <Icon type=\"md-camera\" size=\"20\"></Icon>\r\n                            </div>\r\n                        </Upload>\r\n                      </FormItem>\r\n                      <FormItem label=\"用户账号：\">\r\n                          <span>{{userForm.username}}</span>\r\n                      </FormItem>\r\n                      <FormItem label=\"性别：\">\r\n                          <RadioGroup v-model=\"userForm.sex\">\r\n                            <Radio v-for=\"(item, i) in dictSex\" :key=\"i\" :label=\"Number(item.value)\">{{item.title}}</Radio>\r\n                          </RadioGroup>\r\n                      </FormItem>\r\n                      <FormItem label=\"手机号：\">\r\n                          <span>{{userForm.mobile}}</span>\r\n                          <div style=\"display:inline-block;margin-left:20px;font-size:13px;\">\r\n                              <a @click=\"showChangeMobile\">修改手机号</a>\r\n                          </div>\r\n                      </FormItem>\r\n                      <FormItem label=\"邮箱：\">\r\n                          <span>{{userForm.email}}</span>\r\n                          <div style=\"display:inline-block;margin-left:20px;font-size:13px;\">\r\n                              <a @click=\"showChangeEmail\">修改邮箱</a>\r\n                          </div>\r\n                      </FormItem>\r\n                      <FormItem label=\"地址：\" >\r\n                          <al-cascader v-model=\"userForm.addressArray\" @on-change=\"changeAddress\" data-type=\"code\" level=\"2\" style=\"width:250px\"/>\r\n                      </FormItem>\r\n                      <FormItem label=\"所属部门：\">\r\n                          <span>{{ userForm.departmentTitle }}</span>\r\n                      </FormItem>\r\n                    <FormItem label=\"用户类型：\">\r\n                          <span>{{ userForm.typeTxt }}</span>\r\n                      </FormItem>\r\n                      <FormItem label=\"创建时间：\">\r\n                          <span>{{ userForm.createTime }}</span>\r\n                      </FormItem>\r\n                      <FormItem>\r\n                          <Button type=\"primary\" style=\"width: 100px;margin-right:5px\" :loading=\"saveLoading\" @click=\"saveEdit\">保存</Button>\r\n                          <Button @click=\"cancelEditUserInfo\">取消</Button>\r\n                      </FormItem>\r\n                  </Form>\r\n                </TabPane>\r\n                <TabPane label=\"绑定第三方账号\" name=\"social\">\r\n                  <div class=\"sorry\">\r\n                    <img src=\"@/assets/sorry.png\">\r\n                    <span class=\"text\"> 抱歉，暂未开发</span>\r\n                      \r\n                  </div>\r\n                </TabPane>\r\n            </Tabs>\r\n            \r\n        </Card>\r\n\r\n        <Modal title=\"修改手机号\" v-model=\"editMobileVisible\" :closable='false' :mask-closable=false :width=\"500\">\r\n            <Form ref=\"mobileEditForm\" :model=\"mobileEditForm\" :label-width=\"60\" :rules=\"mobileEditValidate\">\r\n                <FormItem label=\"手机号\" prop=\"mobile\">\r\n                    <Input v-model=\"mobileEditForm.mobile\" @on-change=\"hasChangePhone\" placeholder=\"请输入新手机号\"/>\r\n                </FormItem>\r\n                <FormItem label=\"验证码\" prop=\"code\" :error=\"codeError\">\r\n                    <Input v-model=\"mobileEditForm.code\" placeholder=\"请输入您收到的短信验证码\" style=\"width:200px;margin-right:5px;\"/>\r\n                    <div style=\"display:inline-block;position:relative;\">\r\n                        <Button @click=\"getIdentifyCode\" :disabled=\"canGetIdentifyCode\">{{ gettingIdentifyCodeBtnContent }}</Button>\r\n                    </div>\r\n                </FormItem>\r\n            </Form>\r\n            <div slot=\"footer\">\r\n                <Button type=\"text\" @click=\"cancelInputCodeBox\">取消</Button>\r\n                <Button type=\"primary\" :loading=\"checkIdentifyCodeLoading\" @click=\"submitCode\">提交</Button>\r\n            </div>\r\n        </Modal>\r\n        <Modal title=\"修改邮箱\" v-model=\"editEmailVisible\" :closable='false' :mask-closable=false :width=\"500\">\r\n            <Form ref=\"emailEditForm\" :model=\"emailEditForm\" :label-width=\"90\" :rules=\"emailEditValidate\">\r\n                <FormItem label=\"新邮箱地址\" prop=\"email\">\r\n                    <Input v-model=\"emailEditForm.email\" @on-change=\"hasChangeEmail\" placeholder=\"请输入新邮箱地址\"></Input>\r\n                </FormItem>\r\n            </Form>\r\n            <div slot=\"footer\">\r\n                <Button type=\"text\" @click=\"cancelEditEmail\">取消</Button>\r\n                <Button type=\"primary\" :disabled=\"canSendEditEmail\" :loading=\"sendVerifyEmailLoading\" @click=\"sendVerifyEmail\">发送验证邮件</Button>\r\n            </div>\r\n        </Modal>\r\n        <Modal title=\"图片预览\" v-model=\"viewImage\" draggable>\r\n          <img :src=\"imgUrl\" style=\"width: 80%;margin: 0 auto;display: block;\">\r\n          <div slot=\"footer\">\r\n            <Button @click=\"viewImage=false\">关闭</Button>\r\n          </div>\r\n        </Modal>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  userInfoEdit,\r\n  relatedInfo,\r\n  unRelate,\r\n  githubLogin,\r\n  qqLogin,\r\n  weiboLogin,\r\n  uploadFile,\r\n  getDictDataByType\r\n} from \"@/api/index\";\r\nimport Cookies from \"js-cookie\";\r\nexport default {\r\n  name: \"ownspace_index\",\r\n  data() {\r\n    const validePhone = (rule, value, callback) => {\r\n      var re = /^1[0-9]{10}$/;\r\n      if (!re.test(value)) {\r\n        callback(new Error(\"请输入正确格式的手机号\"));\r\n      } else {\r\n        callback();\r\n      }\r\n    };\r\n    return {\r\n      accessToken: {},\r\n      uploadFileUrl: uploadFile,\r\n      userForm: {\r\n        id: \"\",\r\n        avatar: \"\",\r\n        username: \"\",\r\n        sex: \"\",\r\n        mobile: \"\",\r\n        email: \"\",\r\n        status: \"\",\r\n        type: \"\",\r\n        typeTxt: \"\",\r\n        address: \"\",\r\n        addressArray: []\r\n      },\r\n      mobileEditForm: {\r\n        mobile: \"\",\r\n        code: \"\"\r\n      },\r\n      emailEditForm: {\r\n        email: \"\"\r\n      },\r\n      defaultList: [\r\n        {\r\n          url: \"\"\r\n        }\r\n      ],\r\n      uploadList: [],\r\n      viewImage: false,\r\n      imgUrl: \"\",\r\n      codeError: \"\",\r\n      initPhone: \"\",\r\n      initEmail: \"\",\r\n      uid: \"\", // 登录用户的userId\r\n      saveLoading: false,\r\n      identifyError: \"\", // 验证码错误\r\n      savePassLoading: false,\r\n      oldPassError: \"\",\r\n      identifyCodeRight: false, // 验证码是否正确\r\n      hasGetIdentifyCode: false, // 是否点了获取验证码\r\n      canGetIdentifyCode: false, // 是否可点获取验证码\r\n      checkIdentifyCodeLoading: false,\r\n      mobileEditValidate: {\r\n        mobile: [\r\n          { required: true, message: \"请输入手机号码\" },\r\n          { validator: validePhone }\r\n        ]\r\n      },\r\n      emailEditValidate: {\r\n        email: [\r\n          { required: true, message: \"请输入邮箱地址\" },\r\n          { type: \"email\", message: \"邮箱格式不正确\" }\r\n        ]\r\n      },\r\n      editMobileVisible: false, // 显示填写验证码box\r\n      gettingIdentifyCodeBtnContent: \"获取验证码\", // “获取验证码”按钮的文字\r\n      editEmailVisible: false,\r\n      sendVerifyEmailLoading: false,\r\n      canSendEditEmail: true,\r\n      github: {\r\n        related: false,\r\n        id: \"\",\r\n        username: \"\"\r\n      },\r\n      qq: {\r\n        related: false,\r\n        id: \"\",\r\n        username: \"\"\r\n      },\r\n      weibo: {\r\n        related: false,\r\n        id: \"\",\r\n        username: \"\"\r\n      },\r\n      jumping: false,\r\n      dictSex: []\r\n    };\r\n  },\r\n  methods: {\r\n    init() {\r\n      this.getDictSexData();\r\n      this.accessToken = {\r\n        accessToken: this.getStore(\"accessToken\")\r\n      };\r\n      let v = JSON.parse(Cookies.get(\"userInfo\"));\r\n      // 转换null为\"\"\r\n      for (let attr in v) {\r\n        if (v[attr] === null) {\r\n          v[attr] = \"\";\r\n        }\r\n      }\r\n      let str = JSON.stringify(v);\r\n      let userInfo = JSON.parse(str);\r\n      userInfo.addressArray = [];\r\n      this.userForm = userInfo;\r\n      this.initPhone = userInfo.mobile;\r\n      this.mobileEditForm.mobile = userInfo.mobile;\r\n      this.initEmail = userInfo.email;\r\n      this.emailEditForm.email = userInfo.email;\r\n      this.defaultList[0].url = userInfo.avatar;\r\n      if (userInfo.address !== null && userInfo.address !== \"\") {\r\n        this.userForm.address = userInfo.address;\r\n        this.userForm.addressArray = JSON.parse(userInfo.address);\r\n      }\r\n      if (this.userForm.type === 0) {\r\n        this.userForm.typeTxt = \"普通用户\";\r\n      } else if (this.userForm.type === 1) {\r\n        this.userForm.typeTxt = \"管理员\";\r\n      }\r\n    },\r\n    getDictSexData(){\r\n      // 获取性别字典数据\r\n      getDictDataByType(\"sex\").then(res => {\r\n        if(res.success){\r\n          this.dictSex = res.result\r\n        }\r\n      })\r\n    },\r\n    handleView(imgUrl) {\r\n      this.imgUrl = imgUrl;\r\n      this.viewImage = true;\r\n    },\r\n    handleRemove(file) {\r\n      const fileList = this.$refs.upload.fileList;\r\n      this.$refs.upload.fileList.splice(fileList.indexOf(file), 1);\r\n    },\r\n    handleSuccess(res, file) {\r\n      if (res.success === true) {\r\n        file.url = res.result;\r\n        this.userForm.avatar = res.result;\r\n        this.defaultList[0].url = res.result;\r\n        this.$refs.upload.fileList.splice(0, 1);\r\n      } else {\r\n        this.$Message.error(res.message);\r\n      }\r\n    },\r\n    handleError(error, file, fileList) {\r\n      this.$Message.error(error.toString());\r\n    },\r\n    handleFormatError(file) {\r\n      this.$Notice.warning({\r\n        title: \"不支持的文件格式\",\r\n        desc:\r\n          \"所选文件‘ \" +\r\n          file.name +\r\n          \" ’格式不正确, 请选择 .jpg .jpeg .png .gif格式文件\"\r\n      });\r\n    },\r\n    handleMaxSize(file) {\r\n      this.$Notice.warning({\r\n        title: \"文件大小过大\",\r\n        desc: \"所选文件‘ \" + file.name + \" ’大小过大, 不得超过 5M.\"\r\n      });\r\n    },\r\n    handleBeforeUpload() {\r\n      const check = this.uploadList.length < 2;\r\n      if (!check) {\r\n        this.$Notice.warning({\r\n          title: \"最多只能上传 1 张图片\"\r\n        });\r\n      }\r\n      return check;\r\n    },\r\n    showChangeMobile() {\r\n      this.editMobileVisible = true;\r\n    },\r\n    showChangeEmail() {\r\n      this.editEmailVisible = true;\r\n    },\r\n    getIdentifyCode() {\r\n      this.hasGetIdentifyCode = true;\r\n      this.$refs[\"mobileEditForm\"].validate(valid => {\r\n        if (valid) {\r\n          this.canGetIdentifyCode = true;\r\n          let timeLast = 60;\r\n          let timer = setInterval(() => {\r\n            if (timeLast >= 0) {\r\n              this.gettingIdentifyCodeBtnContent = timeLast + \"秒后重试\";\r\n              timeLast -= 1;\r\n            } else {\r\n              clearInterval(timer);\r\n              this.gettingIdentifyCodeBtnContent = \"获取验证码\";\r\n              this.canGetIdentifyCode = false;\r\n            }\r\n          }, 1000);\r\n          this.editMobileVisible = true;\r\n          // you can write ajax request here\r\n        }\r\n      });\r\n    },\r\n    cancelEditUserInfo() {\r\n      this.$store.commit(\"removeTag\", \"ownspace_old\");\r\n      localStorage.pageOpenedList = JSON.stringify(\r\n        this.$store.state.app.pageOpenedList\r\n      );\r\n      let lastPageName = \"\";\r\n      let length = this.$store.state.app.pageOpenedList.length;\r\n      if (length > 1) {\r\n        lastPageName = this.$store.state.app.pageOpenedList[length - 1].name;\r\n      } else {\r\n        lastPageName = this.$store.state.app.pageOpenedList[0].name;\r\n      }\r\n      this.$router.push({\r\n        name: lastPageName\r\n      });\r\n    },\r\n    saveEdit() {\r\n      this.saveLoading = true;\r\n      let params = this.userForm;\r\n      delete params.nickName;\r\n      delete params.description;\r\n      userInfoEdit(params).then(res => {\r\n        this.saveLoading = false;\r\n        if (res.success === true) {\r\n          this.$Message.success(\"保存成功\");\r\n          // 更新用户信息\r\n          Cookies.set(\"userInfo\", this.userForm);\r\n          // 更新头像\r\n          this.$store.commit(\"setAvatarPath\", this.userForm.avatar);\r\n        }\r\n      });\r\n    },\r\n    changeAddress() {\r\n      this.userForm.address = JSON.stringify(this.userForm.addressArray);\r\n    },\r\n    cancelInputCodeBox() {\r\n      this.editMobileVisible = false;\r\n      this.userForm.mobile = this.initPhone;\r\n    },\r\n    cancelEditEmail() {\r\n      this.editEmailVisible = false;\r\n      this.emailEditForm.email = this.initEmail;\r\n    },\r\n    submitCode() {\r\n      this.checkIdentifyCodeLoading = true;\r\n      this.$refs[\"mobileEditForm\"].validate(valid => {\r\n        if (valid) {\r\n          if (this.mobileEditForm.code.length === 0) {\r\n            this.codeError = \"请填写短信验证码\";\r\n            this.checkIdentifyCodeLoading = false;\r\n            return;\r\n          } else {\r\n            this.$Message.success(\"修改成功\");\r\n            this.editMobileVisible = false;\r\n            this.checkIdentifyCodeLoading = false;\r\n          }\r\n        }\r\n      });\r\n    },\r\n    hasChangePhone() {\r\n      if (this.mobileEditForm.mobile === this.initPhone) {\r\n        this.canGetIdentifyCode = true;\r\n      } else {\r\n        this.$refs[\"mobileEditForm\"].validate(valid => {\r\n          if (valid) {\r\n            this.canGetIdentifyCode = false;\r\n          } else {\r\n            this.canGetIdentifyCode = true;\r\n          }\r\n        });\r\n      }\r\n    },\r\n    hasChangeEmail() {\r\n      if (this.emailEditForm.email === this.initEmail) {\r\n        this.canSendEditEmail = true;\r\n      } else {\r\n        this.canSendEditEmail = false;\r\n      }\r\n    },\r\n    sendVerifyEmail() {\r\n      this.$refs[\"emailEditForm\"].validate(valid => {\r\n        if (valid) {\r\n          this.sendVerifyEmailLoading = true;\r\n          setTimeout(() => {\r\n            this.sendVerifyEmailLoading = false;\r\n            this.editEmailVisible = false;\r\n            this.$Message.success(\"发送验证邮件成功，请注意查收\");\r\n          }, 1000);\r\n        }\r\n      });\r\n    }\r\n  },\r\n  mounted() {\r\n    this.uploadList = this.$refs.upload.fileList;\r\n    this.init();\r\n    this.hasChangePhone();\r\n  }\r\n};\r\n</script>\r\n"],"sourceRoot":"src/views/common/own-space"}]}