{"remainingRequest":"D:\\jingsai\\rcms_src\\rcms-pc-web\\node_modules\\thread-loader\\dist\\cjs.js!D:\\jingsai\\rcms_src\\rcms-pc-web\\node_modules\\babel-loader\\lib\\index.js!D:\\jingsai\\rcms_src\\rcms-pc-web\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\jingsai\\rcms_src\\rcms-pc-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\jingsai\\rcms_src\\rcms-pc-web\\src\\views\\miniUser\\recyclingVerify-page\\VerifyDetail.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\jingsai\\rcms_src\\rcms-pc-web\\src\\views\\miniUser\\recyclingVerify-page\\VerifyDetail.vue","mtime":1568022031992},{"path":"D:\\jingsai\\rcms_src\\rcms-pc-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\jingsai\\rcms_src\\rcms-pc-web\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\jingsai\\rcms_src\\rcms-pc-web\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\jingsai\\rcms_src\\rcms-pc-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\jingsai\\rcms_src\\rcms-pc-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { getVerifyPersonById, changeStatusToPass, changeStatusToFaild } from \"@/api/miniUser\";\nexport default {\n  //入口\n  created: function created() {\n    var data = this.$route.query.verifyData;\n\n    if (data != null && data != undefined && data.id != undefined) {\n      this.verifyDetail = data;\n      this.setStore(\"id\", data.id);\n    } else {\n      this.verifyDetail.id = this.getStore(\"id\");\n    }\n  },\n  data: function data() {\n    return {\n      verifyModal: false,\n      memo: \"\",\n      imgModal: false,\n      //查看大图\n      bigImgUrl: null,\n      //大图链接\n      isBigImg: false,\n      isVerify: null,\n      operationLoading: false,\n      // isRefuse: null,\n      // isCancel: null,\n      // isFinish: null,\n      // isPay: null,\n      color: \"color\",\n      //前一个页面传来的数据\n      verifyDetail: {\n        id: \"\",\n        //主键\n        openId: \"\",\n        //用户唯一标识\n        idCard: \"\",\n        phone: \"\",\n        //回收人员手机号码-\n        type: -1,\n        //回收人员类型 --- 后台通过判断值是否小于0决定是否进行条件查询，小于0则查询所有type-\n        positiveImgUrl: \"\",\n        //身份证正面照片\n        reverseImgUrl: \"\",\n        //身份证反面照片\n        address: \"\",\n        //回收人员地址\n        longitude: \"\",\n        //回收人员的经度\n        latitude: \"\",\n        //回收人员纬度\n        name: \"\",\n        //回收人员姓名-\n        status: -1 //回收人员状态 -后台通过判断值是否小于0决定是否进行条件查询，小于0则查询所有type\n\n      }\n    };\n  },\n  computed: {\n    type: function type() {\n      if (this.verifyDetail.type == 0) {\n        return \"社会回收人员\";\n      } else if (this.verifyDetail.type == 1) {\n        return \"公司员工\";\n      }\n    },\n    whichStatus: function whichStatus() {\n      if (this.verifyDetail.status == 0) {\n        return 0;\n      } else if (this.verifyDetail.status == 1) {\n        return 1;\n      } else if (this.verifyDetail.status == 2) {\n        return 2;\n      }\n    },\n    isNoPass: function isNoPass() {\n      if (this.verifyDetail.status == 0) {\n        return true;\n      } else return false;\n    },\n    isPassOrWait: function isPassOrWait() {\n      if (this.verifyDetail.status == 0 || this.verifyDetail.status == 1) {\n        return true;\n      } else return false;\n    },\n    isPass: function isPass() {\n      if (this.verifyDetail.status == 1) {\n        return true;\n      } else return false;\n    },\n    isFaild: function isFaild() {\n      if (this.verifyDetail.status == 2) {\n        return true;\n      } else return false;\n    }\n  },\n  methods: {\n    go: function go() {\n      this.$router.push({\n        path: \"recyclingPersonnelManage\"\n      });\n    },\n    back: function back() {\n      this.$router.go(-1);\n    },\n    watchBigImg: function watchBigImg(v) {\n      this.imgModal = !this.imgModal;\n      this.bigImgUrl = v;\n    },\n    //发起请求根据ID获取回收人员信息\n    getVerifyMethod: function getVerifyMethod() {\n      var _this = this;\n\n      getVerifyPersonById(this.verifyDetail.id).then(function (res) {\n        if (res.success === true) {\n          _this.verifyDetail = res.result; // 数据渲染\n        }\n      });\n    },\n    //审核通过,改变用户的状态\n    verifyPass: function verifyPass() {\n      var _this2 = this;\n\n      this.$Modal.confirm({\n        title: \"审核\",\n        content: \"您确定该用户通过审核吗\",\n        onOk: function onOk() {\n          _this2.operationLoading = true;\n          changeStatusToPass(_this2.verifyDetail.id, _this2.verifyDetail.name, _this2.verifyDetail.openId).then(function (res) {\n            _this2.operationLoading = false;\n\n            if (res.success === true) {\n              _this2.$Message.success(\"该用户通过审核\");\n\n              _this2.getVerifyMethod();\n            }\n          });\n        }\n      });\n    },\n    verifyFaild: function verifyFaild() {\n      this.verifyModal = true;\n    },\n    submit: function submit() {\n      var _this3 = this;\n\n      this.operationLoading = true;\n\n      if (this.memo == null || this.memo == \"\") {\n        this.$Message.error(\"请输入不通过原因\");\n        this.$refs[\"verify\"].buttonLoading = false;\n        this.$nextTick(function () {\n          _this3.$refs[\"verify\"].loading = true;\n        });\n      } else {\n        changeStatusToFaild(this.verifyDetail.id, this.memo, this.verifyDetail.name, this.verifyDetail.openId).then(function (res) {\n          _this3.operationLoading = false;\n\n          if (res.success === true) {\n            _this3.$Message.error(\"审核不通过\");\n\n            _this3.getVerifyMethod();\n\n            _this3.verifyModal = false;\n          }\n        });\n      }\n    } //审核不通过\n    // verifyFaild(){\n    //   this.$Modal.confirm({\n    //     title:\"审核\",\n    //     content:\"确定该用户审核不通过吗？\",\n    //     onOk: ()=>{\n    //       this.operationLoading = true;\n    //       changeStatusToFaild(this.verifyDetail.id).then(res =>{\n    //         this.operationLoading = false;\n    //         if(res.success === true){\n    //           this.$Message.error(\"审核不通过\")\n    //           this.getVerifyMethod();\n    //         }\n    //       });\n    //     }\n    //   });\n    // },\n\n  },\n  //渲染完毕\n  mounted: function mounted() {\n    this.getVerifyMethod(); //重新获取回收人员信息\n  },\n  watch: {\n    verifyModal: function verifyModal(newVal) {\n      if (!newVal) {\n        this.memo = \"\";\n      }\n    }\n  }\n};",null]}