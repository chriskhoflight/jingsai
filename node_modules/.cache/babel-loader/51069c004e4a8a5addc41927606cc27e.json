{"remainingRequest":"D:\\jingsai\\rcms_src\\rcms-pc-web\\node_modules\\thread-loader\\dist\\cjs.js!D:\\jingsai\\rcms_src\\rcms-pc-web\\node_modules\\babel-loader\\lib\\index.js!D:\\jingsai\\rcms_src\\rcms-pc-web\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\jingsai\\rcms_src\\rcms-pc-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\jingsai\\rcms_src\\rcms-pc-web\\src\\views\\communityInfo\\estateSchedule-manage\\estateScheduleManage.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\jingsai\\rcms_src\\rcms-pc-web\\src\\views\\communityInfo\\estateSchedule-manage\\estateScheduleManage.vue","mtime":1566954342389},{"path":"D:\\jingsai\\rcms_src\\rcms-pc-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\jingsai\\rcms_src\\rcms-pc-web\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\jingsai\\rcms_src\\rcms-pc-web\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\jingsai\\rcms_src\\rcms-pc-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\jingsai\\rcms_src\\rcms-pc-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { getScheduleList, getEstateCode, addSchedule, enableSchedule, disableSchedule, editSchedule, deleteSchedule, findByCodesArray } from \"@/api/community\";\nimport { getAllRoleList, getAllUserData, getDictDataByType } from \"@/api/index\";\nimport expandRow from \"./expand.vue\";\nimport departmentChoose from \"@/views/components/custom/department-choose\";\nimport departmentTreeChoose from \"@/views/components/custom/department-tree-choose\";\nimport uploadPicInput from \"@/views/components/custom/upload-pic-input\";\nimport circleLoading from \"@/views/components/custom/circle-loading.vue\";\nimport dynamicForm from \"@/views/components/dynamic-form/dynamicForm.vue\";\nexport default {\n  name: \"user-manage\",\n  components: {\n    circleLoading: circleLoading,\n    expandRow: expandRow,\n    departmentChoose: departmentChoose,\n    departmentTreeChoose: departmentTreeChoose,\n    uploadPicInput: uploadPicInput,\n    dynamicForm: dynamicForm\n  },\n  data: function data() {\n    var _this = this;\n\n    var isHave = function isHave(rule, value, callback) {\n      // console.log(\"----\"+this.modalType)\n      if (_this.modalType === 0 || _this.modalType === 1 && _this.oldPhone != _this.userForm.phone) {\n        selectByPhone({\n          phone: _this.userForm.phone\n        }).then(function (res) {\n          if (res.success === true) {\n            callback(new Error('该号码已被注册')); // console.log(\"----\"+res.result)\n          } else if (res.success === false) {\n            callback();\n          } else {\n            callback(new Error('手机号不能为空'));\n          }\n        });\n      } else {\n        callback();\n      }\n    };\n\n    var isEmpty = function isEmpty(rule, value, callback) {\n      if (value == null || value == undefined || value === \"\") {\n        callback(new Error('必填项不能为空'));\n      } else {\n        callback();\n      }\n    };\n\n    var checkLongitude = function checkLongitude(rule, value, callback) {\n      var longrg = /^(\\-|\\+)?(((\\d|[1-9]\\d|1[0-7]\\d|0{1,3})\\.\\d{0,6})|(\\d|[1-9]\\d|1[0-7]\\d|0{1,3})|180\\.0{0,6}|180)$/;\n\n      if (!longrg.test(value)) {\n        callback(new Error('经度整数部分为0-180,小数部分为0到6位!'));\n      } else {\n        callback();\n      }\n    };\n\n    var checkLatitude = function checkLatitude(rule, value, callback) {\n      var latrg = /^(\\-|\\+)?([0-8]?\\d{1}\\.\\d{0,6}|90\\.0{0,6}|[0-8]?\\d{1}|90)$/;\n\n      if (!latrg.test(value)) {\n        callback(new Error('纬度整数部分为0-90,小数部分为0到6位!'));\n      } else {\n        callback();\n      }\n    };\n\n    var idCard = function idCard(rule, value, callback) {\n      if (value && (!/\\d{17}[\\d|x]|\\d{15}/.test(value) || value.length !== 15 && value.length !== 18)) {\n        callback(new Error(\"身份证号码不符合规范\"));\n      } else {\n        callback();\n      }\n    };\n\n    var validatePassword = function validatePassword(rule, value, callback) {\n      if (value.length < 6) {\n        callback(new Error(\"密码长度不得小于6位\"));\n      } else {\n        callback();\n      }\n    };\n\n    var validateMobile = function validateMobile(rule, value, callback) {\n      var reg = /^[1][3,4,5,7,8][0-9]{9}$/;\n\n      if (!reg.test(value)) {\n        callback(new Error(\"手机号格式错误\"));\n      } else {\n        callback();\n      }\n    };\n\n    var checkInt = function checkInt(rule, value, callback) {\n      if (!(Number(value) && value % 1 === 0)) {\n        callback(new Error(\"请输入整数金额\"));\n      } else {\n        callback();\n      }\n    };\n\n    return {\n      estateInfo: \"\",\n      showEstate: [],\n      timeLine: false,\n      loading: true,\n      operationLoading: false,\n      loadingExport: true,\n      modalExportAll: false,\n      drop: false,\n      oldPhone: \"\",\n      dropDownContent: \"展开\",\n      dropDownIcon: \"ios-arrow-down\",\n      selectCount: 0,\n      estateCodeAndName: [],\n      selectList: [],\n      dataDep: [],\n      searchKey: \"\",\n      searchForm: {\n        // weekNum:\"\",\n        estateCodes: \"\",\n        week: \"\",\n        recoveryDesc: \"\",\n        recoveryTime: \"\",\n        status: \"\",\n        pageNumber: 1,\n        pageSize: 10,\n        sort: \"weekNum\",\n        order: \"desc\",\n        startDate: \"\",\n        endDate: \"\"\n      },\n      selectDate: null,\n      modalType: 0,\n      userModalVisible: false,\n      modalTitle: \"\",\n      userForm: {\n        // id:\"\",\n        week: \"\",\n        recoveryCar: \"\",\n        recoveryDesc: \"\",\n        recoveryTime: '',\n        estateCodes: \"\",\n        weekNum: \"\",\n        status: \"\",\n        arriveTimesSlot: ''\n      },\n      initData: [],\n      userRoles: [],\n      roleList: [],\n      errorPass: \"\",\n      userFormValidate: {\n        recoveryCar: [{\n          required: true,\n          message: \"回收车辆不能为空\",\n          trigger: \"blur\"\n        }],\n        recoveryDesc: [{\n          required: true,\n          message: \"回收物品描述不能为空\",\n          trigger: \"blur\"\n        }],\n        name: [{\n          required: true,\n          message: \"姓名不能为空\",\n          trigger: \"blur\"\n        }],\n        weekNum: [{\n          required: true,\n          message: \"星期不能为空\",\n          trigger: \"blur\"\n        }, {\n          validator: isEmpty,\n          trigger: 'blur'\n        }],\n        recoveryTime: [{\n          validator: isEmpty,\n          trigger: \"blur\"\n        }],\n        phone: [{\n          required: true,\n          message: \"手机号不能为空\",\n          trigger: \"blur\"\n        }, {\n          validator: validateMobile,\n          trigger: \"blur\"\n        }, {\n          validator: isHave,\n          trigger: \"blur\"\n        }],\n        idCard: [{\n          required: true,\n          message: \"身份证号码不能为空\",\n          trigger: \"blur\"\n        }, {\n          validator: idCard,\n          trigger: 'blur'\n        }],\n        deposit: [{\n          required: false\n        }, {\n          validator: checkInt\n        }],\n        status: [{\n          required: true,\n          message: \"状态不能为空\"\n        }, {\n          validator: isEmpty,\n          trigger: 'change'\n        }],\n        estateCodes: [{\n          validator: isEmpty,\n          trigger: 'blur'\n        }],\n        address: [{\n          required: true,\n          message: \"地址不能为空\",\n          trigger: \"blur\"\n        }],\n        longitude: [{\n          required: true,\n          message: \"经度不能为空\",\n          trigger: \"blur\"\n        }, {\n          validator: checkLongitude,\n          trigger: 'blur'\n        }],\n        latitude: [{\n          required: true,\n          message: \"纬度不能为空\",\n          trigger: \"blur\"\n        }, {\n          validator: checkLatitude,\n          trigger: 'blur'\n        }]\n      },\n      submitLoading: false,\n      columns: [{\n        type: \"selection\",\n        width: 60,\n        align: \"center\",\n        fixed: \"left\"\n      }, {\n        type: \"expand\",\n        width: 50,\n        fixed: \"left\",\n        render: function render(h, params) {\n          return h(expandRow, {\n            props: {\n              row: params.row\n            }\n          });\n        }\n      }, {\n        type: \"index\",\n        width: 80,\n        align: \"center\",\n        fixed: \"left\",\n        title: '序号'\n      }, {\n        title: \"星期\",\n        key: \"week\",\n        minWidth: 145,\n        fixed: \"left\"\n      }, {\n        title: \"回收物品描述\",\n        key: \"recoveryDesc\",\n        minWidth: 115\n      }, {\n        title: \"上门收运时间\",\n        key: \"recoveryTime\",\n        minWidth: 180,\n        sortable: true\n      }, {\n        title: \"小区编码\",\n        key: \"estateCodes\",\n        minWidth: 150\n      }, {\n        title: \"创建时间\",\n        key: \"createTime\",\n        sortable: true,\n        sortType: \"desc\",\n        minWidth: 150\n      }, {\n        title: \"状态\",\n        key: \"status\",\n        align: \"center\",\n        minWidth: 140,\n        render: function render(h, params) {\n          var re = \"\";\n\n          if (params.row.status === 0) {\n            return h(\"div\", [h(\"Tag\", {\n              props: {\n                type: \"dot\",\n                color: \"success\"\n              }\n            }, \"正常启用\")]);\n          } else if (params.row.status === -1) {\n            return h(\"div\", [h(\"Tag\", {\n              props: {\n                type: \"dot\",\n                color: \"error\"\n              }\n            }, \"禁用\")]);\n          }\n        },\n        filters: [{\n          label: \"正常启用\",\n          value: 0\n        }, {\n          label: \"禁用\",\n          value: -1\n        }],\n        filterMultiple: false,\n        filterMethod: function filterMethod(value, row) {\n          if (value === 0) {\n            return row.status === 0;\n          } else if (value === -1) {\n            return row.status === -1;\n          }\n        }\n      }, {\n        title: \"回收车辆\",\n        key: \"recoveryCar\",\n        minWidth: 115\n      }, {\n        title: \"星期数值\",\n        key: \"weekNum\",\n        minWidth: 120,\n        fixed: \"left\",\n        sortable: true\n      }, {\n        title: \"操作\",\n        key: \"action\",\n        minWidth: 300,\n        align: \"center\",\n        fixed: \"right\",\n        render: function render(h, params) {\n          var enableOrDisable = \"\";\n\n          if (params.row.status == 0) {\n            enableOrDisable = h(\"Button\", {\n              props: {\n                size: \"small\"\n              },\n              style: {\n                marginRight: \"5px\"\n              },\n              on: {\n                click: function click() {\n                  _this.disable(params.row);\n                }\n              }\n            }, \"禁用\");\n          } else {\n            enableOrDisable = h(\"Button\", {\n              props: {\n                type: \"success\",\n                size: \"small\"\n              },\n              style: {\n                marginRight: \"5px\"\n              },\n              on: {\n                click: function click() {\n                  _this.enable(params.row);\n                }\n              }\n            }, \"启用\");\n          }\n\n          return h(\"div\", [h(\"Button\", {\n            props: {\n              type: \"primary\",\n              size: \"small\"\n            },\n            style: {\n              marginRight: \"5px\"\n            },\n            on: {\n              click: function click() {\n                _this.edit(params.row);\n              }\n            }\n          }, \"编辑\"), enableOrDisable, h(\"Button\", {\n            props: {\n              type: \"error\",\n              size: \"small\"\n            },\n            style: {\n              marginRight: \"5px\"\n            },\n            on: {\n              click: function click() {\n                _this.remove(params.row);\n              }\n            }\n          }, \"删除\"), h(\"Button\", {\n            props: {\n              type: \"info\",\n              size: \"small\"\n            },\n            on: {\n              click: function click() {\n                _this.show(params.row);\n              }\n            }\n          }, \"途经小区\")]);\n        }\n      }],\n      exportColumns: [{\n        title: \"用户名\",\n        key: \"username\"\n      }, {\n        title: \"头像\",\n        key: \"avatar\"\n      }, {\n        title: \"所属部门ID\",\n        key: \"departmentId\"\n      }, {\n        title: \"所属部门\",\n        key: \"departmentTitle\"\n      }, {\n        title: \"手机\",\n        key: \"mobile\"\n      }, {\n        title: \"邮箱\",\n        key: \"email\"\n      }, {\n        title: \"性别\",\n        key: \"sex\"\n      }, {\n        title: \"用户类型\",\n        key: \"type\"\n      }, {\n        title: \"状态\",\n        key: \"status\"\n      }, {\n        title: \"删除标志\",\n        key: \"delFlag\"\n      }, {\n        title: \"创建时间\",\n        key: \"createTime\"\n      }, {\n        title: \"更新时间\",\n        key: \"updateTime\"\n      }],\n      data: [],\n      exportData: [],\n      total: 0,\n      dictSex: []\n    };\n  },\n  methods: {\n    init: function init() {\n      this.getUserList();\n      this.getDictSexData();\n      this.getEstate();\n    },\n    getEstate: function getEstate() {\n      var _this2 = this;\n\n      getEstateCode().then(function (response) {\n        _this2.estateCodeAndName = response.result;\n      });\n    },\n    getDictSexData: function getDictSexData() {\n      var _this3 = this;\n\n      // 获取性别字典数据\n      getDictDataByType(\"sex\").then(function (res) {\n        if (res.success) {\n          _this3.dictSex = res.result;\n        }\n      });\n    },\n    time: function time(v) {\n      //  console.log(v)\n      //拼接成字符串，保存到数据库\n      this.userForm.recoveryTime = v[0] + \"-\" + v[1];\n    },\n    handleSelectDepTree: function handleSelectDepTree(v) {\n      this.userForm.departmentId = v[0];\n    },\n    handleSelectDep: function handleSelectDep(v) {\n      this.searchForm.departmentId = v;\n    },\n    changePage: function changePage(v) {\n      this.searchForm.pageNumber = v;\n      this.getUserList();\n      this.clearSelectAll();\n    },\n    changePageSize: function changePageSize(v) {\n      this.searchForm.pageSize = v;\n      this.getUserList();\n    },\n    selectDateRange: function selectDateRange(v) {\n      if (v) {\n        this.searchForm.startDate = v[0];\n        this.searchForm.endDate = v[1];\n      }\n    },\n    getUserList: function getUserList() {\n      var _this4 = this;\n\n      // 多条件搜索用户列表\n      this.loading = true; // 避免后台默认值\n      // if (!this.searchForm.type) {\n      //   this.searchForm.type = \"\";\n      // }\n      // if (!this.searchForm.status) {\n      //   this.searchForm.status = \"\";\n      // }\n\n      getScheduleList(this.searchForm).then(function (res) {\n        _this4.loading = false;\n\n        if (res.success === true) {\n          // console.log(res.result.content)\n          _this4.data = res.result.content;\n          _this4.total = res.result.totalElements;\n        }\n      });\n    },\n    handleSearch: function handleSearch() {\n      this.searchForm.pageNumber = 1;\n      this.searchForm.pageSize = 10;\n      this.getUserList();\n    },\n    handleReset: function handleReset() {\n      this.$refs.searchForm.resetFields();\n      this.searchForm.pageNumber = 1;\n      this.searchForm.pageSize = 10;\n      this.selectDate = null;\n      this.searchForm.startDate = \"\";\n      this.searchForm.endDate = \"\";\n      this.selectDep = [];\n      this.searchForm.departmentId = \"\"; // 重新加载数据\n\n      this.getUserList();\n    },\n    changeSort: function changeSort(e) {\n      this.searchForm.sort = e.key;\n      this.searchForm.order = e.order;\n\n      if (e.order === \"normal\") {\n        this.searchForm.order = \"\";\n      }\n\n      this.getUserList();\n    },\n    getRoleList: function getRoleList() {\n      var _this5 = this;\n\n      getAllRoleList().then(function (res) {\n        if (res.success === true) {\n          _this5.roleList = res.result;\n        }\n      });\n    },\n    handleDropdown: function handleDropdown(name) {\n      var _this6 = this;\n\n      if (name === \"refresh\") {\n        this.getUserList();\n      } else if (name === \"exportData\") {\n        if (this.selectCount <= 0) {\n          this.$Message.warning(\"您还未选择要导出的数据\");\n          return;\n        }\n\n        this.$Modal.confirm({\n          title: \"确认导出\",\n          content: \"您确认要导出所选 \" + this.selectCount + \" 条数据?\",\n          onOk: function onOk() {\n            _this6.$refs.exportTable.exportCsv({\n              filename: \"用户数据\"\n            });\n          }\n        });\n      } else if (name === \"exportAll\") {\n        this.modalExportAll = true;\n      } else if (name === \"importData\") {\n        this.$Modal.info({\n          title: \"暂未开发\",\n          content: \"请期待\"\n        });\n      }\n    },\n    exportAll: function exportAll() {\n      var _this7 = this;\n\n      getAllUserData().then(function (res) {\n        _this7.modalExportAll = false;\n\n        if (res.success) {\n          _this7.exportData = res.result;\n          setTimeout(function () {\n            _this7.$refs.exportTable.exportCsv({\n              filename: \"用户全部数据\"\n            });\n          }, 1000);\n        }\n      });\n    },\n    cancelUser: function cancelUser() {\n      this.userModalVisible = false;\n    },\n    submitUser: function submitUser() {\n      var _this8 = this;\n\n      this.$refs.userForm.validate(function (valid) {\n        // console.log(this.$refs.dynamicForm.formDynamic.items)\n        if (valid) {\n          var data = JSON.stringify(_this8.userForm);\n          var postData = JSON.parse(data);\n          postData.recoveryTime = _this8.userForm.recoveryTime.join(\"-\");\n          var estateCodes = '';\n          var times = '';\n          var flag = false;\n\n          _this8.$refs.dynamicForm.formDynamic.items.forEach(function (item, index, arr) {\n            if (item.status !== 0) {\n              if (item.value !== '' && item.time[0] !== '' && item.time[1] !== '') {\n                var separator = index === arr.length - 1 ? '' : \",\";\n                estateCodes += item.value + separator;\n                times += item.time.join(\"-\") + separator;\n              } else {\n                flag = true;\n              }\n            }\n          });\n\n          if (flag) {\n            _this8.$Message.error(\"时间段输入错误,请重新输入\");\n\n            return;\n          }\n\n          var index = estateCodes.lastIndexOf(\",\");\n\n          if (index === estateCodes.length - 1) {\n            estateCodes = estateCodes.substring(0, index);\n            times = times.substring(0, times.lastIndexOf(\",\"));\n          }\n\n          postData.estateCodes = estateCodes;\n          postData.arriveTimesSlot = times;\n\n          if (_this8.modalType === 0) {\n            // 添加用户 避免编辑后传入id\n            delete _this8.userForm.id;\n            addSchedule(postData).then(function (res) {\n              _this8.submitLoading = false;\n\n              if (res.success === true) {\n                _this8.$Message.success(\"操作成功\");\n\n                _this8.getUserList();\n\n                _this8.userModalVisible = false;\n              }\n            });\n          } else {\n            // 编辑\n            _this8.submitLoading = true;\n            editSchedule(postData).then(function (res) {\n              _this8.submitLoading = false;\n\n              if (res.success === true) {\n                _this8.$Message.success(\"操作成功\");\n\n                _this8.getUserList();\n\n                _this8.userModalVisible = false;\n              }\n            });\n          }\n        }\n      });\n    },\n    handleUpload: function handleUpload(v) {\n      this.userForm.positiveImgUrl = v;\n      this.userForm.reverseImgUrl = v;\n    },\n    add: function add() {\n      this.modalType = 0;\n      this.modalTitle = \"添加排班信息\";\n      this.$refs.userForm.resetFields();\n      this.$refs.dynamicForm.handleReset(\"formDynamic\");\n      this.userModalVisible = true;\n    },\n    edit: function edit(v) {\n      this.modalType = 1;\n      this.modalTitle = \"编辑排班信息\";\n      this.$refs.userForm.resetFields(); // 转换null为\"\"\n\n      for (var attr in v) {\n        if (v[attr] === null) {\n          v[attr] = \"\";\n        }\n      }\n\n      var str = JSON.stringify(v);\n      var data = JSON.parse(str); // console.log(data)\n\n      data.estateCodes = data.estateCodes.split(\",\");\n      var initData = [];\n      var times = data.arriveTimesSlot.split(\",\");\n      data.estateCodes.forEach(function (item, index, arr) {\n        var time = times[index].split(\"-\");\n        initData.push({\n          index: index,\n          status: 1,\n          value: item,\n          time: time\n        });\n      });\n      this.initData = initData; // console.log(this.initData)\n      // console.log(\"estateCodes is:\"+data.estateCodes)\n\n      data.status = String(data.status);\n      data.recoveryTime = data.recoveryTime.split(\"-\"); // console.log(data.recoveryTime)\n      // console.log(data.weekNum)\n\n      data.weekNum = String(data.weekNum);\n      this.userForm = data; //this.$refs.depTree.setSelectDep([data.departmentId], data.departmentTitle);\n\n      this.userModalVisible = true;\n    },\n    enable: function enable(v) {\n      var _this9 = this;\n\n      this.$Modal.confirm({\n        title: \"确认启用\",\n        content: \"您确认该排班信息吗\",\n        onOk: function onOk() {\n          _this9.operationLoading = true;\n          enableSchedule(v.id).then(function (res) {\n            _this9.operationLoading = false;\n\n            if (res.success === true) {\n              _this9.$Message.success(\"操作成功\");\n\n              _this9.getUserList();\n            }\n          });\n        }\n      });\n    },\n    disable: function disable(v) {\n      var _this10 = this;\n\n      this.$Modal.confirm({\n        title: \"确认禁用\",\n        content: \"您确认要禁用该排班信息吗\",\n        onOk: function onOk() {\n          _this10.operationLoading = true;\n          disableSchedule(v.id).then(function (res) {\n            _this10.operationLoading = false;\n\n            if (res.success === true) {\n              _this10.$Message.success(\"操作成功\");\n\n              _this10.getUserList();\n            }\n          });\n        }\n      });\n    },\n    remove: function remove(v) {\n      var _this11 = this;\n\n      this.$Modal.confirm({\n        title: \"确认删除\",\n        content: \"您确认要删除该排班信息吗？\",\n        onOk: function onOk() {\n          _this11.operationLoading = true;\n          deleteSchedule(v.id).then(function (res) {\n            _this11.operationLoading = false;\n\n            if (res.success === true) {\n              _this11.$Message.success(\"删除成功\");\n\n              _this11.getUserList();\n            }\n          });\n        }\n      });\n    },\n    show: function show(v) {\n      var _this12 = this;\n\n      // console.log(v)\n      this.timeLine = true;\n      this.showEstate = v.estateCodes.toString();\n      findByCodesArray({\n        code: this.showEstate\n      }).then(function (res) {\n        // console.log(this.showEstate)\n        _this12.loading = false;\n\n        if (res.success === true) {\n          // console.log(this.showEstate)\n          res.result.forEach(function (item, index) {\n            item.time = v.arriveTimesSlot.split(\",\")[index];\n          });\n          _this12.estateInfo = res.result; // console.log(\"----\")\n          // console.log(this.estateInfo)\n        }\n      });\n    },\n    dropDown: function dropDown() {\n      if (this.drop) {\n        this.dropDownContent = \"展开\";\n        this.dropDownIcon = \"ios-arrow-down\";\n      } else {\n        this.dropDownContent = \"收起\";\n        this.dropDownIcon = \"ios-arrow-up\";\n      }\n\n      this.drop = !this.drop;\n    },\n    showSelect: function showSelect(e) {\n      this.exportData = e;\n      this.selectList = e;\n      this.selectCount = e.length;\n    },\n    clearSelectAll: function clearSelectAll() {\n      this.$refs.table.selectAll(false);\n    },\n    delAll: function delAll() {\n      var _this13 = this;\n\n      if (this.selectCount <= 0) {\n        this.$Message.warning(\"您还未选择要删除的数据\");\n        return;\n      }\n\n      this.$Modal.confirm({\n        title: \"确认删除\",\n        content: \"您确认要删除所选的 \" + this.selectCount + \" 条数据?\",\n        onOk: function onOk() {\n          var ids = \"\";\n\n          _this13.selectList.forEach(function (e) {\n            ids += e.id + \",\";\n          });\n\n          ids = ids.substring(0, ids.length - 1);\n          _this13.operationLoading = true;\n          deleteSchedule(ids).then(function (res) {\n            _this13.operationLoading = false;\n\n            if (res.success === true) {\n              _this13.$Message.success(\"删除成功\");\n\n              _this13.clearSelectAll();\n\n              _this13.getUserList();\n            }\n          });\n        }\n      });\n    },\n    addWeek: function addWeek(val) {\n      // console.log(\"---\"+this.userForm.weekNum)\n      // console.log(val)\n      if (val !== undefined) {\n        this.userForm.week = val.label;\n        this.userForm.weekNum = val.value;\n      }\n    }\n  },\n  mounted: function mounted() {\n    this.init();\n    this.getRoleList();\n  }\n};",null]}